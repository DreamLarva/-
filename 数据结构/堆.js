"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.MaxHeap = exports.MinHeap = void 0;
const __1 = require("./\u5806\u5316");
class Heap {
    data = [];
    constructor(arr) {
        this.data = [...arr];
        // 初始化 堆化
        this.heapifyWithSiftDown();
    }
    /**
     * 堆的大小
     * */
    get size() {
        return this.data.length;
    }
    heapifyWithSiftDown() {
        const A = this.data;
        // 初始选择最接近叶子的一个父结点
        for (let i = Math.floor((A.length - 1) / 2); i >= 0; i--) {
            this.siftDown(A, i);
        }
        return A;
    }
    /**
     * 插入
     * 在堆的尾部添加一个新的元素，然后使用 shiftUp 来修复
     * */
    insert(value) {
        this.data.push(value);
        this.siftUp(this.data, this.size - 1);
    }
    /**
     * 移除并返回最大值（最大堆）或者最小值（最小堆）
     * 为了将这个节点删除后的空位填补上，需要将最后一个元素移到根节点的位置，
     * 然后使用 shiftDown 方法来修复堆
     * */
    remove() {
        const result = this.data.shift();
        this.heapifyWithSiftDown();
        return result;
    }
    /**
     * 移除并返回堆末尾的数据
     * */
    poll() {
        return this.data.pop();
    }
    /**
     * 移除堆中任意节点
     * 当它与子节点比较位置不时无序时使用 shiftDown()，如果与父节点比较发现无序则使用 shiftUp()
     * */
    removeAtIndex() { }
    /**
     * 将一个更小的值（最小堆）或者更大的值（最大堆）赋值给一个节点
     *
     * */
    replace() { }
}
/**
 * 最小堆(小顶堆)
 * */
class MinHeap extends Heap {
    constructor(arr) {
        super(arr);
    }
    siftUp(A, k) {
        while (k != 0) {
            // 找到父节点
            const father = Math.floor((k - 1) / 2);
            // 如果父节点 > 新加入的节点 符合 堆 结束 该轮
            if (A[k] > A[father]) {
                break;
            }
            // 反之 那么 交换两个节点
            [A[k], A[father]] = [A[father], A[k]];
            // 现在 现在新加入的节点 现在在 原来的父节点上
            k = father;
        }
    }
    siftDown(A, k) {
        while (k * 2 + 1 < A.length) {
            let son = k * 2 + 1;
            // 与其两个儿子中较小的一个比较
            if (k * 2 + 2 < A.length && A[son] > A[k * 2 + 2]) {
                son = k * 2 + 2;
            }
            // 若大于儿子，则与儿子交换。
            if (A[son] > A[k]) {
                break;
            }
            [A[son], A[k]] = [A[k], A[son]];
            // 交换后再与新的儿子比较并交换，直至没有儿子。
            k = son;
        }
    }
}
exports.MinHeap = MinHeap;
/**
 * 最大堆(大顶堆)
 * */
class MaxHeap extends Heap {
    constructor(arr) {
        super(arr);
    }
    siftUp(A, k) {
        while (k != 0) {
            // 找到父节点
            const father = Math.floor((k - 1) / 2);
            // 如果父节点 > 新加入的节点 符合 堆 结束 该轮
            if (A[k] < A[father]) {
                break;
            }
            // 反之 那么 交换两个节点
            [A[k], A[father]] = [A[father], A[k]];
            // 现在 现在新加入的节点 现在在 原来的父节点上
            k = father;
        }
    }
    siftDown(A, k) {
        while (k * 2 + 1 < A.length) {
            let son = k * 2 + 1;
            if (k * 2 + 2 < A.length && A[son] < A[k * 2 + 2]) {
                son = k * 2 + 2;
            }
            if (A[son] < A[k]) {
                break;
            }
            [A[son], A[k]] = [A[k], A[son]];
            // 交换后再与新的儿子比较并交换，直至没有儿子。
            k = son;
        }
    }
}
exports.MaxHeap = MaxHeap;
const assert_1 = __importDefault(require("assert"));
{
    const minHeap = new MinHeap([
        2,
        3,
        1,
        3,
        4,
        5,
        1,
        3,
        6,
        7,
        8,
        9,
        54,
        5,
        7,
        3,
        2,
        1,
        2,
        41,
        5,
        7,
    ]);
    assert_1.default.ok(__1.validHeap(minHeap.data));
    minHeap.insert(0);
    minHeap.insert(99);
    assert_1.default.ok(__1.validHeap(minHeap.data));
}
{
    const maxHeap = new MaxHeap([
        2,
        3,
        1,
        3,
        4,
        5,
        1,
        3,
        6,
        7,
        8,
        9,
        54,
        5,
        7,
        3,
        2,
        1,
        2,
        41,
        5,
        7,
    ]);
    assert_1.default.ok(__1.validHeap(maxHeap.data));
    maxHeap.insert(0);
    maxHeap.insert(99);
    assert_1.default.ok(__1.validHeap(maxHeap.data));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoi5aCGLmpzIiwic291cmNlUm9vdCI6Ii4vIiwic291cmNlcyI6WyLmlbDmja7nu5PmnoQv5aCGLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLHNDQUFpQztBQUVqQyxNQUFlLElBQUk7SUFDakIsSUFBSSxHQUFhLEVBQUUsQ0FBQztJQUVwQixZQUFzQixHQUFhO1FBQ2pDLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDO1FBQ3JCLFNBQVM7UUFDVCxJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztJQUM3QixDQUFDO0lBRUQ7O1NBRUs7SUFDTCxJQUFJLElBQUk7UUFDTixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQzFCLENBQUM7SUFNRCxtQkFBbUI7UUFDakIsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztRQUNwQixrQkFBa0I7UUFDbEIsS0FBSyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3hELElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1NBQ3JCO1FBRUQsT0FBTyxDQUFDLENBQUM7SUFDWCxDQUFDO0lBRUQ7OztTQUdLO0lBQ0wsTUFBTSxDQUFDLEtBQWE7UUFDbEIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDeEMsQ0FBQztJQUVEOzs7O1NBSUs7SUFDTCxNQUFNO1FBQ0osTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUs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Q0FBQztRQUNELENBQUM7UUFDRCxDQUFDO1FBQ0QsQ0FBQztRQUNELENBQUM7UUFDRCxFQUFFO1FBQ0YsQ0FBQztRQUNELENBQUM7S0FDRixDQUFDLENBQUM7SUFDSCxnQkFBTSxDQUFDLEVBQUUsQ0FBQyxhQUFTLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDbkMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNsQixPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ25CLGdCQUFNLENBQUMsRUFBRSxDQUFDLGFBQVMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztDQUNwQztBQUNEO0lBQ0UsTUFBTSxPQUFPLEdBQUcsSUFBSSxPQUFPLENBQUM7UUFDMUIsQ0FBQztRQUNELENBQUM7UUFDRCxDQUFDO1FBQ0QsQ0FBQztRQUNELENBQUM7UUFDRCxDQUFDO1FBQ0QsQ0FBQztRQUNELENBQUM7UUFDRCxDQUFDO1FBQ0QsQ0FBQztRQUNELENBQUM7UUFDRCxDQUFDO1FBQ0QsRUFBRTtRQUNGLENBQUM7UUFDRCxDQUFDO1FBQ0QsQ0FBQztRQUNELENBQUM7UUFDRCxDQUFDO1FBQ0QsQ0FBQztRQUNELEVBQUU7UUFDRixDQUFDO1FBQ0QsQ0FBQztLQUNGLENBQUMsQ0FBQztJQUNILGdCQUFNLENBQUMsRUFBRSxDQUFDLGFBQVMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUNuQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2xCLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDbkIsZ0JBQU0sQ0FBQyxFQUFFLENBQUMsYUFBUyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0NBQ3BDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdmFsaWRIZWFwIH0gZnJvbSBcIi4v5aCG5YyWXCI7XG5cbmFic3RyYWN0IGNsYXNzIEhlYXAge1xuICBkYXRhOiBudW1iZXJbXSA9IFtdO1xuXG4gIHByb3RlY3RlZCBjb25zdHJ1Y3RvcihhcnI6IG51bWJlcltdKSB7XG4gICAgdGhpcy5kYXRhID0gWy4uLmFycl07XG4gICAgLy8g5Yid5aeL5YyWIOWghuWMllxuICAgIHRoaXMuaGVhcGlmeVdpdGhTaWZ0RG93bigpO1xuICB9XG5cbiAgLyoqXG4gICAqIOWghueahOWkp+Wwj1xuICAgKiAqL1xuICBnZXQgc2l6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmxlbmd0aDtcbiAgfVxuXG4gIGFic3RyYWN0IHNpZnREb3duKEE6IG51bWJlcltdLCBrOiBudW1iZXIpOiB2b2lkO1xuXG4gIGFic3RyYWN0IHNpZnRVcChBOiBudW1iZXJbXSwgazogbnVtYmVyKTogdm9pZDtcblxuICBoZWFwaWZ5V2l0aFNpZnREb3duKCkge1xuICAgIGNvbnN0IEEgPSB0aGlzLmRhdGE7XG4gICAgLy8g5Yid5aeL6YCJ5oup5pyA5o6l6L+R5Y+25a2Q55qE5LiA5Liq54i257uT54K5XG4gICAgZm9yIChsZXQgaSA9IE1hdGguZmxvb3IoKEEubGVuZ3RoIC0gMSkgLyAyKTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHRoaXMuc2lmdERvd24oQSwgaSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIEE7XG4gIH1cblxuICAvKipcbiAgICog5o+S5YWlXG4gICAqIOWcqOWghueahOWwvumDqOa3u+WKoOS4gOS4quaWsOeahOWFg+e0oO+8jOeEtuWQjuS9v+eUqCBzaGlmdFVwIOadpeS/ruWkjVxuICAgKiAqL1xuICBpbnNlcnQodmFsdWU6IG51bWJlcikge1xuICAgIHRoaXMuZGF0YS5wdXNoKHZhbHVlKTtcbiAgICB0aGlzLnNpZnRVcCh0aGlzLmRhdGEsIHRoaXMuc2l6ZSAtIDEpO1xuICB9XG5cbiAgLyoqXG4gICAqIOenu+mZpOW5tui/lOWbnuacgOWkp+WAvO+8iOacgOWkp+Wghu+8ieaIluiAheacgOWwj+WAvO+8iOacgOWwj+Wghu+8iVxuICAgKiDkuLrkuoblsIbov5nkuKroioLngrnliKDpmaTlkI7nmoTnqbrkvY3loavooaXkuIrvvIzpnIDopoHlsIbmnIDlkI7kuIDkuKrlhYPntKDnp7vliLDmoLnoioLngrnnmoTkvY3nva7vvIxcbiAgICog54S25ZCO5L2/55SoIHNoaWZ0RG93biDmlrnms5XmnaXkv67lpI3loIZcbiAgICogKi9cbiAgcmVtb3ZlKCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuZGF0YS5zaGlmdCgpO1xuICAgIHRoaXMuaGVhcGlmeVdpdGhTaWZ0RG93bigpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICog56e76Zmk5bm26L+U5Zue5aCG5pyr5bC+55qE5pWw5o2uXG4gICAqICovXG4gIHBvbGwoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5wb3AoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDnp7vpmaTloIbkuK3ku7vmhI/oioLngrlcbiAgICog5b2T5a6D5LiO5a2Q6IqC54K55q+U6L6D5L2N572u5LiN5pe25peg5bqP5pe25L2/55SoIHNoaWZ0RG93bigp77yM5aaC5p6c5LiO54i26IqC54K55q+U6L6D5Y+R546w5peg5bqP5YiZ5L2/55SoIHNoaWZ0VXAoKVxuICAgKiAqL1xuICByZW1vdmVBdEluZGV4KCkge31cblxuICAvKipcbiAgICog5bCG5LiA5Liq5pu05bCP55qE5YC877yI5pyA5bCP5aCG77yJ5oiW6ICF5pu05aSn55qE5YC877yI5pyA5aSn5aCG77yJ6LWL5YC857uZ5LiA5Liq6IqC54K5XG4gICAqXG4gICAqICovXG4gIHJlcGxhY2UoKSB7fVxufVxuXG4vKipcbiAqIOacgOWwj+WghijlsI/pobbloIYpXG4gKiAqL1xuZXhwb3J0IGNsYXNzIE1pbkhlYXAgZXh0ZW5kcyBIZWFwIHtcbiAgY29uc3RydWN0b3IoYXJyOiBudW1iZXJbXSkge1xuICAgIHN1cGVyKGFycik7XG4gIH1cblxuICBzaWZ0VXAoQTogbnVtYmVyW10sIGs6IG51bWJlcik6IHZvaWQge1xuICAgIHdoaWxlIChrICE9IDApIHtcbiAgICAgIC8vIOaJvuWIsOeItuiKgueCuVxuICAgICAgY29uc3QgZmF0aGVyID0gTWF0aC5mbG9vcigoayAtIDEpIC8gMik7XG4gICAgICAvLyDlpoLmnpzniLboioLngrkgPiDmlrDliqDlhaXnmoToioLngrkg56ym5ZCIIOWghiDnu5PmnZ8g6K+l6L2uXG4gICAgICBpZiAoQVtrXSA+IEFbZmF0aGVyXSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIC8vIOWPjeS5iyDpgqPkuYgg5Lqk5o2i5Lik5Liq6IqC54K5XG4gICAgICBbQVtrXSwgQVtmYXRoZXJdXSA9IFtBW2ZhdGhlcl0sIEFba11dO1xuXG4gICAgICAvLyDnjrDlnKgg546w5Zyo5paw5Yqg5YWl55qE6IqC54K5IOeOsOWcqOWcqCDljp/mnaXnmoTniLboioLngrnkuIpcbiAgICAgIGsgPSBmYXRoZXI7XG4gICAgfVxuICB9XG5cbiAgc2lmdERvd24oQTogbnVtYmVyW10sIGs6IG51bWJlcik6IHZvaWQge1xuICAgIHdoaWxlIChrICogMiArIDEgPCBBLmxlbmd0aCkge1xuICAgICAgbGV0IHNvbiA9IGsgKiAyICsgMTtcbiAgICAgIC8vIOS4juWFtuS4pOS4quWEv+WtkOS4rei+g+Wwj+eahOS4gOS4quavlOi+g1xuICAgICAgaWYgKGsgKiAyICsgMiA8IEEubGVuZ3RoICYmIEFbc29uXSA+IEFbayAqIDIgKyAyXSkge1xuICAgICAgICBzb24gPSBrICogMiArIDI7XG4gICAgICB9XG5cbiAgICAgIC8vIOiLpeWkp+S6juWEv+WtkO+8jOWImeS4juWEv+WtkOS6pOaNouOAglxuICAgICAgaWYgKEFbc29uXSA+IEFba10pIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBbQVtzb25dLCBBW2tdXSA9IFtBW2tdLCBBW3Nvbl1dO1xuICAgICAgLy8g5Lqk5o2i5ZCO5YaN5LiO5paw55qE5YS/5a2Q5q+U6L6D5bm25Lqk5o2i77yM55u06Iez5rKh5pyJ5YS/5a2Q44CCXG4gICAgICBrID0gc29uO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIOacgOWkp+WghijlpKfpobbloIYpXG4gKiAqL1xuZXhwb3J0IGNsYXNzIE1heEhlYXAgZXh0ZW5kcyBIZWFwIHtcbiAgY29uc3RydWN0b3IoYXJyOiBudW1iZXJbXSkge1xuICAgIHN1cGVyKGFycik7XG4gIH1cblxuICBzaWZ0VXAoQTogbnVtYmVyW10sIGs6IG51bWJlcik6IHZvaWQge1xuICAgIHdoaWxlIChrICE9IDApIHtcbiAgICAgIC8vIOaJvuWIsOeItuiKgueCuVxuICAgICAgY29uc3QgZmF0aGVyID0gTWF0aC5mbG9vcigoayAtIDEpIC8gMik7XG4gICAgICAvLyDlpoLmnpzniLboioLngrkgPiDmlrDliqDlhaXnmoToioLngrkg56ym5ZCIIOWghiDnu5PmnZ8g6K+l6L2uXG4gICAgICBpZiAoQVtrXSA8IEFbZmF0aGVyXSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIC8vIOWPjeS5iyDpgqPkuYgg5Lqk5o2i5Lik5Liq6IqC54K5XG4gICAgICBbQVtrXSwgQVtmYXRoZXJdXSA9IFtBW2ZhdGhlcl0sIEFba11dO1xuXG4gICAgICAvLyDnjrDlnKgg546w5Zyo5paw5Yqg5YWl55qE6IqC54K5IOeOsOWcqOWcqCDljp/mnaXnmoTniLboioLngrnkuIpcbiAgICAgIGsgPSBmYXRoZXI7XG4gICAgfVxuICB9XG5cbiAgc2lmdERvd24oQTogbnVtYmVyW10sIGs6IG51bWJlcik6IHZvaWQge1xuICAgIHdoaWxlIChrICogMiArIDEgPCBBLmxlbmd0aCkge1xuICAgICAgbGV0IHNvbiA9IGsgKiAyICsgMTtcbiAgICAgIGlmIChrICogMiArIDIgPCBBLmxlbmd0aCAmJiBBW3Nvbl0gPCBBW2sgKiAyICsgMl0pIHtcbiAgICAgICAgc29uID0gayAqIDIgKyAyO1xuICAgICAgfVxuXG4gICAgICBpZiAoQVtzb25dIDwgQVtrXSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIFtBW3Nvbl0sIEFba11dID0gW0Fba10sIEFbc29uXV07XG4gICAgICAvLyDkuqTmjaLlkI7lho3kuI7mlrDnmoTlhL/lrZDmr5TovoPlubbkuqTmjaLvvIznm7Toh7PmsqHmnInlhL/lrZDjgIJcbiAgICAgIGsgPSBzb247XG4gICAgfVxuICB9XG59XG5cbmltcG9ydCBhc3NlcnQgZnJvbSBcImFzc2VydFwiO1xue1xuICBjb25zdCBtaW5IZWFwID0gbmV3IE1pbkhlYXAoW1xuICAgIDIsXG4gICAgMyxcbiAgICAxLFxuICAgIDMsXG4gICAgNCxcbiAgICA1LFxuICAgIDEsXG4gICAgMyxcbiAgICA2LFxuICAgIDcsXG4gICAgOCxcbiAgICA5LFxuICAgIDU0LFxuICAgIDUsXG4gICAgNyxcbiAgICAzLFxuICAgIDIsXG4gICAgMSxcbiAgICAyLFxuICAgIDQxLFxuICAgIDUsXG4gICAgNyxcbiAgXSk7XG4gIGFzc2VydC5vayh2YWxpZEhlYXAobWluSGVhcC5kYXRhKSk7XG4gIG1pbkhlYXAuaW5zZXJ0KDApO1xuICBtaW5IZWFwLmluc2VydCg5OSk7XG4gIGFzc2VydC5vayh2YWxpZEhlYXAobWluSGVhcC5kYXRhKSk7XG59XG57XG4gIGNvbnN0IG1heEhlYXAgPSBuZXcgTWF4SGVhcChbXG4gICAgMixcbiAgICAzLFxuICAgIDEsXG4gICAgMyxcbiAgICA0LFxuICAgIDUsXG4gICAgMSxcbiAgICAzLFxuICAgIDYsXG4gICAgNyxcbiAgICA4LFxuICAgIDksXG4gICAgNTQsXG4gICAgNSxcbiAgICA3LFxuICAgIDMsXG4gICAgMixcbiAgICAxLFxuICAgIDIsXG4gICAgNDEsXG4gICAgNSxcbiAgICA3LFxuICBdKTtcbiAgYXNzZXJ0Lm9rKHZhbGlkSGVhcChtYXhIZWFwLmRhdGEpKTtcbiAgbWF4SGVhcC5pbnNlcnQoMCk7XG4gIG1heEhlYXAuaW5zZXJ0KDk5KTtcbiAgYXNzZXJ0Lm9rKHZhbGlkSGVhcChtYXhIZWFwLmRhdGEpKTtcbn1cbiJdfQ==