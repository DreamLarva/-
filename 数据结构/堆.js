"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const __1 = require("./\u5806\u5316");
class Heap {
    constructor(arr) {
        this.data = [];
        this.data = [...arr];
        // 初始化 堆化
        this.heapifyWithSiftDown();
    }
    /**
     * 堆的大小
     * */
    get size() {
        return this.data.length;
    }
    heapifyWithSiftDown() {
        const A = this.data;
        // 初始选择最接近叶子的一个父结点
        for (let i = Math.floor((A.length - 1) / 2); i >= 0; i--) {
            this.siftDown(A, i);
        }
        return A;
    }
    /**
     * 插入
     * 在堆的尾部添加一个新的元素，然后使用 shiftUp 来修复
     * */
    insert(value) {
        this.data.push(value);
        this.siftUp(this.data, this.size - 1);
    }
    /**
     * 移除并返回最大值（最大堆）或者最小值（最小堆）
     * 为了将这个节点删除后的空位填补上，需要将最后一个元素移到根节点的位置，
     * 然后使用 shiftDown 方法来修复堆
     * */
    remove() {
        const result = this.data.shift();
        this.heapifyWithSiftDown();
        return result;
    }
    /**
     * 移除并返回堆末尾的数据
     * */
    poll() {
        return this.data.pop();
    }
    /**
     * 移除堆中任意节点
     * 当它与子节点比较位置不时无序时使用 shiftDown()，如果与父节点比较发现无序则使用 shiftUp()
     * */
    removeAtIndex() {
    }
    /**
     * 将一个更小的值（最小堆）或者更大的值（最大堆）赋值给一个节点
     *
     * */
    replace() {
    }
}
/**
 * 最小堆(小顶堆)
 * */
class MinHeap extends Heap {
    constructor(arr) {
        super(arr);
    }
    siftUp(A, k) {
        while (k != 0) {
            // 找到父节点
            const father = Math.floor((k - 1) / 2);
            // 如果父节点 > 新加入的节点 符合 堆 结束 该轮
            if (A[k] > A[father]) {
                break;
            }
            // 反之 那么 交换两个节点
            [A[k], A[father]] = [A[father], A[k]];
            // 现在 现在新加入的节点 现在在 原来的父节点上
            k = father;
        }
    }
    siftDown(A, k) {
        while (k * 2 + 1 < A.length) {
            let son = k * 2 + 1;
            // 与其两个儿子中较小的一个比较
            if (k * 2 + 2 < A.length && A[son] > A[k * 2 + 2]) {
                son = k * 2 + 2;
            }
            // 若大于儿子，则与儿子交换。
            if (A[son] > A[k]) {
                break;
            }
            [A[son], A[k]] = [A[k], A[son]];
            // 交换后再与新的儿子比较并交换，直至没有儿子。
            k = son;
        }
    }
}
exports.MinHeap = MinHeap;
/**
 * 最大堆(大顶堆)
 * */
class MaxHeap extends Heap {
    constructor(arr) {
        super(arr);
    }
    siftUp(A, k) {
        while (k != 0) {
            // 找到父节点
            const father = Math.floor((k - 1) / 2);
            // 如果父节点 > 新加入的节点 符合 堆 结束 该轮
            if (A[k] < A[father]) {
                break;
            }
            // 反之 那么 交换两个节点
            [A[k], A[father]] = [A[father], A[k]];
            // 现在 现在新加入的节点 现在在 原来的父节点上
            k = father;
        }
    }
    siftDown(A, k) {
        while (k * 2 + 1 < A.length) {
            let son = k * 2 + 1;
            if (k * 2 + 2 < A.length && A[son] < A[k * 2 + 2]) {
                son = k * 2 + 2;
            }
            if (A[son] < A[k]) {
                break;
            }
            [A[son], A[k]] = [A[k], A[son]];
            // 交换后再与新的儿子比较并交换，直至没有儿子。
            k = son;
        }
    }
}
exports.MaxHeap = MaxHeap;
const assert_1 = __importDefault(require("assert"));
{
    const minHeap = new MinHeap([2, 3, 1, 3, 4, 5, 1, 3, 6, 7, 8, 9, 54, 5, 7, 3, 2, 1, 2, 41, 5, 7]);
    assert_1.default.ok(__1.validHeap(minHeap.data));
    minHeap.insert(0);
    minHeap.insert(99);
    assert_1.default.ok(__1.validHeap(minHeap.data));
}
{
    const maxHeap = new MaxHeap([2, 3, 1, 3, 4, 5, 1, 3, 6, 7, 8, 9, 54, 5, 7, 3, 2, 1, 2, 41, 5, 7]);
    assert_1.default.ok(__1.validHeap(maxHeap.data));
    maxHeap.insert(0);
    maxHeap.insert(99);
    assert_1.default.ok(__1.validHeap(maxHeap.data));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoi5aCGLmpzIiwic291cmNlUm9vdCI6Ii4vIiwic291cmNlcyI6WyLmlbDmja7nu5PmnoQv5aCGLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsc0NBQStCO0FBRS9CLE1BQWUsSUFBSTtJQUdmLFlBQXNCLEdBQWE7UUFGbkMsU0FBSSxHQUFhLEVBQUUsQ0FBQztRQUdoQixJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztRQUNyQixTQUFTO1FBQ1QsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7SUFDL0IsQ0FBQztJQUVEOztTQUVLO0lBQ0wsSUFBSSxJQUFJO1FBQ0osT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUM1QixDQUFDO0lBTUQsbUJBQW1CO1FBQ2YsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztRQUNwQixrQkFBa0I7UUFDbEIsS0FBSyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3RELElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1NBQ3ZCO1FBRUQsT0FBTyxDQUFDLENBQUM7SUFDYixDQUFDO0lBRUQ7OztTQUdLO0lBQ0wsTUFBTSxDQUFDLEtBQWE7UUFDaEIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUVEOzs7O1NBSUs7SUFDTCxNQUFNO1FBQ0YsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNqQyxJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztRQUMzQixPQUFPLE1BQU0sQ0FBQztJQUNsQixDQUFDO0lBRUQ7O1NBRUs7SUFDTCxJQUFJO1FBQ0EsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO0lBQzNCLENBQUM7SUFFRDs7O1NBR0s7SUFDTCxhQUFhO0lBRWIsQ0FBQztJQUVEOzs7U0FHSztJQUNMLE9BQU87SUFFUCxDQUFDO0NBQ0o7QUFFRDs7S0FFSztBQUNMLE1BQWEsT0FBUSxTQUFRLElBQUk7SUFDN0IsWUFBWSxHQUFhO1FBQ3JCLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNmLENBQUM7SUFFRCxNQUFNLENBQUMsQ0FBVyxFQUFFLENBQVM7UUFDekIsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQ1gsUUFBUTtZQUNSLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDdkMsNEJBQTRCO1lBQzVCLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsRUFBRTtnQkFDbEIsTUFBTTthQUNUO1lBQ0QsZUFBZTtZQUNmLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRXRDLDBCQUEwQjtZQUMxQixDQUFDLEdBQUcsTUFBTSxDQUFDO1NBQ2Q7SUFDTCxDQUFDO0lBRUQsUUFBUSxDQUFDLENBQVcsRUFBRSxDQUFTO1FBQzNCLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRTtZQUN6QixJQUFJLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNwQixpQkFBaUI7WUFDakIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRTtnQkFDL0MsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2FBQ25CO1lBRUQsZ0JBQWdCO1lBQ2hCLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtnQkFDZixNQUFNO2FBQ1Q7WUFDRCxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUNoQyx5QkFBeUI7WUFDekIsQ0FBQyxHQUFHLEdBQUcsQ0FBQztTQUNYO0lBQ0wsQ0FBQztDQUVKO0FBdkNELDBCQXVDQztBQUdEOztLQUVLO0FBQ0wsTUFBYSxPQUFRLFNBQVEsSUFBSTtJQUM3QixZQUFZLEdBQWE7UUFDckIsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2YsQ0FBQztJQUVELE1BQU0sQ0FBQyxDQUFXLEVBQUUsQ0FBUztRQUN6QixPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDWCxRQUFRO1lBQ1IsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUN2Qyw0QkFBNEI7WUFDNUIsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFO2dCQUNsQixNQUFNO2FBQ1Q7WUFDRCxlQUFlO1lBQ2YsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFdEMsMEJBQTBCO1lBQzFCLENBQUMsR0FBRyxNQUFNLENBQUM7U0FDZDtJQUNMLENBQUM7SUFFRCxRQUFRLENBQUMsQ0FBVyxFQUFFLENBQVM7UUFDM0IsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFO1lBQ3pCLElBQUksR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3BCLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7Z0JBQy9DLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQzthQUNuQjtZQUVELElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtnQkFDZixNQUFNO2FBQ1Q7WUFDRCxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUNoQyx5QkFBeUI7WUFDekIsQ0FBQyxHQUFHLEdBQUcsQ0FBQztTQUNYO0lBQ0wsQ0FBQztDQUNKO0FBcENELDBCQW9DQztBQUVELG9EQUE0QjtBQUM1QjtJQUNJLE1BQU0sT0FBTyxHQUFHLElBQUksT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNsRyxnQkFBTSxDQUFDLEVBQUUsQ0FBQyxhQUFTLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDbkMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNsQixPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ25CLGdCQUFNLENBQUMsRUFBRSxDQUFDLGFBQVMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztDQUN0QztBQUNEO0lBQ0ksTUFBTSxPQUFPLEdBQUcsSUFBSSxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2xHLGdCQUFNLENBQUMsRUFBRSxDQUFDLGFBQVMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUNuQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2xCLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDbkIsZ0JBQU0sQ0FBQyxFQUFFLENBQUMsYUFBUyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0NBQ3RDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHt2YWxpZEhlYXB9IGZyb20gJy4v5aCG5YyWJztcclxuXHJcbmFic3RyYWN0IGNsYXNzIEhlYXAge1xyXG4gICAgZGF0YTogbnVtYmVyW10gPSBbXTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0b3IoYXJyOiBudW1iZXJbXSkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IFsuLi5hcnJdO1xyXG4gICAgICAgIC8vIOWIneWni+WMliDloIbljJZcclxuICAgICAgICB0aGlzLmhlYXBpZnlXaXRoU2lmdERvd24oKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWghueahOWkp+Wwj1xyXG4gICAgICogKi9cclxuICAgIGdldCBzaXplKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIGFic3RyYWN0IHNpZnREb3duKEE6IG51bWJlcltdLCBrOiBudW1iZXIpOiB2b2lkO1xyXG5cclxuICAgIGFic3RyYWN0IHNpZnRVcChBOiBudW1iZXJbXSwgazogbnVtYmVyKTogdm9pZFxyXG5cclxuICAgIGhlYXBpZnlXaXRoU2lmdERvd24oKSB7XHJcbiAgICAgICAgY29uc3QgQSA9IHRoaXMuZGF0YTtcclxuICAgICAgICAvLyDliJ3lp4vpgInmi6nmnIDmjqXov5Hlj7blrZDnmoTkuIDkuKrniLbnu5PngrlcclxuICAgICAgICBmb3IgKGxldCBpID0gTWF0aC5mbG9vcigoQS5sZW5ndGggLSAxKSAvIDIpOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICB0aGlzLnNpZnREb3duKEEsIGkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIEE7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmj5LlhaVcclxuICAgICAqIOWcqOWghueahOWwvumDqOa3u+WKoOS4gOS4quaWsOeahOWFg+e0oO+8jOeEtuWQjuS9v+eUqCBzaGlmdFVwIOadpeS/ruWkjVxyXG4gICAgICogKi9cclxuICAgIGluc2VydCh2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5kYXRhLnB1c2godmFsdWUpO1xyXG4gICAgICAgIHRoaXMuc2lmdFVwKHRoaXMuZGF0YSwgdGhpcy5zaXplIC0gMSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnp7vpmaTlubbov5Tlm57mnIDlpKflgLzvvIjmnIDlpKfloIbvvInmiJbogIXmnIDlsI/lgLzvvIjmnIDlsI/loIbvvIlcclxuICAgICAqIOS4uuS6huWwhui/meS4quiKgueCueWIoOmZpOWQjueahOepuuS9jeWhq+ihpeS4iu+8jOmcgOimgeWwhuacgOWQjuS4gOS4quWFg+e0oOenu+WIsOagueiKgueCueeahOS9jee9ru+8jFxyXG4gICAgICog54S25ZCO5L2/55SoIHNoaWZ0RG93biDmlrnms5XmnaXkv67lpI3loIZcclxuICAgICAqICovXHJcbiAgICByZW1vdmUoKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5kYXRhLnNoaWZ0KCk7XHJcbiAgICAgICAgdGhpcy5oZWFwaWZ5V2l0aFNpZnREb3duKCk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOenu+mZpOW5tui/lOWbnuWghuacq+WwvueahOaVsOaNrlxyXG4gICAgICogKi9cclxuICAgIHBvbGwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5wb3AoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOenu+mZpOWghuS4reS7u+aEj+iKgueCuVxyXG4gICAgICog5b2T5a6D5LiO5a2Q6IqC54K55q+U6L6D5L2N572u5LiN5pe25peg5bqP5pe25L2/55SoIHNoaWZ0RG93bigp77yM5aaC5p6c5LiO54i26IqC54K55q+U6L6D5Y+R546w5peg5bqP5YiZ5L2/55SoIHNoaWZ0VXAoKVxyXG4gICAgICogKi9cclxuICAgIHJlbW92ZUF0SW5kZXgoKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5bCG5LiA5Liq5pu05bCP55qE5YC877yI5pyA5bCP5aCG77yJ5oiW6ICF5pu05aSn55qE5YC877yI5pyA5aSn5aCG77yJ6LWL5YC857uZ5LiA5Liq6IqC54K5XHJcbiAgICAgKlxyXG4gICAgICogKi9cclxuICAgIHJlcGxhY2UoKSB7XHJcblxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICog5pyA5bCP5aCGKOWwj+mhtuWghilcclxuICogKi9cclxuZXhwb3J0IGNsYXNzIE1pbkhlYXAgZXh0ZW5kcyBIZWFwIHtcclxuICAgIGNvbnN0cnVjdG9yKGFycjogbnVtYmVyW10pIHtcclxuICAgICAgICBzdXBlcihhcnIpO1xyXG4gICAgfVxyXG5cclxuICAgIHNpZnRVcChBOiBudW1iZXJbXSwgazogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgd2hpbGUgKGsgIT0gMCkge1xyXG4gICAgICAgICAgICAvLyDmib7liLDniLboioLngrlcclxuICAgICAgICAgICAgY29uc3QgZmF0aGVyID0gTWF0aC5mbG9vcigoayAtIDEpIC8gMik7XHJcbiAgICAgICAgICAgIC8vIOWmguaenOeItuiKgueCuSA+IOaWsOWKoOWFpeeahOiKgueCuSDnrKblkIgg5aCGIOe7k+adnyDor6Xova5cclxuICAgICAgICAgICAgaWYgKEFba10gPiBBW2ZhdGhlcl0pIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIOWPjeS5iyDpgqPkuYgg5Lqk5o2i5Lik5Liq6IqC54K5XHJcbiAgICAgICAgICAgIFtBW2tdLCBBW2ZhdGhlcl1dID0gW0FbZmF0aGVyXSwgQVtrXV07XHJcblxyXG4gICAgICAgICAgICAvLyDnjrDlnKgg546w5Zyo5paw5Yqg5YWl55qE6IqC54K5IOeOsOWcqOWcqCDljp/mnaXnmoTniLboioLngrnkuIpcclxuICAgICAgICAgICAgayA9IGZhdGhlcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2lmdERvd24oQTogbnVtYmVyW10sIGs6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHdoaWxlIChrICogMiArIDEgPCBBLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBsZXQgc29uID0gayAqIDIgKyAxO1xyXG4gICAgICAgICAgICAvLyDkuI7lhbbkuKTkuKrlhL/lrZDkuK3ovoPlsI/nmoTkuIDkuKrmr5TovoNcclxuICAgICAgICAgICAgaWYgKGsgKiAyICsgMiA8IEEubGVuZ3RoICYmIEFbc29uXSA+IEFbayAqIDIgKyAyXSkge1xyXG4gICAgICAgICAgICAgICAgc29uID0gayAqIDIgKyAyO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyDoi6XlpKfkuo7lhL/lrZDvvIzliJnkuI7lhL/lrZDkuqTmjaLjgIJcclxuICAgICAgICAgICAgaWYgKEFbc29uXSA+IEFba10pIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFtBW3Nvbl0sIEFba11dID0gW0Fba10sIEFbc29uXV07XHJcbiAgICAgICAgICAgIC8vIOS6pOaNouWQjuWGjeS4juaWsOeahOWEv+WtkOavlOi+g+W5tuS6pOaNou+8jOebtOiHs+ayoeacieWEv+WtkOOAglxyXG4gICAgICAgICAgICBrID0gc29uO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXHJcblxyXG4vKipcclxuICog5pyA5aSn5aCGKOWkp+mhtuWghilcclxuICogKi9cclxuZXhwb3J0IGNsYXNzIE1heEhlYXAgZXh0ZW5kcyBIZWFwIHtcclxuICAgIGNvbnN0cnVjdG9yKGFycjogbnVtYmVyW10pIHtcclxuICAgICAgICBzdXBlcihhcnIpO1xyXG4gICAgfVxyXG5cclxuICAgIHNpZnRVcChBOiBudW1iZXJbXSwgazogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgd2hpbGUgKGsgIT0gMCkge1xyXG4gICAgICAgICAgICAvLyDmib7liLDniLboioLngrlcclxuICAgICAgICAgICAgY29uc3QgZmF0aGVyID0gTWF0aC5mbG9vcigoayAtIDEpIC8gMik7XHJcbiAgICAgICAgICAgIC8vIOWmguaenOeItuiKgueCuSA+IOaWsOWKoOWFpeeahOiKgueCuSDnrKblkIgg5aCGIOe7k+adnyDor6Xova5cclxuICAgICAgICAgICAgaWYgKEFba10gPCBBW2ZhdGhlcl0pIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIOWPjeS5iyDpgqPkuYgg5Lqk5o2i5Lik5Liq6IqC54K5XHJcbiAgICAgICAgICAgIFtBW2tdLCBBW2ZhdGhlcl1dID0gW0FbZmF0aGVyXSwgQVtrXV07XHJcblxyXG4gICAgICAgICAgICAvLyDnjrDlnKgg546w5Zyo5paw5Yqg5YWl55qE6IqC54K5IOeOsOWcqOWcqCDljp/mnaXnmoTniLboioLngrnkuIpcclxuICAgICAgICAgICAgayA9IGZhdGhlcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2lmdERvd24oQTogbnVtYmVyW10sIGs6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHdoaWxlIChrICogMiArIDEgPCBBLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBsZXQgc29uID0gayAqIDIgKyAxO1xyXG4gICAgICAgICAgICBpZiAoayAqIDIgKyAyIDwgQS5sZW5ndGggJiYgQVtzb25dIDwgQVtrICogMiArIDJdKSB7XHJcbiAgICAgICAgICAgICAgICBzb24gPSBrICogMiArIDI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChBW3Nvbl0gPCBBW2tdKSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBbQVtzb25dLCBBW2tdXSA9IFtBW2tdLCBBW3Nvbl1dO1xyXG4gICAgICAgICAgICAvLyDkuqTmjaLlkI7lho3kuI7mlrDnmoTlhL/lrZDmr5TovoPlubbkuqTmjaLvvIznm7Toh7PmsqHmnInlhL/lrZDjgIJcclxuICAgICAgICAgICAgayA9IHNvbjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmltcG9ydCBhc3NlcnQgZnJvbSAnYXNzZXJ0Jztcclxue1xyXG4gICAgY29uc3QgbWluSGVhcCA9IG5ldyBNaW5IZWFwKFsyLCAzLCAxLCAzLCA0LCA1LCAxLCAzLCA2LCA3LCA4LCA5LCA1NCwgNSwgNywgMywgMiwgMSwgMiwgNDEsIDUsIDddKTtcclxuICAgIGFzc2VydC5vayh2YWxpZEhlYXAobWluSGVhcC5kYXRhKSk7XHJcbiAgICBtaW5IZWFwLmluc2VydCgwKTtcclxuICAgIG1pbkhlYXAuaW5zZXJ0KDk5KTtcclxuICAgIGFzc2VydC5vayh2YWxpZEhlYXAobWluSGVhcC5kYXRhKSk7XHJcbn1cclxue1xyXG4gICAgY29uc3QgbWF4SGVhcCA9IG5ldyBNYXhIZWFwKFsyLCAzLCAxLCAzLCA0LCA1LCAxLCAzLCA2LCA3LCA4LCA5LCA1NCwgNSwgNywgMywgMiwgMSwgMiwgNDEsIDUsIDddKTtcclxuICAgIGFzc2VydC5vayh2YWxpZEhlYXAobWF4SGVhcC5kYXRhKSk7XHJcbiAgICBtYXhIZWFwLmluc2VydCgwKTtcclxuICAgIG1heEhlYXAuaW5zZXJ0KDk5KTtcclxuICAgIGFzc2VydC5vayh2YWxpZEhlYXAobWF4SGVhcC5kYXRhKSk7XHJcbn1cclxuXHJcbiJdfQ==