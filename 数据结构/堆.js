"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const __1 = require("./\u5806\u5316");
class Heap {
    constructor(arr) {
        this.data = [];
        this.data = [...arr];
        // 初始化 堆化
        this.heapifyWithSiftDown();
    }
    /**
     * 堆的大小
     * */
    get size() {
        return this.data.length;
    }
    heapifyWithSiftDown() {
        const A = this.data;
        // 初始选择最接近叶子的一个父结点
        for (let i = Math.floor((A.length - 1) / 2); i >= 0; i--) {
            this.siftDown(A, i);
        }
        return A;
    }
    /**
     * 插入
     * 在堆的尾部添加一个新的元素，然后使用 shiftUp 来修复
     * */
    insert(value) {
        this.data.push(value);
        this.siftUp(this.data, this.size - 1);
    }
    /**
     * 移除并返回最大值（最大堆）或者最小值（最小堆）
     * 为了将这个节点删除后的空位填补上，需要将最后一个元素移到根节点的位置，
     * 然后使用 shiftDown 方法来修复堆
     * */
    remove() {
        const result = this.data.shift();
        this.heapifyWithSiftDown();
        return result;
    }
    /**
     * 移除并返回堆末尾的数据
     * */
    poll() {
        return this.data.pop();
    }
    /**
     * 移除堆中任意节点
     * 当它与子节点比较位置不时无序时使用 shiftDown()，如果与父节点比较发现无序则使用 shiftUp()
     * */
    removeAtIndex() {
    }
    /**
     * 将一个更小的值（最小堆）或者更大的值（最大堆）赋值给一个节点
     *
     * */
    replace() {
    }
}
/**
 * 最小堆(小顶堆)
 * */
class MinHeap extends Heap {
    constructor(arr) {
        super(arr);
    }
    siftUp(A, k) {
        while (k != 0) {
            // 找到父节点
            const father = Math.floor((k - 1) / 2);
            // 如果父节点 > 新加入的节点 符合 堆 结束 该轮
            if (A[k] > A[father]) {
                break;
            }
            // 反之 那么 交换两个节点
            [A[k], A[father]] = [A[father], A[k]];
            // 现在 现在新加入的节点 现在在 原来的父节点上
            k = father;
        }
    }
    siftDown(A, k) {
        while (k * 2 + 1 < A.length) {
            let son = k * 2 + 1;
            // 与其两个儿子中较小的一个比较
            if (k * 2 + 2 < A.length && A[son] > A[k * 2 + 2]) {
                son = k * 2 + 2;
            }
            // 若大于儿子，则与儿子交换。
            if (A[son] > A[k]) {
                break;
            }
            [A[son], A[k]] = [A[k], A[son]];
            // 交换后再与新的儿子比较并交换，直至没有儿子。
            k = son;
        }
    }
}
exports.MinHeap = MinHeap;
/**
 * 最大堆(大顶堆)
 * */
class MaxHeap extends Heap {
    constructor(arr) {
        super(arr);
    }
    siftUp(A, k) {
        while (k != 0) {
            // 找到父节点
            const father = Math.floor((k - 1) / 2);
            // 如果父节点 > 新加入的节点 符合 堆 结束 该轮
            if (A[k] < A[father]) {
                break;
            }
            // 反之 那么 交换两个节点
            [A[k], A[father]] = [A[father], A[k]];
            // 现在 现在新加入的节点 现在在 原来的父节点上
            k = father;
        }
    }
    siftDown(A, k) {
        while (k * 2 + 1 < A.length) {
            let son = k * 2 + 1;
            if (k * 2 + 2 < A.length && A[son] < A[k * 2 + 2]) {
                son = k * 2 + 2;
            }
            if (A[son] < A[k]) {
                break;
            }
            [A[son], A[k]] = [A[k], A[son]];
            // 交换后再与新的儿子比较并交换，直至没有儿子。
            k = son;
        }
    }
}
exports.MaxHeap = MaxHeap;
const assert_1 = __importDefault(require("assert"));
{
    const minHeap = new MinHeap([2, 3, 1, 3, 4, 5, 1, 3, 6, 7, 8, 9, 54, 5, 7, 3, 2, 1, 2, 41, 5, 7]);
    assert_1.default.ok(__1.validHeap(minHeap.data));
    minHeap.insert(0);
    minHeap.insert(99);
    assert_1.default.ok(__1.validHeap(minHeap.data));
}
{
    const maxHeap = new MaxHeap([2, 3, 1, 3, 4, 5, 1, 3, 6, 7, 8, 9, 54, 5, 7, 3, 2, 1, 2, 41, 5, 7]);
    assert_1.default.ok(__1.validHeap(maxHeap.data));
    maxHeap.insert(0);
    maxHeap.insert(99);
    assert_1.default.ok(__1.validHeap(maxHeap.data));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoi5aCGLmpzIiwic291cmNlUm9vdCI6Ii4vIiwic291cmNlcyI6WyLmlbDmja7nu5PmnoQv5aCGLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsc0NBQStCO0FBRS9CLE1BQWUsSUFBSTtJQUdmLFlBQXNCLEdBQWE7UUFGbkMsU0FBSSxHQUFhLEVBQUUsQ0FBQztRQUdoQixJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztRQUNyQixTQUFTO1FBQ1QsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7SUFDL0IsQ0FBQztJQUVEOztTQUVLO0lBQ0wsSUFBSSxJQUFJO1FBQ0osT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUM1QixDQUFDO0lBTUQsbUJBQW1CO1FBQ2YsTUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztRQUNwQixrQkFBa0I7UUFDbEIsS0FBSyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3RELElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1NBQ3ZCO1FBRUQsT0FBTyxDQUFDLENBQUM7SUFDYixDQUFDO0lBRUQ7OztTQUdLO0lBQ0wsTUFBTSxDQUFDLEtBQWE7UUFDaEIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDMUMsQ0FBQztJQUVEOzs7O1NBSUs7SUFDTCxNQUFNO1FBQ0YsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FB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QUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNsRyxnQkFBTSxDQUFDLEVBQUUsQ0FBQyxhQUFTLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDbkMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNsQixPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ25CLGdCQUFNLENBQUMsRUFBRSxDQUFDLGFBQVMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztDQUN0QztBQUNEO0lBQ0ksTUFBTSxPQUFPLEdBQUcsSUFBSSxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2xHLGdCQUFNLENBQUMsRUFBRSxDQUFDLGFBQVMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUNuQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2xCLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDbkIsZ0JBQU0sQ0FBQyxFQUFFLENBQUMsYUFBUyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0NBQ3RDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHt2YWxpZEhlYXB9IGZyb20gJy4v5aCG5YyWJztcblxuYWJzdHJhY3QgY2xhc3MgSGVhcCB7XG4gICAgZGF0YTogbnVtYmVyW10gPSBbXTtcblxuICAgIHByb3RlY3RlZCBjb25zdHJ1Y3RvcihhcnI6IG51bWJlcltdKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IFsuLi5hcnJdO1xuICAgICAgICAvLyDliJ3lp4vljJYg5aCG5YyWXG4gICAgICAgIHRoaXMuaGVhcGlmeVdpdGhTaWZ0RG93bigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOWghueahOWkp+Wwj1xuICAgICAqICovXG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEubGVuZ3RoO1xuICAgIH1cblxuICAgIGFic3RyYWN0IHNpZnREb3duKEE6IG51bWJlcltdLCBrOiBudW1iZXIpOiB2b2lkO1xuXG4gICAgYWJzdHJhY3Qgc2lmdFVwKEE6IG51bWJlcltdLCBrOiBudW1iZXIpOiB2b2lkXG5cbiAgICBoZWFwaWZ5V2l0aFNpZnREb3duKCkge1xuICAgICAgICBjb25zdCBBID0gdGhpcy5kYXRhO1xuICAgICAgICAvLyDliJ3lp4vpgInmi6nmnIDmjqXov5Hlj7blrZDnmoTkuIDkuKrniLbnu5PngrlcbiAgICAgICAgZm9yIChsZXQgaSA9IE1hdGguZmxvb3IoKEEubGVuZ3RoIC0gMSkgLyAyKTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIHRoaXMuc2lmdERvd24oQSwgaSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gQTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDmj5LlhaVcbiAgICAgKiDlnKjloIbnmoTlsL7pg6jmt7vliqDkuIDkuKrmlrDnmoTlhYPntKDvvIznhLblkI7kvb/nlKggc2hpZnRVcCDmnaXkv67lpI1cbiAgICAgKiAqL1xuICAgIGluc2VydCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZGF0YS5wdXNoKHZhbHVlKTtcbiAgICAgICAgdGhpcy5zaWZ0VXAodGhpcy5kYXRhLCB0aGlzLnNpemUgLSAxKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDnp7vpmaTlubbov5Tlm57mnIDlpKflgLzvvIjmnIDlpKfloIbvvInmiJbogIXmnIDlsI/lgLzvvIjmnIDlsI/loIbvvIlcbiAgICAgKiDkuLrkuoblsIbov5nkuKroioLngrnliKDpmaTlkI7nmoTnqbrkvY3loavooaXkuIrvvIzpnIDopoHlsIbmnIDlkI7kuIDkuKrlhYPntKDnp7vliLDmoLnoioLngrnnmoTkvY3nva7vvIxcbiAgICAgKiDnhLblkI7kvb/nlKggc2hpZnREb3duIOaWueazleadpeS/ruWkjeWghlxuICAgICAqICovXG4gICAgcmVtb3ZlKCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmRhdGEuc2hpZnQoKTtcbiAgICAgICAgdGhpcy5oZWFwaWZ5V2l0aFNpZnREb3duKCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog56e76Zmk5bm26L+U5Zue5aCG5pyr5bC+55qE5pWw5o2uXG4gICAgICogKi9cbiAgICBwb2xsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnBvcCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOenu+mZpOWghuS4reS7u+aEj+iKgueCuVxuICAgICAqIOW9k+Wug+S4juWtkOiKgueCueavlOi+g+S9jee9ruS4jeaXtuaXoOW6j+aXtuS9v+eUqCBzaGlmdERvd24oKe+8jOWmguaenOS4jueItuiKgueCueavlOi+g+WPkeeOsOaXoOW6j+WImeS9v+eUqCBzaGlmdFVwKClcbiAgICAgKiAqL1xuICAgIHJlbW92ZUF0SW5kZXgoKSB7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDlsIbkuIDkuKrmm7TlsI/nmoTlgLzvvIjmnIDlsI/loIbvvInmiJbogIXmm7TlpKfnmoTlgLzvvIjmnIDlpKfloIbvvInotYvlgLznu5nkuIDkuKroioLngrlcbiAgICAgKlxuICAgICAqICovXG4gICAgcmVwbGFjZSgpIHtcblxuICAgIH1cbn1cblxuLyoqXG4gKiDmnIDlsI/loIYo5bCP6aG25aCGKVxuICogKi9cbmV4cG9ydCBjbGFzcyBNaW5IZWFwIGV4dGVuZHMgSGVhcCB7XG4gICAgY29uc3RydWN0b3IoYXJyOiBudW1iZXJbXSkge1xuICAgICAgICBzdXBlcihhcnIpO1xuICAgIH1cblxuICAgIHNpZnRVcChBOiBudW1iZXJbXSwgazogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHdoaWxlIChrICE9IDApIHtcbiAgICAgICAgICAgIC8vIOaJvuWIsOeItuiKgueCuVxuICAgICAgICAgICAgY29uc3QgZmF0aGVyID0gTWF0aC5mbG9vcigoayAtIDEpIC8gMik7XG4gICAgICAgICAgICAvLyDlpoLmnpzniLboioLngrkgPiDmlrDliqDlhaXnmoToioLngrkg56ym5ZCIIOWghiDnu5PmnZ8g6K+l6L2uXG4gICAgICAgICAgICBpZiAoQVtrXSA+IEFbZmF0aGVyXSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8g5Y+N5LmLIOmCo+S5iCDkuqTmjaLkuKTkuKroioLngrlcbiAgICAgICAgICAgIFtBW2tdLCBBW2ZhdGhlcl1dID0gW0FbZmF0aGVyXSwgQVtrXV07XG5cbiAgICAgICAgICAgIC8vIOeOsOWcqCDnjrDlnKjmlrDliqDlhaXnmoToioLngrkg546w5Zyo5ZyoIOWOn+adpeeahOeItuiKgueCueS4ilxuICAgICAgICAgICAgayA9IGZhdGhlcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNpZnREb3duKEE6IG51bWJlcltdLCBrOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgd2hpbGUgKGsgKiAyICsgMSA8IEEubGVuZ3RoKSB7XG4gICAgICAgICAgICBsZXQgc29uID0gayAqIDIgKyAxO1xuICAgICAgICAgICAgLy8g5LiO5YW25Lik5Liq5YS/5a2Q5Lit6L6D5bCP55qE5LiA5Liq5q+U6L6DXG4gICAgICAgICAgICBpZiAoayAqIDIgKyAyIDwgQS5sZW5ndGggJiYgQVtzb25dID4gQVtrICogMiArIDJdKSB7XG4gICAgICAgICAgICAgICAgc29uID0gayAqIDIgKyAyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDoi6XlpKfkuo7lhL/lrZDvvIzliJnkuI7lhL/lrZDkuqTmjaLjgIJcbiAgICAgICAgICAgIGlmIChBW3Nvbl0gPiBBW2tdKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBbQVtzb25dLCBBW2tdXSA9IFtBW2tdLCBBW3Nvbl1dO1xuICAgICAgICAgICAgLy8g5Lqk5o2i5ZCO5YaN5LiO5paw55qE5YS/5a2Q5q+U6L6D5bm25Lqk5o2i77yM55u06Iez5rKh5pyJ5YS/5a2Q44CCXG4gICAgICAgICAgICBrID0gc29uO1xuICAgICAgICB9XG4gICAgfVxuXG59XG5cblxuLyoqXG4gKiDmnIDlpKfloIYo5aSn6aG25aCGKVxuICogKi9cbmV4cG9ydCBjbGFzcyBNYXhIZWFwIGV4dGVuZHMgSGVhcCB7XG4gICAgY29uc3RydWN0b3IoYXJyOiBudW1iZXJbXSkge1xuICAgICAgICBzdXBlcihhcnIpO1xuICAgIH1cblxuICAgIHNpZnRVcChBOiBudW1iZXJbXSwgazogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHdoaWxlIChrICE9IDApIHtcbiAgICAgICAgICAgIC8vIOaJvuWIsOeItuiKgueCuVxuICAgICAgICAgICAgY29uc3QgZmF0aGVyID0gTWF0aC5mbG9vcigoayAtIDEpIC8gMik7XG4gICAgICAgICAgICAvLyDlpoLmnpzniLboioLngrkgPiDmlrDliqDlhaXnmoToioLngrkg56ym5ZCIIOWghiDnu5PmnZ8g6K+l6L2uXG4gICAgICAgICAgICBpZiAoQVtrXSA8IEFbZmF0aGVyXSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8g5Y+N5LmLIOmCo+S5iCDkuqTmjaLkuKTkuKroioLngrlcbiAgICAgICAgICAgIFtBW2tdLCBBW2ZhdGhlcl1dID0gW0FbZmF0aGVyXSwgQVtrXV07XG5cbiAgICAgICAgICAgIC8vIOeOsOWcqCDnjrDlnKjmlrDliqDlhaXnmoToioLngrkg546w5Zyo5ZyoIOWOn+adpeeahOeItuiKgueCueS4ilxuICAgICAgICAgICAgayA9IGZhdGhlcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNpZnREb3duKEE6IG51bWJlcltdLCBrOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgd2hpbGUgKGsgKiAyICsgMSA8IEEubGVuZ3RoKSB7XG4gICAgICAgICAgICBsZXQgc29uID0gayAqIDIgKyAxO1xuICAgICAgICAgICAgaWYgKGsgKiAyICsgMiA8IEEubGVuZ3RoICYmIEFbc29uXSA8IEFbayAqIDIgKyAyXSkge1xuICAgICAgICAgICAgICAgIHNvbiA9IGsgKiAyICsgMjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKEFbc29uXSA8IEFba10pIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFtBW3Nvbl0sIEFba11dID0gW0Fba10sIEFbc29uXV07XG4gICAgICAgICAgICAvLyDkuqTmjaLlkI7lho3kuI7mlrDnmoTlhL/lrZDmr5TovoPlubbkuqTmjaLvvIznm7Toh7PmsqHmnInlhL/lrZDjgIJcbiAgICAgICAgICAgIGsgPSBzb247XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmltcG9ydCBhc3NlcnQgZnJvbSAnYXNzZXJ0JztcbntcbiAgICBjb25zdCBtaW5IZWFwID0gbmV3IE1pbkhlYXAoWzIsIDMsIDEsIDMsIDQsIDUsIDEsIDMsIDYsIDcsIDgsIDksIDU0LCA1LCA3LCAzLCAyLCAxLCAyLCA0MSwgNSwgN10pO1xuICAgIGFzc2VydC5vayh2YWxpZEhlYXAobWluSGVhcC5kYXRhKSk7XG4gICAgbWluSGVhcC5pbnNlcnQoMCk7XG4gICAgbWluSGVhcC5pbnNlcnQoOTkpO1xuICAgIGFzc2VydC5vayh2YWxpZEhlYXAobWluSGVhcC5kYXRhKSk7XG59XG57XG4gICAgY29uc3QgbWF4SGVhcCA9IG5ldyBNYXhIZWFwKFsyLCAzLCAxLCAzLCA0LCA1LCAxLCAzLCA2LCA3LCA4LCA5LCA1NCwgNSwgNywgMywgMiwgMSwgMiwgNDEsIDUsIDddKTtcbiAgICBhc3NlcnQub2sodmFsaWRIZWFwKG1heEhlYXAuZGF0YSkpO1xuICAgIG1heEhlYXAuaW5zZXJ0KDApO1xuICAgIG1heEhlYXAuaW5zZXJ0KDk5KTtcbiAgICBhc3NlcnQub2sodmFsaWRIZWFwKG1heEhlYXAuZGF0YSkpO1xufVxuXG4iXX0=