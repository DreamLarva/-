"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.MaxHeap = exports.MinHeap = void 0;
const __1 = require("./\u5806\u5316");
class Heap {
    constructor(arr) {
        this.data = [];
        this.data = [...arr];
        // 初始化 堆化
        this.heapifyWithSiftDown();
    }
    /**
     * 堆的大小
     * */
    get size() {
        return this.data.length;
    }
    heapifyWithSiftDown() {
        const A = this.data;
        // 初始选择最接近叶子的一个父结点
        for (let i = Math.floor((A.length - 1) / 2); i >= 0; i--) {
            this.siftDown(A, i);
        }
        return A;
    }
    /**
     * 插入
     * 在堆的尾部添加一个新的元素，然后使用 shiftUp 来修复
     * */
    insert(value) {
        this.data.push(value);
        this.siftUp(this.data, this.size - 1);
    }
    /**
     * 移除并返回最大值（最大堆）或者最小值（最小堆）
     * 为了将这个节点删除后的空位填补上，需要将最后一个元素移到根节点的位置，
     * 然后使用 shiftDown 方法来修复堆
     * */
    remove() {
        const result = this.data.shift();
        this.heapifyWithSiftDown();
        return result;
    }
    /**
     * 移除并返回堆末尾的数据
     * */
    poll() {
        return this.data.pop();
    }
    /**
     * 移除堆中任意节点
     * 当它与子节点比较位置不时无序时使用 shiftDown()，如果与父节点比较发现无序则使用 shiftUp()
     * */
    removeAtIndex() {
    }
    /**
     * 将一个更小的值（最小堆）或者更大的值（最大堆）赋值给一个节点
     *
     * */
    replace() {
    }
}
/**
 * 最小堆(小顶堆)
 * */
class MinHeap extends Heap {
    constructor(arr) {
        super(arr);
    }
    siftUp(A, k) {
        while (k != 0) {
            // 找到父节点
            const father = Math.floor((k - 1) / 2);
            // 如果父节点 > 新加入的节点 符合 堆 结束 该轮
            if (A[k] > A[father]) {
                break;
            }
            // 反之 那么 交换两个节点
            [A[k], A[father]] = [A[father], A[k]];
            // 现在 现在新加入的节点 现在在 原来的父节点上
            k = father;
        }
    }
    siftDown(A, k) {
        while (k * 2 + 1 < A.length) {
            let son = k * 2 + 1;
            // 与其两个儿子中较小的一个比较
            if (k * 2 + 2 < A.length && A[son] > A[k * 2 + 2]) {
                son = k * 2 + 2;
            }
            // 若大于儿子，则与儿子交换。
            if (A[son] > A[k]) {
                break;
            }
            [A[son], A[k]] = [A[k], A[son]];
            // 交换后再与新的儿子比较并交换，直至没有儿子。
            k = son;
        }
    }
}
exports.MinHeap = MinHeap;
/**
 * 最大堆(大顶堆)
 * */
class MaxHeap extends Heap {
    constructor(arr) {
        super(arr);
    }
    siftUp(A, k) {
        while (k != 0) {
            // 找到父节点
            const father = Math.floor((k - 1) / 2);
            // 如果父节点 > 新加入的节点 符合 堆 结束 该轮
            if (A[k] < A[father]) {
                break;
            }
            // 反之 那么 交换两个节点
            [A[k], A[father]] = [A[father], A[k]];
            // 现在 现在新加入的节点 现在在 原来的父节点上
            k = father;
        }
    }
    siftDown(A, k) {
        while (k * 2 + 1 < A.length) {
            let son = k * 2 + 1;
            if (k * 2 + 2 < A.length && A[son] < A[k * 2 + 2]) {
                son = k * 2 + 2;
            }
            if (A[son] < A[k]) {
                break;
            }
            [A[son], A[k]] = [A[k], A[son]];
            // 交换后再与新的儿子比较并交换，直至没有儿子。
            k = son;
        }
    }
}
exports.MaxHeap = MaxHeap;
const assert_1 = __importDefault(require("assert"));
{
    const minHeap = new MinHeap([2, 3, 1, 3, 4, 5, 1, 3, 6, 7, 8, 9, 54, 5, 7, 3, 2, 1, 2, 41, 5, 7]);
    assert_1.default.ok(__1.validHeap(minHeap.data));
    minHeap.insert(0);
    minHeap.insert(99);
    assert_1.default.ok(__1.validHeap(minHeap.data));
}
{
    const maxHeap = new MaxHeap([2, 3, 1, 3, 4, 5, 1, 3, 6, 7, 8, 9, 54, 5, 7, 3, 2, 1, 2, 41, 5, 7]);
    assert_1.default.ok(__1.validHeap(maxHeap.data));
    maxHeap.insert(0);
    maxHeap.insert(99);
    assert_1.default.ok(__1.validHeap(maxHeap.data));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoi5aCGLmpzIiwic291cmNlUm9vdCI6Ii4vIiwic291cmNlcyI6WyLmlbDmja7nu5PmnoQv5aCGLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLHNDQUErQjtBQUUvQixNQUFlLElBQUk7SUFHZixZQUFzQixHQUFhO1FBRm5DLFNBQUksR0FBYSxFQUFFLENBQUM7UUFHaEIsSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFDckIsU0FBUztRQUNULElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO0lBQy9CLENBQUM7SUFFRDs7U0FFSztJQUNMLElBQUksSUFBSTtRQUNKLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDNUIsQ0FBQztJQU1ELG1CQUFtQjtRQUNmLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDcEIsa0JBQWtCO1FBQ2xCLEtBQUssSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUN0RCxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztTQUN2QjtRQUVELE9BQU8sQ0FBQyxDQUFDO0lBQ2IsQ0FBQztJQUVEOzs7U0FHSztJQUNMLE1BQU0sQ0FBQyxLQUFhO1FBQ2hCLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3RCLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQzFDLENBQUM7SUFFRDs7OztTQUlLO0lBQ0wsTUFBTTtRQUNGLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENB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QUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbEcsZ0JBQU0sQ0FBQyxFQUFFLENBQUMsYUFBUyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ25DLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDbEIsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNuQixnQkFBTSxDQUFDLEVBQUUsQ0FBQyxhQUFTLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7Q0FDdEM7QUFDRDtJQUNJLE1BQU0sT0FBTyxHQUFHLElBQUksT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNsRyxnQkFBTSxDQUFDLEVBQUUsQ0FBQyxhQUFTLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDbkMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNsQixPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ25CLGdCQUFNLENBQUMsRUFBRSxDQUFDLGFBQVMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztDQUN0QyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7dmFsaWRIZWFwfSBmcm9tICcuL+WghuWMlic7XG5cbmFic3RyYWN0IGNsYXNzIEhlYXAge1xuICAgIGRhdGE6IG51bWJlcltdID0gW107XG5cbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0b3IoYXJyOiBudW1iZXJbXSkge1xuICAgICAgICB0aGlzLmRhdGEgPSBbLi4uYXJyXTtcbiAgICAgICAgLy8g5Yid5aeL5YyWIOWghuWMllxuICAgICAgICB0aGlzLmhlYXBpZnlXaXRoU2lmdERvd24oKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDloIbnmoTlpKflsI9cbiAgICAgKiAqL1xuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmxlbmd0aDtcbiAgICB9XG5cbiAgICBhYnN0cmFjdCBzaWZ0RG93bihBOiBudW1iZXJbXSwgazogbnVtYmVyKTogdm9pZDtcblxuICAgIGFic3RyYWN0IHNpZnRVcChBOiBudW1iZXJbXSwgazogbnVtYmVyKTogdm9pZFxuXG4gICAgaGVhcGlmeVdpdGhTaWZ0RG93bigpIHtcbiAgICAgICAgY29uc3QgQSA9IHRoaXMuZGF0YTtcbiAgICAgICAgLy8g5Yid5aeL6YCJ5oup5pyA5o6l6L+R5Y+25a2Q55qE5LiA5Liq54i257uT54K5XG4gICAgICAgIGZvciAobGV0IGkgPSBNYXRoLmZsb29yKChBLmxlbmd0aCAtIDEpIC8gMik7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICB0aGlzLnNpZnREb3duKEEsIGkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIEE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5o+S5YWlXG4gICAgICog5Zyo5aCG55qE5bC+6YOo5re75Yqg5LiA5Liq5paw55qE5YWD57Sg77yM54S25ZCO5L2/55SoIHNoaWZ0VXAg5p2l5L+u5aSNXG4gICAgICogKi9cbiAgICBpbnNlcnQodmFsdWU6IG51bWJlcikge1xuICAgICAgICB0aGlzLmRhdGEucHVzaCh2YWx1ZSk7XG4gICAgICAgIHRoaXMuc2lmdFVwKHRoaXMuZGF0YSwgdGhpcy5zaXplIC0gMSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog56e76Zmk5bm26L+U5Zue5pyA5aSn5YC877yI5pyA5aSn5aCG77yJ5oiW6ICF5pyA5bCP5YC877yI5pyA5bCP5aCG77yJXG4gICAgICog5Li65LqG5bCG6L+Z5Liq6IqC54K55Yig6Zmk5ZCO55qE56m65L2N5aGr6KGl5LiK77yM6ZyA6KaB5bCG5pyA5ZCO5LiA5Liq5YWD57Sg56e75Yiw5qC56IqC54K555qE5L2N572u77yMXG4gICAgICog54S25ZCO5L2/55SoIHNoaWZ0RG93biDmlrnms5XmnaXkv67lpI3loIZcbiAgICAgKiAqL1xuICAgIHJlbW92ZSgpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5kYXRhLnNoaWZ0KCk7XG4gICAgICAgIHRoaXMuaGVhcGlmeVdpdGhTaWZ0RG93bigpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOenu+mZpOW5tui/lOWbnuWghuacq+WwvueahOaVsOaNrlxuICAgICAqICovXG4gICAgcG9sbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5wb3AoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDnp7vpmaTloIbkuK3ku7vmhI/oioLngrlcbiAgICAgKiDlvZPlroPkuI7lrZDoioLngrnmr5TovoPkvY3nva7kuI3ml7bml6Dluo/ml7bkvb/nlKggc2hpZnREb3duKCnvvIzlpoLmnpzkuI7niLboioLngrnmr5TovoPlj5HnjrDml6Dluo/liJnkvb/nlKggc2hpZnRVcCgpXG4gICAgICogKi9cbiAgICByZW1vdmVBdEluZGV4KCkge1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5bCG5LiA5Liq5pu05bCP55qE5YC877yI5pyA5bCP5aCG77yJ5oiW6ICF5pu05aSn55qE5YC877yI5pyA5aSn5aCG77yJ6LWL5YC857uZ5LiA5Liq6IqC54K5XG4gICAgICpcbiAgICAgKiAqL1xuICAgIHJlcGxhY2UoKSB7XG5cbiAgICB9XG59XG5cbi8qKlxuICog5pyA5bCP5aCGKOWwj+mhtuWghilcbiAqICovXG5leHBvcnQgY2xhc3MgTWluSGVhcCBleHRlbmRzIEhlYXAge1xuICAgIGNvbnN0cnVjdG9yKGFycjogbnVtYmVyW10pIHtcbiAgICAgICAgc3VwZXIoYXJyKTtcbiAgICB9XG5cbiAgICBzaWZ0VXAoQTogbnVtYmVyW10sIGs6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB3aGlsZSAoayAhPSAwKSB7XG4gICAgICAgICAgICAvLyDmib7liLDniLboioLngrlcbiAgICAgICAgICAgIGNvbnN0IGZhdGhlciA9IE1hdGguZmxvb3IoKGsgLSAxKSAvIDIpO1xuICAgICAgICAgICAgLy8g5aaC5p6c54i26IqC54K5ID4g5paw5Yqg5YWl55qE6IqC54K5IOespuWQiCDloIYg57uT5p2fIOivpei9rlxuICAgICAgICAgICAgaWYgKEFba10gPiBBW2ZhdGhlcl0pIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIOWPjeS5iyDpgqPkuYgg5Lqk5o2i5Lik5Liq6IqC54K5XG4gICAgICAgICAgICBbQVtrXSwgQVtmYXRoZXJdXSA9IFtBW2ZhdGhlcl0sIEFba11dO1xuXG4gICAgICAgICAgICAvLyDnjrDlnKgg546w5Zyo5paw5Yqg5YWl55qE6IqC54K5IOeOsOWcqOWcqCDljp/mnaXnmoTniLboioLngrnkuIpcbiAgICAgICAgICAgIGsgPSBmYXRoZXI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzaWZ0RG93bihBOiBudW1iZXJbXSwgazogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHdoaWxlIChrICogMiArIDEgPCBBLmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IHNvbiA9IGsgKiAyICsgMTtcbiAgICAgICAgICAgIC8vIOS4juWFtuS4pOS4quWEv+WtkOS4rei+g+Wwj+eahOS4gOS4quavlOi+g1xuICAgICAgICAgICAgaWYgKGsgKiAyICsgMiA8IEEubGVuZ3RoICYmIEFbc29uXSA+IEFbayAqIDIgKyAyXSkge1xuICAgICAgICAgICAgICAgIHNvbiA9IGsgKiAyICsgMjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g6Iul5aSn5LqO5YS/5a2Q77yM5YiZ5LiO5YS/5a2Q5Lqk5o2i44CCXG4gICAgICAgICAgICBpZiAoQVtzb25dID4gQVtrXSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgW0Fbc29uXSwgQVtrXV0gPSBbQVtrXSwgQVtzb25dXTtcbiAgICAgICAgICAgIC8vIOS6pOaNouWQjuWGjeS4juaWsOeahOWEv+WtkOavlOi+g+W5tuS6pOaNou+8jOebtOiHs+ayoeacieWEv+WtkOOAglxuICAgICAgICAgICAgayA9IHNvbjtcbiAgICAgICAgfVxuICAgIH1cblxufVxuXG5cbi8qKlxuICog5pyA5aSn5aCGKOWkp+mhtuWghilcbiAqICovXG5leHBvcnQgY2xhc3MgTWF4SGVhcCBleHRlbmRzIEhlYXAge1xuICAgIGNvbnN0cnVjdG9yKGFycjogbnVtYmVyW10pIHtcbiAgICAgICAgc3VwZXIoYXJyKTtcbiAgICB9XG5cbiAgICBzaWZ0VXAoQTogbnVtYmVyW10sIGs6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB3aGlsZSAoayAhPSAwKSB7XG4gICAgICAgICAgICAvLyDmib7liLDniLboioLngrlcbiAgICAgICAgICAgIGNvbnN0IGZhdGhlciA9IE1hdGguZmxvb3IoKGsgLSAxKSAvIDIpO1xuICAgICAgICAgICAgLy8g5aaC5p6c54i26IqC54K5ID4g5paw5Yqg5YWl55qE6IqC54K5IOespuWQiCDloIYg57uT5p2fIOivpei9rlxuICAgICAgICAgICAgaWYgKEFba10gPCBBW2ZhdGhlcl0pIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIOWPjeS5iyDpgqPkuYgg5Lqk5o2i5Lik5Liq6IqC54K5XG4gICAgICAgICAgICBbQVtrXSwgQVtmYXRoZXJdXSA9IFtBW2ZhdGhlcl0sIEFba11dO1xuXG4gICAgICAgICAgICAvLyDnjrDlnKgg546w5Zyo5paw5Yqg5YWl55qE6IqC54K5IOeOsOWcqOWcqCDljp/mnaXnmoTniLboioLngrnkuIpcbiAgICAgICAgICAgIGsgPSBmYXRoZXI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzaWZ0RG93bihBOiBudW1iZXJbXSwgazogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHdoaWxlIChrICogMiArIDEgPCBBLmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IHNvbiA9IGsgKiAyICsgMTtcbiAgICAgICAgICAgIGlmIChrICogMiArIDIgPCBBLmxlbmd0aCAmJiBBW3Nvbl0gPCBBW2sgKiAyICsgMl0pIHtcbiAgICAgICAgICAgICAgICBzb24gPSBrICogMiArIDI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChBW3Nvbl0gPCBBW2tdKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBbQVtzb25dLCBBW2tdXSA9IFtBW2tdLCBBW3Nvbl1dO1xuICAgICAgICAgICAgLy8g5Lqk5o2i5ZCO5YaN5LiO5paw55qE5YS/5a2Q5q+U6L6D5bm25Lqk5o2i77yM55u06Iez5rKh5pyJ5YS/5a2Q44CCXG4gICAgICAgICAgICBrID0gc29uO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5pbXBvcnQgYXNzZXJ0IGZyb20gJ2Fzc2VydCc7XG57XG4gICAgY29uc3QgbWluSGVhcCA9IG5ldyBNaW5IZWFwKFsyLCAzLCAxLCAzLCA0LCA1LCAxLCAzLCA2LCA3LCA4LCA5LCA1NCwgNSwgNywgMywgMiwgMSwgMiwgNDEsIDUsIDddKTtcbiAgICBhc3NlcnQub2sodmFsaWRIZWFwKG1pbkhlYXAuZGF0YSkpO1xuICAgIG1pbkhlYXAuaW5zZXJ0KDApO1xuICAgIG1pbkhlYXAuaW5zZXJ0KDk5KTtcbiAgICBhc3NlcnQub2sodmFsaWRIZWFwKG1pbkhlYXAuZGF0YSkpO1xufVxue1xuICAgIGNvbnN0IG1heEhlYXAgPSBuZXcgTWF4SGVhcChbMiwgMywgMSwgMywgNCwgNSwgMSwgMywgNiwgNywgOCwgOSwgNTQsIDUsIDcsIDMsIDIsIDEsIDIsIDQxLCA1LCA3XSk7XG4gICAgYXNzZXJ0Lm9rKHZhbGlkSGVhcChtYXhIZWFwLmRhdGEpKTtcbiAgICBtYXhIZWFwLmluc2VydCgwKTtcbiAgICBtYXhIZWFwLmluc2VydCg5OSk7XG4gICAgYXNzZXJ0Lm9rKHZhbGlkSGVhcChtYXhIZWFwLmRhdGEpKTtcbn1cblxuIl19