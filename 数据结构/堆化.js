"use strict";
/*
堆（英语：heap)是计算机科学中一类特殊的数据结构的统称。堆通常是一个可以被看做一棵树的数组对象。
堆总是满足下列性质：
    堆中某个节点的值总是不大于或不小于其父节点的值；
    堆总是一棵完全二叉树。
    将根节点最大的堆叫做最大堆或大根堆，根节点最小的堆叫做最小堆或小根堆。常见的堆有二叉堆、斐波那契堆等。
    堆是非线性数据结构，相当于一维数组，有两个直接后继。
    堆的定义如下：n个元素的序列{k1,k2,ki,…,kn}当且仅当满足下关系时，称之为堆。
    (ki <= k2i,ki <= k2i+1)或者(ki >= k2i,ki >= k2i+1), (i = 1,2,3,4...n/2)

    若将和此次序列对应的一维数组（即以一维数组作此序列的存储结构）看成是一个完全二叉树，
    则堆的含义表明，完全二叉树中所有非终端结点的值均不大于（或不小于）其左、右孩子结点的值。
    由此，若序列{k1,k2,…,kn}是堆，则堆顶元素（或完全二叉树的根）必为序列中n个元素的最小值（或最大值）。

堆的用途 :
 1. 堆排序
 2. 大顶堆(最大堆) : 可以轻松获取 第 n 大的数 ;小顶堆(最小堆) : 可以轻松获取 第 n 小的数
* */
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * 将无序数组堆化
 * 有两种算法
 * 1. SiftUp 算法  O(nlogn)
 * 2. SiftDown 算法   O(n)
 * */
function heapifyWithSiftUp(A) {
    for (let i = 0; i < A.length; i++) {
        siftUp(A, i);
    }
    return A;
}
exports.heapifyWithSiftUp = heapifyWithSiftUp;
function siftUp(A, k) {
    // 此处是 最小堆
    while (k != 0) {
        // 找到父节点
        const father = Math.floor((k - 1) / 2);
        // 如果父节点 > 新加入的节点 符合 堆 结束 该轮
        if (A[k] > A[father]) {
            break;
        }
        // 反之 那么 交换两个节点
        [A[k], A[father]] = [A[father], A[k]];
        // 现在 现在新加入的节点 现在在 原来的父节点上
        k = father;
    }
}
exports.siftUp = siftUp;
function heapifyWithSiftDown(A) {
    // 初始选择最接近叶子的一个父结点
    for (let i = Math.floor((A.length - 1) / 2); i >= 0; i--) {
        siftDown(A, i);
    }
    return A;
}
exports.heapifyWithSiftDown = heapifyWithSiftDown;
function siftDown(A, k) {
    // 此处是 最小堆
    while (k * 2 + 1 < A.length) {
        let son = k * 2 + 1;
        // 与其两个儿子中较小的一个比较
        if (k * 2 + 2 < A.length && A[son] > A[k * 2 + 2]) {
            son = k * 2 + 2;
        }
        // 若大于儿子，则与儿子交换。
        if (A[son] > A[k]) {
            break;
        }
        [A[son], A[k]] = [A[k], A[son]];
        // 交换后再与新的儿子比较并交换，直至没有儿子。
        k = son;
    }
}
exports.siftDown = siftDown;
/**
 * 用于验证数组 是不是一个堆
 * */
function validHeap(arr) {
    if (arr.length <= 2)
        return true;
    // 也就是符合 (ki <= k2i,ki <= k2i+1)或者(ki >= k2i,ki >= k2i+1), (i = 1,2,3,4...n/2) i 是 从1 开始的
    // 直接通过 第一 和 第二个 元素 判断是 最大堆 还是最小堆
    let type = arr[0] > arr[1] ? 'MaxHeap' : 'MinHeap';
    for (let i = 0; i < arr.length; i++) {
        const awaitForCompare = [arr[i]];
        [2 * (i + 1) - 1, 2 * (i + 1) - 1 + 1].forEach(index => {
            if (index < arr.length) {
                awaitForCompare.push(arr[index]);
            }
        });
        if (type === "MaxHeap") {
            if (Math.max(...awaitForCompare) !== arr[i]) {
                return false;
            }
        }
        else {
            if (Math.min(...awaitForCompare) !== arr[i]) {
                return false;
            }
        }
    }
    return true;
}
exports.validHeap = validHeap;
const assert_1 = __importDefault(require("assert"));
const lodash_1 = __importDefault(require("lodash"));
assert_1.default.ok(validHeap([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]));
assert_1.default.ok(validHeap([10, 9, 8, 7, 6, 5, 4, 3, 2, 1]));
assert_1.default.ok(validHeap([10, 7, 2, 5, 1]));
assert_1.default.ok(validHeap([1, 5, 2, 7, 10]));
assert_1.default.strictEqual(validHeap([1, 5, 2, 7, 10, 1]), false);
assert_1.default.ok(validHeap(heapifyWithSiftUp(lodash_1.default.shuffle([2, 2, 1, 1, 4, 5, 6, 7, 8, 9, 0, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2]))));
assert_1.default.ok(validHeap(heapifyWithSiftDown(lodash_1.default.shuffle([2, 2, 1, 1, 4, 5, 6, 7, 8, 9, 0, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2]))));
/*

import Benchmark from "benchmark";

const suite = new Benchmark.Suite;
suite
    .add('heapifyWithSiftUp', function () {
        heapifyWithSiftUp([2, 2, 1, 1, 4, 5, 6, 7, 8, 9, 0, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2]);
    })
    .add('heapifyWithSiftDown', function () {
        heapifyWithSiftDown([2, 2, 1, 1, 4, 5, 6, 7, 8, 9, 0, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2]);
    })
    .on('cycle', function (event: Benchmark.Event) {
        console.log(String(event.target));
    })
    .on('complete', function (this: any) {
        console.log('Fastest is ' + this.filter('fastest').map('name'));
    })
    // run async
    .run({'async': false});

*/
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoi5aCG5YyWLmpzIiwic291cmNlUm9vdCI6Ii4vIiwic291cmNlcyI6WyLmlbDmja7nu5PmnoQv5aCG5YyWLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFpQkk7Ozs7O0FBR0o7Ozs7O0tBS0s7QUFDTCxTQUFnQixpQkFBaUIsQ0FBQyxDQUFXO0lBQ3pDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQy9CLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7S0FDaEI7SUFDRCxPQUFPLENBQUMsQ0FBQztBQUNiLENBQUM7QUFMRCw4Q0FLQztBQUVELFNBQWdCLE1BQU0sQ0FBQyxDQUFXLEVBQUUsQ0FBUztJQUN6QyxVQUFVO0lBQ1YsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ1gsUUFBUTtRQUNSLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkMsNEJBQTRCO1FBQzVCLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUNsQixNQUFNO1NBQ1Q7UUFDRCxlQUFlO1FBQ2YsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFdEMsMEJBQTBCO1FBQzFCLENBQUMsR0FBRyxNQUFNLENBQUM7S0FDZDtBQUNMLENBQUM7QUFmRCx3QkFlQztBQUVELFNBQWdCLG1CQUFtQixDQUFDLENBQVc7SUFDM0Msa0JBQWtCO0lBQ2xCLEtBQUssSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FB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QUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3RELGdCQUFNLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN0RCxnQkFBTSxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3ZDLGdCQUFNLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdkMsZ0JBQU0sQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBRTFELGdCQUFNLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FDZixpQkFBaUIsQ0FDYixnQkFBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUNwSyxDQUNKLENBQUMsQ0FBQztBQUVILGdCQUFNLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FDZixtQkFBbUIsQ0FDZixnQkFBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUNwSyxDQUNKLENBQUMsQ0FBQztBQUVIOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUFxQkUiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxu5aCG77yI6Iux6K+t77yaaGVhcCnmmK/orqHnrpfmnLrnp5HlrabkuK3kuIDnsbvnibnmrornmoTmlbDmja7nu5PmnoTnmoTnu5/np7DjgILloIbpgJrluLjmmK/kuIDkuKrlj6/ku6XooqvnnIvlgZrkuIDmo7XmoJHnmoTmlbDnu4Tlr7nosaHjgIJcbuWghuaAu+aYr+a7oei2s+S4i+WIl+aAp+i0qO+8mlxuICAgIOWghuS4reafkOS4quiKgueCueeahOWAvOaAu+aYr+S4jeWkp+S6juaIluS4jeWwj+S6juWFtueItuiKgueCueeahOWAvO+8m1xuICAgIOWghuaAu+aYr+S4gOajteWujOWFqOS6jOWPieagkeOAglxuICAgIOWwhuagueiKgueCueacgOWkp+eahOWghuWPq+WBmuacgOWkp+WghuaIluWkp+agueWghu+8jOagueiKgueCueacgOWwj+eahOWghuWPq+WBmuacgOWwj+WghuaIluWwj+agueWghuOAguW4uOingeeahOWghuacieS6jOWPieWghuOAgeaWkOazoumCo+WlkeWghuetieOAglxuICAgIOWghuaYr+mdnue6v+aAp+aVsOaNrue7k+aehO+8jOebuOW9k+S6juS4gOe7tOaVsOe7hO+8jOacieS4pOS4quebtOaOpeWQjue7p+OAglxuICAgIOWghueahOWumuS5ieWmguS4i++8mm7kuKrlhYPntKDnmoTluo/liJd7azEsazIsa2ks4oCmLGtufeW9k+S4lOS7heW9k+a7oei2s+S4i+WFs+ezu+aXtu+8jOensOS5i+S4uuWghuOAglxuICAgIChraSA8PSBrMmksa2kgPD0gazJpKzEp5oiW6ICFKGtpID49IGsyaSxraSA+PSBrMmkrMSksIChpID0gMSwyLDMsNC4uLm4vMilcblxuICAgIOiLpeWwhuWSjOatpOasoeW6j+WIl+WvueW6lOeahOS4gOe7tOaVsOe7hO+8iOWNs+S7peS4gOe7tOaVsOe7hOS9nOatpOW6j+WIl+eahOWtmOWCqOe7k+aehO+8ieeci+aIkOaYr+S4gOS4quWujOWFqOS6jOWPieagke+8jFxuICAgIOWImeWghueahOWQq+S5ieihqOaYju+8jOWujOWFqOS6jOWPieagkeS4reaJgOaciemdnue7iOerr+e7k+eCueeahOWAvOWdh+S4jeWkp+S6ju+8iOaIluS4jeWwj+S6ju+8ieWFtuW3puOAgeWPs+WtqeWtkOe7k+eCueeahOWAvOOAglxuICAgIOeUseatpO+8jOiLpeW6j+WIl3trMSxrMizigKYsa2595piv5aCG77yM5YiZ5aCG6aG25YWD57Sg77yI5oiW5a6M5YWo5LqM5Y+J5qCR55qE5qC577yJ5b+F5Li65bqP5YiX5LitbuS4quWFg+e0oOeahOacgOWwj+WAvO+8iOaIluacgOWkp+WAvO+8ieOAglxuXG7loIbnmoTnlKjpgJQgOlxuIDEuIOWghuaOkuW6j1xuIDIuIOWkp+mhtuWghijmnIDlpKfloIYpIDog5Y+v5Lul6L275p2+6I635Y+WIOesrCBuIOWkp+eahOaVsCA75bCP6aG25aCGKOacgOWwj+WghikgOiDlj6/ku6Xovbvmnb7ojrflj5Yg56ysIG4g5bCP55qE5pWwXG4qICovXG5cblxuLyoqXG4gKiDlsIbml6Dluo/mlbDnu4TloIbljJZcbiAqIOacieS4pOenjeeul+azlVxuICogMS4gU2lmdFVwIOeul+azlSAgTyhubG9nbilcbiAqIDIuIFNpZnREb3duIOeul+azlSAgIE8obilcbiAqICovXG5leHBvcnQgZnVuY3Rpb24gaGVhcGlmeVdpdGhTaWZ0VXAoQTogbnVtYmVyW10pIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IEEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc2lmdFVwKEEsIGkpO1xuICAgIH1cbiAgICByZXR1cm4gQTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNpZnRVcChBOiBudW1iZXJbXSwgazogbnVtYmVyKSB7XG4gICAgLy8g5q2k5aSE5pivIOacgOWwj+WghlxuICAgIHdoaWxlIChrICE9IDApIHtcbiAgICAgICAgLy8g5om+5Yiw54i26IqC54K5XG4gICAgICAgIGNvbnN0IGZhdGhlciA9IE1hdGguZmxvb3IoKGsgLSAxKSAvIDIpO1xuICAgICAgICAvLyDlpoLmnpzniLboioLngrkgPiDmlrDliqDlhaXnmoToioLngrkg56ym5ZCIIOWghiDnu5PmnZ8g6K+l6L2uXG4gICAgICAgIGlmIChBW2tdID4gQVtmYXRoZXJdKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLyDlj43kuYsg6YKj5LmIIOS6pOaNouS4pOS4quiKgueCuVxuICAgICAgICBbQVtrXSwgQVtmYXRoZXJdXSA9IFtBW2ZhdGhlcl0sIEFba11dO1xuXG4gICAgICAgIC8vIOeOsOWcqCDnjrDlnKjmlrDliqDlhaXnmoToioLngrkg546w5Zyo5ZyoIOWOn+adpeeahOeItuiKgueCueS4ilxuICAgICAgICBrID0gZmF0aGVyO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhlYXBpZnlXaXRoU2lmdERvd24oQTogbnVtYmVyW10pIHtcbiAgICAvLyDliJ3lp4vpgInmi6nmnIDmjqXov5Hlj7blrZDnmoTkuIDkuKrniLbnu5PngrlcbiAgICBmb3IgKGxldCBpID0gTWF0aC5mbG9vcigoQS5sZW5ndGggLSAxKSAvIDIpOyBpID49IDA7IGktLSkge1xuICAgICAgICBzaWZ0RG93bihBLCBpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gQTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNpZnREb3duKEE6IG51bWJlcltdLCBrOiBudW1iZXIpIHtcbiAgICAvLyDmraTlpITmmK8g5pyA5bCP5aCGXG4gICAgd2hpbGUgKGsgKiAyICsgMSA8IEEubGVuZ3RoKSB7XG4gICAgICAgIGxldCBzb24gPSBrICogMiArIDE7XG4gICAgICAgIC8vIOS4juWFtuS4pOS4quWEv+WtkOS4rei+g+Wwj+eahOS4gOS4quavlOi+g1xuICAgICAgICBpZiAoayAqIDIgKyAyIDwgQS5sZW5ndGggJiYgQVtzb25dID4gQVtrICogMiArIDJdKSB7XG4gICAgICAgICAgICBzb24gPSBrICogMiArIDI7XG4gICAgICAgIH1cblxuICAgICAgICAvLyDoi6XlpKfkuo7lhL/lrZDvvIzliJnkuI7lhL/lrZDkuqTmjaLjgIJcbiAgICAgICAgaWYgKEFbc29uXSA+IEFba10pIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIFtBW3Nvbl0sIEFba11dID0gW0Fba10sIEFbc29uXV07XG4gICAgICAgIC8vIOS6pOaNouWQjuWGjeS4juaWsOeahOWEv+WtkOavlOi+g+W5tuS6pOaNou+8jOebtOiHs+ayoeacieWEv+WtkOOAglxuICAgICAgICBrID0gc29uO1xuICAgIH1cbn1cblxuLyoqXG4gKiDnlKjkuo7pqozor4HmlbDnu4Qg5piv5LiN5piv5LiA5Liq5aCGXG4gKiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkSGVhcChhcnI6IG51bWJlcltdKSB7XG4gICAgaWYgKGFyci5sZW5ndGggPD0gMikgcmV0dXJuIHRydWU7XG4gICAgLy8g5Lmf5bCx5piv56ym5ZCIIChraSA8PSBrMmksa2kgPD0gazJpKzEp5oiW6ICFKGtpID49IGsyaSxraSA+PSBrMmkrMSksIChpID0gMSwyLDMsNC4uLm4vMikgaSDmmK8g5LuOMSDlvIDlp4vnmoRcbiAgICAvLyDnm7TmjqXpgJrov4cg56ys5LiAIOWSjCDnrKzkuozkuKog5YWD57SgIOWIpOaWreaYryDmnIDlpKfloIYg6L+Y5piv5pyA5bCP5aCGXG4gICAgbGV0IHR5cGUgPSBhcnJbMF0gPiBhcnJbMV0gPyAnTWF4SGVhcCcgOiAnTWluSGVhcCc7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBhd2FpdEZvckNvbXBhcmUgPSBbYXJyW2ldXTtcbiAgICAgICAgWzIgKiAoaSArIDEpIC0gMSwgMiAqIChpICsgMSkgLSAxICsgMV0uZm9yRWFjaChpbmRleCA9PiB7XG4gICAgICAgICAgICBpZiAoaW5kZXggPCBhcnIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgYXdhaXRGb3JDb21wYXJlLnB1c2goYXJyW2luZGV4XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHlwZSA9PT0gXCJNYXhIZWFwXCIpIHtcbiAgICAgICAgICAgIGlmIChNYXRoLm1heCguLi5hd2FpdEZvckNvbXBhcmUpICE9PSBhcnJbaV0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoTWF0aC5taW4oLi4uYXdhaXRGb3JDb21wYXJlKSAhPT0gYXJyW2ldKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmltcG9ydCBhc3NlcnQgZnJvbSAnYXNzZXJ0JztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5cblxuYXNzZXJ0Lm9rKHZhbGlkSGVhcChbMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTBdKSk7XG5hc3NlcnQub2sodmFsaWRIZWFwKFsxMCwgOSwgOCwgNywgNiwgNSwgNCwgMywgMiwgMV0pKTtcbmFzc2VydC5vayh2YWxpZEhlYXAoWzEwLCA3LCAyLCA1LCAxXSkpO1xuYXNzZXJ0Lm9rKHZhbGlkSGVhcChbMSwgNSwgMiwgNywgMTBdKSk7XG5hc3NlcnQuc3RyaWN0RXF1YWwodmFsaWRIZWFwKFsxLCA1LCAyLCA3LCAxMCwgMV0pLCBmYWxzZSk7XG5cbmFzc2VydC5vayh2YWxpZEhlYXAoXG4gICAgaGVhcGlmeVdpdGhTaWZ0VXAoXG4gICAgICAgIF8uc2h1ZmZsZShbMiwgMiwgMSwgMSwgNCwgNSwgNiwgNywgOCwgOSwgMCwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMl0pLFxuICAgICksXG4pKTtcblxuYXNzZXJ0Lm9rKHZhbGlkSGVhcChcbiAgICBoZWFwaWZ5V2l0aFNpZnREb3duKFxuICAgICAgICBfLnNodWZmbGUoWzIsIDIsIDEsIDEsIDQsIDUsIDYsIDcsIDgsIDksIDAsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDJdKSxcbiAgICApLFxuKSk7XG5cbi8qXG5cbmltcG9ydCBCZW5jaG1hcmsgZnJvbSBcImJlbmNobWFya1wiO1xuXG5jb25zdCBzdWl0ZSA9IG5ldyBCZW5jaG1hcmsuU3VpdGU7XG5zdWl0ZVxuICAgIC5hZGQoJ2hlYXBpZnlXaXRoU2lmdFVwJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBoZWFwaWZ5V2l0aFNpZnRVcChbMiwgMiwgMSwgMSwgNCwgNSwgNiwgNywgOCwgOSwgMCwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMl0pO1xuICAgIH0pXG4gICAgLmFkZCgnaGVhcGlmeVdpdGhTaWZ0RG93bicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaGVhcGlmeVdpdGhTaWZ0RG93bihbMiwgMiwgMSwgMSwgNCwgNSwgNiwgNywgOCwgOSwgMCwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMl0pO1xuICAgIH0pXG4gICAgLm9uKCdjeWNsZScsIGZ1bmN0aW9uIChldmVudDogQmVuY2htYXJrLkV2ZW50KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFN0cmluZyhldmVudC50YXJnZXQpKTtcbiAgICB9KVxuICAgIC5vbignY29tcGxldGUnLCBmdW5jdGlvbiAodGhpczogYW55KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdGYXN0ZXN0IGlzICcgKyB0aGlzLmZpbHRlcignZmFzdGVzdCcpLm1hcCgnbmFtZScpKTtcbiAgICB9KVxuICAgIC8vIHJ1biBhc3luY1xuICAgIC5ydW4oeydhc3luYyc6IGZhbHNlfSk7XG5cbiovXG4iXX0=