"use strict";
/*
堆（英语：heap)是计算机科学中一类特殊的数据结构的统称。堆通常是一个可以被看做一棵树的数组对象。
堆总是满足下列性质：
    堆中某个节点的值总是不大于或不小于其父节点的值；
    堆总是一棵完全二叉树。
    将根节点最大的堆叫做最大堆或大根堆，根节点最小的堆叫做最小堆或小根堆。常见的堆有二叉堆、斐波那契堆等。
    堆是非线性数据结构，相当于一维数组，有两个直接后继。
    堆的定义如下：n个元素的序列{k1,k2,ki,…,kn}当且仅当满足下关系时，称之为堆。
    (ki <= k2i,ki <= k2i+1)或者(ki >= k2i,ki >= k2i+1), (i = 1,2,3,4...n/2)

    若将和此次序列对应的一维数组（即以一维数组作此序列的存储结构）看成是一个完全二叉树，
    则堆的含义表明，完全二叉树中所有非终端结点的值均不大于（或不小于）其左、右孩子结点的值。
    由此，若序列{k1,k2,…,kn}是堆，则堆顶元素（或完全二叉树的根）必为序列中n个元素的最小值（或最大值）。

堆的用途 :
 1. 堆排序
 2. 大顶堆(最大堆) : 可以轻松获取 第 n 大的数 ;小顶堆(最小堆) : 可以轻松获取 第 n 小的数
* */
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.validHeap = exports.siftDown = exports.heapifyWithSiftDown = exports.siftUp = exports.heapifyWithSiftUp = void 0;
/**
 * 将无序数组堆化
 * 有两种算法
 * 1. SiftUp 算法  O(nlogn)
 * 2. SiftDown 算法   O(n)
 * */
function heapifyWithSiftUp(A) {
    for (let i = 0; i < A.length; i++) {
        siftUp(A, i);
    }
    return A;
}
exports.heapifyWithSiftUp = heapifyWithSiftUp;
function siftUp(A, k) {
    // 此处是 最小堆
    while (k != 0) {
        // 找到父节点
        const father = Math.floor((k - 1) / 2);
        // 如果父节点 > 新加入的节点 符合 堆 结束 该轮
        if (A[k] > A[father]) {
            break;
        }
        // 反之 那么 交换两个节点
        [A[k], A[father]] = [A[father], A[k]];
        // 现在 现在新加入的节点 现在在 原来的父节点上
        k = father;
    }
}
exports.siftUp = siftUp;
function heapifyWithSiftDown(A) {
    // 初始选择最接近叶子的一个父结点
    for (let i = Math.floor((A.length - 1) / 2); i >= 0; i--) {
        siftDown(A, i);
    }
    return A;
}
exports.heapifyWithSiftDown = heapifyWithSiftDown;
function siftDown(A, k) {
    // 此处是 最小堆
    while (k * 2 + 1 < A.length) {
        let son = k * 2 + 1;
        // 与其两个儿子中较小的一个比较
        if (k * 2 + 2 < A.length && A[son] > A[k * 2 + 2]) {
            son = k * 2 + 2;
        }
        // 若大于儿子，则与儿子交换。
        if (A[son] > A[k]) {
            break;
        }
        [A[son], A[k]] = [A[k], A[son]];
        // 交换后再与新的儿子比较并交换，直至没有儿子。
        k = son;
    }
}
exports.siftDown = siftDown;
/**
 * 用于验证数组 是不是一个堆
 * */
function validHeap(arr) {
    if (arr.length <= 2)
        return true;
    // 也就是符合 (ki <= k2i,ki <= k2i+1)或者(ki >= k2i,ki >= k2i+1), (i = 1,2,3,4...n/2) i 是 从1 开始的
    // 直接通过 第一 和 第二个 元素 判断是 最大堆 还是最小堆
    let type = arr[0] > arr[1] ? 'MaxHeap' : 'MinHeap';
    for (let i = 0; i < arr.length; i++) {
        const awaitForCompare = [arr[i]];
        [2 * (i + 1) - 1, 2 * (i + 1) - 1 + 1].forEach(index => {
            if (index < arr.length) {
                awaitForCompare.push(arr[index]);
            }
        });
        if (type === "MaxHeap") {
            if (Math.max(...awaitForCompare) !== arr[i]) {
                return false;
            }
        }
        else {
            if (Math.min(...awaitForCompare) !== arr[i]) {
                return false;
            }
        }
    }
    return true;
}
exports.validHeap = validHeap;
const assert_1 = __importDefault(require("assert"));
const lodash_1 = __importDefault(require("lodash"));
assert_1.default.ok(validHeap([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]));
assert_1.default.ok(validHeap([10, 9, 8, 7, 6, 5, 4, 3, 2, 1]));
assert_1.default.ok(validHeap([10, 7, 2, 5, 1]));
assert_1.default.ok(validHeap([1, 5, 2, 7, 10]));
assert_1.default.strictEqual(validHeap([1, 5, 2, 7, 10, 1]), false);
assert_1.default.ok(validHeap(heapifyWithSiftUp(lodash_1.default.shuffle([2, 2, 1, 1, 4, 5, 6, 7, 8, 9, 0, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2]))));
assert_1.default.ok(validHeap(heapifyWithSiftDown(lodash_1.default.shuffle([2, 2, 1, 1, 4, 5, 6, 7, 8, 9, 0, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2]))));
/*

import Benchmark from "benchmark";

const suite = new Benchmark.Suite;
suite
    .add('heapifyWithSiftUp', function () {
        heapifyWithSiftUp([2, 2, 1, 1, 4, 5, 6, 7, 8, 9, 0, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2]);
    })
    .add('heapifyWithSiftDown', function () {
        heapifyWithSiftDown([2, 2, 1, 1, 4, 5, 6, 7, 8, 9, 0, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2]);
    })
    .on('cycle', function (event: Benchmark.Event) {
        console.log(String(event.target));
    })
    .on('complete', function (this: any) {
        console.log('Fastest is ' + this.filter('fastest').map('name'));
    })
    // run async
    .run({'async': false});

*/
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoi5aCG5YyWLmpzIiwic291cmNlUm9vdCI6Ii4vIiwic291cmNlcyI6WyLmlbDmja7nu5PmnoQv5aCG5YyWLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFpQkk7Ozs7OztBQUdKOzs7OztLQUtLO0FBQ0wsU0FBZ0IsaUJBQWlCLENBQUMsQ0FBVztJQUN6QyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUMvQixNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0tBQ2hCO0lBQ0QsT0FBTyxDQUFDLENBQUM7QUFDYixDQUFDO0FBTEQsOENBS0M7QUFFRCxTQUFnQixNQUFNLENBQUMsQ0FBVyxFQUFFLENBQVM7SUFDekMsVUFBVTtJQUNWLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNYLFFBQVE7UUFDUixNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZDLDRCQUE0QjtRQUM1QixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFDbEIsTUFBTTtTQUNUO1FBQ0QsZUFBZTtRQUNmLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRXRDLDBCQUEwQjtRQUMxQixDQUFDLEdBQUcsTUFBTSxDQUFDO0tBQ2Q7QUFDTCxDQUFDO0FBZkQsd0JBZUM7QUFFRCxTQUFnQixtQkFBbUIsQ0FBQyxDQUFXO0lBQzNDLGtCQUFrQjtJQUNsQixLQUFLLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLENB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RUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN0RCxnQkFBTSxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdEQsZ0JBQU0sQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN2QyxnQkFBTSxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3ZDLGdCQUFNLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUUxRCxnQkFBTSxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQ2YsaUJBQWlCLENBQ2IsZ0JBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FDcEssQ0FDSixDQUFDLENBQUM7QUFFSCxnQkFBTSxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQ2YsbUJBQW1CLENBQ2YsZ0JBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FDcEssQ0FDSixDQUFDLENBQUM7QUFFSDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0VBcUJFIiwic291cmNlc0NvbnRlbnQiOlsiLypcbuWghu+8iOiLseivre+8mmhlYXAp5piv6K6h566X5py656eR5a2m5Lit5LiA57G754m55q6K55qE5pWw5o2u57uT5p6E55qE57uf56ew44CC5aCG6YCa5bi45piv5LiA5Liq5Y+v5Lul6KKr55yL5YGa5LiA5qO15qCR55qE5pWw57uE5a+56LGh44CCXG7loIbmgLvmmK/mu6HotrPkuIvliJfmgKfotKjvvJpcbiAgICDloIbkuK3mn5DkuKroioLngrnnmoTlgLzmgLvmmK/kuI3lpKfkuo7miJbkuI3lsI/kuo7lhbbniLboioLngrnnmoTlgLzvvJtcbiAgICDloIbmgLvmmK/kuIDmo7Xlrozlhajkuozlj4nmoJHjgIJcbiAgICDlsIbmoLnoioLngrnmnIDlpKfnmoTloIblj6vlgZrmnIDlpKfloIbmiJblpKfmoLnloIbvvIzmoLnoioLngrnmnIDlsI/nmoTloIblj6vlgZrmnIDlsI/loIbmiJblsI/moLnloIbjgILluLjop4HnmoTloIbmnInkuozlj4nloIbjgIHmlpDms6LpgqPlpZHloIbnrYnjgIJcbiAgICDloIbmmK/pnZ7nur/mgKfmlbDmja7nu5PmnoTvvIznm7jlvZPkuo7kuIDnu7TmlbDnu4TvvIzmnInkuKTkuKrnm7TmjqXlkI7nu6fjgIJcbiAgICDloIbnmoTlrprkuYnlpoLkuIvvvJpu5Liq5YWD57Sg55qE5bqP5YiXe2sxLGsyLGtpLOKApixrbn3lvZPkuJTku4XlvZPmu6HotrPkuIvlhbPns7vml7bvvIznp7DkuYvkuLrloIbjgIJcbiAgICAoa2kgPD0gazJpLGtpIDw9IGsyaSsxKeaIluiAhShraSA+PSBrMmksa2kgPj0gazJpKzEpLCAoaSA9IDEsMiwzLDQuLi5uLzIpXG5cbiAgICDoi6XlsIblkozmraTmrKHluo/liJflr7nlupTnmoTkuIDnu7TmlbDnu4TvvIjljbPku6XkuIDnu7TmlbDnu4TkvZzmraTluo/liJfnmoTlrZjlgqjnu5PmnoTvvInnnIvmiJDmmK/kuIDkuKrlrozlhajkuozlj4nmoJHvvIxcbiAgICDliJnloIbnmoTlkKvkuYnooajmmI7vvIzlrozlhajkuozlj4nmoJHkuK3miYDmnInpnZ7nu4jnq6/nu5PngrnnmoTlgLzlnYfkuI3lpKfkuo7vvIjmiJbkuI3lsI/kuo7vvInlhbblt6bjgIHlj7PlranlrZDnu5PngrnnmoTlgLzjgIJcbiAgICDnlLHmraTvvIzoi6Xluo/liJd7azEsazIs4oCmLGtufeaYr+Wghu+8jOWImeWghumhtuWFg+e0oO+8iOaIluWujOWFqOS6jOWPieagkeeahOague+8ieW/heS4uuW6j+WIl+S4rW7kuKrlhYPntKDnmoTmnIDlsI/lgLzvvIjmiJbmnIDlpKflgLzvvInjgIJcblxu5aCG55qE55So6YCUIDpcbiAxLiDloIbmjpLluo9cbiAyLiDlpKfpobbloIYo5pyA5aSn5aCGKSA6IOWPr+S7pei9u+advuiOt+WPliDnrKwgbiDlpKfnmoTmlbAgO+Wwj+mhtuWghijmnIDlsI/loIYpIDog5Y+v5Lul6L275p2+6I635Y+WIOesrCBuIOWwj+eahOaVsFxuKiAqL1xuXG5cbi8qKlxuICog5bCG5peg5bqP5pWw57uE5aCG5YyWXG4gKiDmnInkuKTnp43nrpfms5VcbiAqIDEuIFNpZnRVcCDnrpfms5UgIE8obmxvZ24pXG4gKiAyLiBTaWZ0RG93biDnrpfms5UgICBPKG4pXG4gKiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhlYXBpZnlXaXRoU2lmdFVwKEE6IG51bWJlcltdKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBBLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHNpZnRVcChBLCBpKTtcbiAgICB9XG4gICAgcmV0dXJuIEE7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaWZ0VXAoQTogbnVtYmVyW10sIGs6IG51bWJlcikge1xuICAgIC8vIOatpOWkhOaYryDmnIDlsI/loIZcbiAgICB3aGlsZSAoayAhPSAwKSB7XG4gICAgICAgIC8vIOaJvuWIsOeItuiKgueCuVxuICAgICAgICBjb25zdCBmYXRoZXIgPSBNYXRoLmZsb29yKChrIC0gMSkgLyAyKTtcbiAgICAgICAgLy8g5aaC5p6c54i26IqC54K5ID4g5paw5Yqg5YWl55qE6IqC54K5IOespuWQiCDloIYg57uT5p2fIOivpei9rlxuICAgICAgICBpZiAoQVtrXSA+IEFbZmF0aGVyXSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLy8g5Y+N5LmLIOmCo+S5iCDkuqTmjaLkuKTkuKroioLngrlcbiAgICAgICAgW0Fba10sIEFbZmF0aGVyXV0gPSBbQVtmYXRoZXJdLCBBW2tdXTtcblxuICAgICAgICAvLyDnjrDlnKgg546w5Zyo5paw5Yqg5YWl55qE6IqC54K5IOeOsOWcqOWcqCDljp/mnaXnmoTniLboioLngrnkuIpcbiAgICAgICAgayA9IGZhdGhlcjtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoZWFwaWZ5V2l0aFNpZnREb3duKEE6IG51bWJlcltdKSB7XG4gICAgLy8g5Yid5aeL6YCJ5oup5pyA5o6l6L+R5Y+25a2Q55qE5LiA5Liq54i257uT54K5XG4gICAgZm9yIChsZXQgaSA9IE1hdGguZmxvb3IoKEEubGVuZ3RoIC0gMSkgLyAyKTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgc2lmdERvd24oQSwgaSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIEE7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaWZ0RG93bihBOiBudW1iZXJbXSwgazogbnVtYmVyKSB7XG4gICAgLy8g5q2k5aSE5pivIOacgOWwj+WghlxuICAgIHdoaWxlIChrICogMiArIDEgPCBBLmxlbmd0aCkge1xuICAgICAgICBsZXQgc29uID0gayAqIDIgKyAxO1xuICAgICAgICAvLyDkuI7lhbbkuKTkuKrlhL/lrZDkuK3ovoPlsI/nmoTkuIDkuKrmr5TovoNcbiAgICAgICAgaWYgKGsgKiAyICsgMiA8IEEubGVuZ3RoICYmIEFbc29uXSA+IEFbayAqIDIgKyAyXSkge1xuICAgICAgICAgICAgc29uID0gayAqIDIgKyAyO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g6Iul5aSn5LqO5YS/5a2Q77yM5YiZ5LiO5YS/5a2Q5Lqk5o2i44CCXG4gICAgICAgIGlmIChBW3Nvbl0gPiBBW2tdKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBbQVtzb25dLCBBW2tdXSA9IFtBW2tdLCBBW3Nvbl1dO1xuICAgICAgICAvLyDkuqTmjaLlkI7lho3kuI7mlrDnmoTlhL/lrZDmr5TovoPlubbkuqTmjaLvvIznm7Toh7PmsqHmnInlhL/lrZDjgIJcbiAgICAgICAgayA9IHNvbjtcbiAgICB9XG59XG5cbi8qKlxuICog55So5LqO6aqM6K+B5pWw57uEIOaYr+S4jeaYr+S4gOS4quWghlxuICogKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZEhlYXAoYXJyOiBudW1iZXJbXSkge1xuICAgIGlmIChhcnIubGVuZ3RoIDw9IDIpIHJldHVybiB0cnVlO1xuICAgIC8vIOS5n+WwseaYr+espuWQiCAoa2kgPD0gazJpLGtpIDw9IGsyaSsxKeaIluiAhShraSA+PSBrMmksa2kgPj0gazJpKzEpLCAoaSA9IDEsMiwzLDQuLi5uLzIpIGkg5pivIOS7jjEg5byA5aeL55qEXG4gICAgLy8g55u05o6l6YCa6L+HIOesrOS4gCDlkowg56ys5LqM5LiqIOWFg+e0oCDliKTmlq3mmK8g5pyA5aSn5aCGIOi/mOaYr+acgOWwj+WghlxuICAgIGxldCB0eXBlID0gYXJyWzBdID4gYXJyWzFdID8gJ01heEhlYXAnIDogJ01pbkhlYXAnO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgYXdhaXRGb3JDb21wYXJlID0gW2FycltpXV07XG4gICAgICAgIFsyICogKGkgKyAxKSAtIDEsIDIgKiAoaSArIDEpIC0gMSArIDFdLmZvckVhY2goaW5kZXggPT4ge1xuICAgICAgICAgICAgaWYgKGluZGV4IDwgYXJyLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGF3YWl0Rm9yQ29tcGFyZS5wdXNoKGFycltpbmRleF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHR5cGUgPT09IFwiTWF4SGVhcFwiKSB7XG4gICAgICAgICAgICBpZiAoTWF0aC5tYXgoLi4uYXdhaXRGb3JDb21wYXJlKSAhPT0gYXJyW2ldKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKE1hdGgubWluKC4uLmF3YWl0Rm9yQ29tcGFyZSkgIT09IGFycltpXSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xufVxuXG5pbXBvcnQgYXNzZXJ0IGZyb20gJ2Fzc2VydCc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG5cbmFzc2VydC5vayh2YWxpZEhlYXAoWzEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwXSkpO1xuYXNzZXJ0Lm9rKHZhbGlkSGVhcChbMTAsIDksIDgsIDcsIDYsIDUsIDQsIDMsIDIsIDFdKSk7XG5hc3NlcnQub2sodmFsaWRIZWFwKFsxMCwgNywgMiwgNSwgMV0pKTtcbmFzc2VydC5vayh2YWxpZEhlYXAoWzEsIDUsIDIsIDcsIDEwXSkpO1xuYXNzZXJ0LnN0cmljdEVxdWFsKHZhbGlkSGVhcChbMSwgNSwgMiwgNywgMTAsIDFdKSwgZmFsc2UpO1xuXG5hc3NlcnQub2sodmFsaWRIZWFwKFxuICAgIGhlYXBpZnlXaXRoU2lmdFVwKFxuICAgICAgICBfLnNodWZmbGUoWzIsIDIsIDEsIDEsIDQsIDUsIDYsIDcsIDgsIDksIDAsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDJdKSxcbiAgICApLFxuKSk7XG5cbmFzc2VydC5vayh2YWxpZEhlYXAoXG4gICAgaGVhcGlmeVdpdGhTaWZ0RG93bihcbiAgICAgICAgXy5zaHVmZmxlKFsyLCAyLCAxLCAxLCA0LCA1LCA2LCA3LCA4LCA5LCAwLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyXSksXG4gICAgKSxcbikpO1xuXG4vKlxuXG5pbXBvcnQgQmVuY2htYXJrIGZyb20gXCJiZW5jaG1hcmtcIjtcblxuY29uc3Qgc3VpdGUgPSBuZXcgQmVuY2htYXJrLlN1aXRlO1xuc3VpdGVcbiAgICAuYWRkKCdoZWFwaWZ5V2l0aFNpZnRVcCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaGVhcGlmeVdpdGhTaWZ0VXAoWzIsIDIsIDEsIDEsIDQsIDUsIDYsIDcsIDgsIDksIDAsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDJdKTtcbiAgICB9KVxuICAgIC5hZGQoJ2hlYXBpZnlXaXRoU2lmdERvd24nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGhlYXBpZnlXaXRoU2lmdERvd24oWzIsIDIsIDEsIDEsIDQsIDUsIDYsIDcsIDgsIDksIDAsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDJdKTtcbiAgICB9KVxuICAgIC5vbignY3ljbGUnLCBmdW5jdGlvbiAoZXZlbnQ6IEJlbmNobWFyay5FdmVudCkge1xuICAgICAgICBjb25zb2xlLmxvZyhTdHJpbmcoZXZlbnQudGFyZ2V0KSk7XG4gICAgfSlcbiAgICAub24oJ2NvbXBsZXRlJywgZnVuY3Rpb24gKHRoaXM6IGFueSkge1xuICAgICAgICBjb25zb2xlLmxvZygnRmFzdGVzdCBpcyAnICsgdGhpcy5maWx0ZXIoJ2Zhc3Rlc3QnKS5tYXAoJ25hbWUnKSk7XG4gICAgfSlcbiAgICAvLyBydW4gYXN5bmNcbiAgICAucnVuKHsnYXN5bmMnOiBmYWxzZX0pO1xuXG4qL1xuIl19