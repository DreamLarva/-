"use strict";
/*
堆（英语：heap)是计算机科学中一类特殊的数据结构的统称。堆通常是一个可以被看做一棵树的数组对象。
堆总是满足下列性质：
    堆中某个节点的值总是不大于或不小于其父节点的值；
    堆总是一棵完全二叉树。
    将根节点最大的堆叫做最大堆或大根堆，根节点最小的堆叫做最小堆或小根堆。常见的堆有二叉堆、斐波那契堆等。
    堆是非线性数据结构，相当于一维数组，有两个直接后继。
    堆的定义如下：n个元素的序列{k1,k2,ki,…,kn}当且仅当满足下关系时，称之为堆。
    (ki <= k2i,ki <= k2i+1)或者(ki >= k2i,ki >= k2i+1), (i = 1,2,3,4...n/2)

    若将和此次序列对应的一维数组（即以一维数组作此序列的存储结构）看成是一个完全二叉树，
    则堆的含义表明，完全二叉树中所有非终端结点的值均不大于（或不小于）其左、右孩子结点的值。
    由此，若序列{k1,k2,…,kn}是堆，则堆顶元素（或完全二叉树的根）必为序列中n个元素的最小值（或最大值）。

堆的用途 :
 1. 堆排序
 2. 大顶堆(最大堆) : 可以轻松获取 第 n 大的数 ;小顶堆(最小堆) : 可以轻松获取 第 n 小的数
* */
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.validHeap = exports.siftDown = exports.heapifyWithSiftDown = exports.siftUp = exports.heapifyWithSiftUp = void 0;
/**
 * 将无序数组堆化
 * 有两种算法
 * 1. SiftUp 算法  O(nlogn)
 * 2. SiftDown 算法   O(n)
 * */
function heapifyWithSiftUp(A) {
    for (let i = 0; i < A.length; i++) {
        siftUp(A, i);
    }
    return A;
}
exports.heapifyWithSiftUp = heapifyWithSiftUp;
function siftUp(A, k) {
    // 此处是 最小堆
    while (k != 0) {
        // 找到父节点
        const father = Math.floor((k - 1) / 2);
        // 如果父节点 > 新加入的节点 符合 堆 结束 该轮
        if (A[k] > A[father]) {
            break;
        }
        // 反之 那么 交换两个节点
        [A[k], A[father]] = [A[father], A[k]];
        // 现在 现在新加入的节点 现在在 原来的父节点上
        k = father;
    }
}
exports.siftUp = siftUp;
function heapifyWithSiftDown(A) {
    // 初始选择最接近叶子的一个父结点
    for (let i = Math.floor((A.length - 1) / 2); i >= 0; i--) {
        siftDown(A, i);
    }
    return A;
}
exports.heapifyWithSiftDown = heapifyWithSiftDown;
function siftDown(A, k) {
    // 此处是 最小堆
    while (k * 2 + 1 < A.length) {
        let son = k * 2 + 1;
        // 与其两个儿子中较小的一个比较
        if (k * 2 + 2 < A.length && A[son] > A[k * 2 + 2]) {
            son = k * 2 + 2;
        }
        // 若大于儿子，则与儿子交换。
        if (A[son] > A[k]) {
            break;
        }
        [A[son], A[k]] = [A[k], A[son]];
        // 交换后再与新的儿子比较并交换，直至没有儿子。
        k = son;
    }
}
exports.siftDown = siftDown;
/**
 * 用于验证数组 是不是一个堆
 * */
function validHeap(arr) {
    if (arr.length <= 2)
        return true;
    // 也就是符合 (ki <= k2i,ki <= k2i+1)或者(ki >= k2i,ki >= k2i+1), (i = 1,2,3,4...n/2) i 是 从1 开始的
    // 直接通过 第一 和 第二个 元素 判断是 最大堆 还是最小堆
    let type = arr[0] > arr[1] ? "MaxHeap" : "MinHeap";
    for (let i = 0; i < arr.length; i++) {
        const awaitForCompare = [arr[i]];
        [2 * (i + 1) - 1, 2 * (i + 1) - 1 + 1].forEach((index) => {
            if (index < arr.length) {
                awaitForCompare.push(arr[index]);
            }
        });
        if (type === "MaxHeap") {
            if (Math.max(...awaitForCompare) !== arr[i]) {
                return false;
            }
        }
        else {
            if (Math.min(...awaitForCompare) !== arr[i]) {
                return false;
            }
        }
    }
    return true;
}
exports.validHeap = validHeap;
const assert_1 = __importDefault(require("assert"));
const lodash_1 = __importDefault(require("lodash"));
assert_1.default.ok(validHeap([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]));
assert_1.default.ok(validHeap([10, 9, 8, 7, 6, 5, 4, 3, 2, 1]));
assert_1.default.ok(validHeap([10, 7, 2, 5, 1]));
assert_1.default.ok(validHeap([1, 5, 2, 7, 10]));
assert_1.default.strictEqual(validHeap([1, 5, 2, 7, 10, 1]), false);
assert_1.default.ok(validHeap(heapifyWithSiftUp(lodash_1.default.shuffle([
    2,
    2,
    1,
    1,
    4,
    5,
    6,
    7,
    8,
    9,
    0,
    1,
    2,
    2,
    1,
    2,
    2,
    1,
    2,
    2,
    1,
    2,
    2,
    1,
    2,
    2,
    1,
    2,
    2,
    1,
    2,
    2,
    1,
    2,
    2,
    1,
    2,
    2,
    1,
    2,
    2,
    1,
    2,
    2,
    1,
    2,
    2,
    1,
    2,
    2,
]))));
assert_1.default.ok(validHeap(heapifyWithSiftDown(lodash_1.default.shuffle([
    2,
    2,
    1,
    1,
    4,
    5,
    6,
    7,
    8,
    9,
    0,
    1,
    2,
    2,
    1,
    2,
    2,
    1,
    2,
    2,
    1,
    2,
    2,
    1,
    2,
    2,
    1,
    2,
    2,
    1,
    2,
    2,
    1,
    2,
    2,
    1,
    2,
    2,
    1,
    2,
    2,
    1,
    2,
    2,
    1,
    2,
    2,
    1,
    2,
    2,
]))));
/*

import Benchmark from "benchmark";

const suite = new Benchmark.Suite;
suite
    .add('heapifyWithSiftUp', function () {
        heapifyWithSiftUp([2, 2, 1, 1, 4, 5, 6, 7, 8, 9, 0, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2]);
    })
    .add('heapifyWithSiftDown', function () {
        heapifyWithSiftDown([2, 2, 1, 1, 4, 5, 6, 7, 8, 9, 0, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2]);
    })
    .on('cycle', function (event: Benchmark.Event) {
        console.log(String(event.target));
    })
    .on('complete', function (this: any) {
        console.log('Fastest is ' + this.filter('fastest').map('name'));
    })
    // run async
    .run({'async': false});

*/
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoi5aCG5YyWLmpzIiwic291cmNlUm9vdCI6Ii4vIiwic291cmNlcyI6WyLmlbDmja7nu5PmnoQv5aCG5YyWLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFpQkk7Ozs7OztBQUVKOzs7OztLQUtLO0FBQ0wsU0FBZ0IsaUJBQWlCLENBQUMsQ0FBVztJQUMzQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUNqQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0tBQ2Q7SUFDRCxPQUFPLENBQUMsQ0FBQztBQUNYLENBQUM7QUFMRCw4Q0FLQztBQUVELFNBQWdCLE1BQU0sQ0FBQyxDQUFXLEVBQUUsQ0FBUztJQUMzQyxVQUFVO0lBQ1YsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ2IsUUFBUTtRQUNSLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkMsNEJBQTRCO1FBQzVCLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUNwQixNQUFNO1NBQ1A7UUFDRCxlQUFlO1FBQ2YsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFdEMsMEJBQTBCO1FBQzFCLENBQUMsR0FBRyxNQUFNLENBQUM7S0FDWjtBQUNILENBQUM7QUFmRCx3QkFlQztBQUVELFNBQWdCLG1CQUFtQixDQUFDLENBQVc7SUFDN0Msa0JBQWtCO0lBQ2xCLEtBQUssSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FB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QyxFQUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3RELGdCQUFNLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN0RCxnQkFBTSxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3ZDLGdCQUFNLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdkMsZ0JBQU0sQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBRTFELGdCQUFNLENBQUMsRUFBRSxDQUNQLFNBQVMsQ0FDUCxpQkFBaUIsQ0FDZixnQkFBQyxDQUFDLE9BQU8sQ0FBQztJQUNSLENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0NBQ0YsQ0FBQyxDQUNILENBQ0YsQ0FDRixDQUFDO0FBRUYsZ0JBQU0sQ0FBQyxFQUFFLENBQ1AsU0FBUyxDQUNQLG1CQUFtQixDQUNqQixnQkFBQyxDQUFDLE9BQU8sQ0FBQztJQUNSLENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0lBQ0QsQ0FBQztJQUNELENBQUM7SUFDRCxDQUFDO0NBQ0YsQ0FBQyxDQUNILENBQ0YsQ0FDRixDQUFDO0FBRUY7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQXFCRSIsInNvdXJjZXNDb250ZW50IjpbIi8qXG7loIbvvIjoi7Hor63vvJpoZWFwKeaYr+iuoeeul+acuuenkeWtpuS4reS4gOexu+eJueauiueahOaVsOaNrue7k+aehOeahOe7n+ensOOAguWghumAmuW4uOaYr+S4gOS4quWPr+S7peiiq+eci+WBmuS4gOajteagkeeahOaVsOe7hOWvueixoeOAglxu5aCG5oC75piv5ruh6Laz5LiL5YiX5oCn6LSo77yaXG4gICAg5aCG5Lit5p+Q5Liq6IqC54K555qE5YC85oC75piv5LiN5aSn5LqO5oiW5LiN5bCP5LqO5YW254i26IqC54K555qE5YC877ybXG4gICAg5aCG5oC75piv5LiA5qO15a6M5YWo5LqM5Y+J5qCR44CCXG4gICAg5bCG5qC56IqC54K55pyA5aSn55qE5aCG5Y+r5YGa5pyA5aSn5aCG5oiW5aSn5qC55aCG77yM5qC56IqC54K55pyA5bCP55qE5aCG5Y+r5YGa5pyA5bCP5aCG5oiW5bCP5qC55aCG44CC5bi46KeB55qE5aCG5pyJ5LqM5Y+J5aCG44CB5paQ5rOi6YKj5aWR5aCG562J44CCXG4gICAg5aCG5piv6Z2e57q/5oCn5pWw5o2u57uT5p6E77yM55u45b2T5LqO5LiA57u05pWw57uE77yM5pyJ5Lik5Liq55u05o6l5ZCO57un44CCXG4gICAg5aCG55qE5a6a5LmJ5aaC5LiL77yabuS4quWFg+e0oOeahOW6j+WIl3trMSxrMixraSzigKYsa2595b2T5LiU5LuF5b2T5ruh6Laz5LiL5YWz57O75pe277yM56ew5LmL5Li65aCG44CCXG4gICAgKGtpIDw9IGsyaSxraSA8PSBrMmkrMSnmiJbogIUoa2kgPj0gazJpLGtpID49IGsyaSsxKSwgKGkgPSAxLDIsMyw0Li4ubi8yKVxuXG4gICAg6Iul5bCG5ZKM5q2k5qyh5bqP5YiX5a+55bqU55qE5LiA57u05pWw57uE77yI5Y2z5Lul5LiA57u05pWw57uE5L2c5q2k5bqP5YiX55qE5a2Y5YKo57uT5p6E77yJ55yL5oiQ5piv5LiA5Liq5a6M5YWo5LqM5Y+J5qCR77yMXG4gICAg5YiZ5aCG55qE5ZCr5LmJ6KGo5piO77yM5a6M5YWo5LqM5Y+J5qCR5Lit5omA5pyJ6Z2e57uI56uv57uT54K555qE5YC85Z2H5LiN5aSn5LqO77yI5oiW5LiN5bCP5LqO77yJ5YW25bem44CB5Y+z5a2p5a2Q57uT54K555qE5YC844CCXG4gICAg55Sx5q2k77yM6Iul5bqP5YiXe2sxLGsyLOKApixrbn3mmK/loIbvvIzliJnloIbpobblhYPntKDvvIjmiJblrozlhajkuozlj4nmoJHnmoTmoLnvvInlv4XkuLrluo/liJfkuK1u5Liq5YWD57Sg55qE5pyA5bCP5YC877yI5oiW5pyA5aSn5YC877yJ44CCXG5cbuWghueahOeUqOmAlCA6XG4gMS4g5aCG5o6S5bqPXG4gMi4g5aSn6aG25aCGKOacgOWkp+WghikgOiDlj6/ku6Xovbvmnb7ojrflj5Yg56ysIG4g5aSn55qE5pWwIDvlsI/pobbloIYo5pyA5bCP5aCGKSA6IOWPr+S7pei9u+advuiOt+WPliDnrKwgbiDlsI/nmoTmlbBcbiogKi9cblxuLyoqXG4gKiDlsIbml6Dluo/mlbDnu4TloIbljJZcbiAqIOacieS4pOenjeeul+azlVxuICogMS4gU2lmdFVwIOeul+azlSAgTyhubG9nbilcbiAqIDIuIFNpZnREb3duIOeul+azlSAgIE8obilcbiAqICovXG5leHBvcnQgZnVuY3Rpb24gaGVhcGlmeVdpdGhTaWZ0VXAoQTogbnVtYmVyW10pIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBBLmxlbmd0aDsgaSsrKSB7XG4gICAgc2lmdFVwKEEsIGkpO1xuICB9XG4gIHJldHVybiBBO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2lmdFVwKEE6IG51bWJlcltdLCBrOiBudW1iZXIpIHtcbiAgLy8g5q2k5aSE5pivIOacgOWwj+WghlxuICB3aGlsZSAoayAhPSAwKSB7XG4gICAgLy8g5om+5Yiw54i26IqC54K5XG4gICAgY29uc3QgZmF0aGVyID0gTWF0aC5mbG9vcigoayAtIDEpIC8gMik7XG4gICAgLy8g5aaC5p6c54i26IqC54K5ID4g5paw5Yqg5YWl55qE6IqC54K5IOespuWQiCDloIYg57uT5p2fIOivpei9rlxuICAgIGlmIChBW2tdID4gQVtmYXRoZXJdKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgLy8g5Y+N5LmLIOmCo+S5iCDkuqTmjaLkuKTkuKroioLngrlcbiAgICBbQVtrXSwgQVtmYXRoZXJdXSA9IFtBW2ZhdGhlcl0sIEFba11dO1xuXG4gICAgLy8g546w5ZyoIOeOsOWcqOaWsOWKoOWFpeeahOiKgueCuSDnjrDlnKjlnKgg5Y6f5p2l55qE54i26IqC54K55LiKXG4gICAgayA9IGZhdGhlcjtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaGVhcGlmeVdpdGhTaWZ0RG93bihBOiBudW1iZXJbXSkge1xuICAvLyDliJ3lp4vpgInmi6nmnIDmjqXov5Hlj7blrZDnmoTkuIDkuKrniLbnu5PngrlcbiAgZm9yIChsZXQgaSA9IE1hdGguZmxvb3IoKEEubGVuZ3RoIC0gMSkgLyAyKTsgaSA+PSAwOyBpLS0pIHtcbiAgICBzaWZ0RG93bihBLCBpKTtcbiAgfVxuXG4gIHJldHVybiBBO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2lmdERvd24oQTogbnVtYmVyW10sIGs6IG51bWJlcikge1xuICAvLyDmraTlpITmmK8g5pyA5bCP5aCGXG4gIHdoaWxlIChrICogMiArIDEgPCBBLmxlbmd0aCkge1xuICAgIGxldCBzb24gPSBrICogMiArIDE7XG4gICAgLy8g5LiO5YW25Lik5Liq5YS/5a2Q5Lit6L6D5bCP55qE5LiA5Liq5q+U6L6DXG4gICAgaWYgKGsgKiAyICsgMiA8IEEubGVuZ3RoICYmIEFbc29uXSA+IEFbayAqIDIgKyAyXSkge1xuICAgICAgc29uID0gayAqIDIgKyAyO1xuICAgIH1cblxuICAgIC8vIOiLpeWkp+S6juWEv+WtkO+8jOWImeS4juWEv+WtkOS6pOaNouOAglxuICAgIGlmIChBW3Nvbl0gPiBBW2tdKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgW0Fbc29uXSwgQVtrXV0gPSBbQVtrXSwgQVtzb25dXTtcbiAgICAvLyDkuqTmjaLlkI7lho3kuI7mlrDnmoTlhL/lrZDmr5TovoPlubbkuqTmjaLvvIznm7Toh7PmsqHmnInlhL/lrZDjgIJcbiAgICBrID0gc29uO1xuICB9XG59XG5cbi8qKlxuICog55So5LqO6aqM6K+B5pWw57uEIOaYr+S4jeaYr+S4gOS4quWghlxuICogKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZEhlYXAoYXJyOiBudW1iZXJbXSkge1xuICBpZiAoYXJyLmxlbmd0aCA8PSAyKSByZXR1cm4gdHJ1ZTtcbiAgLy8g5Lmf5bCx5piv56ym5ZCIIChraSA8PSBrMmksa2kgPD0gazJpKzEp5oiW6ICFKGtpID49IGsyaSxraSA+PSBrMmkrMSksIChpID0gMSwyLDMsNC4uLm4vMikgaSDmmK8g5LuOMSDlvIDlp4vnmoRcbiAgLy8g55u05o6l6YCa6L+HIOesrOS4gCDlkowg56ys5LqM5LiqIOWFg+e0oCDliKTmlq3mmK8g5pyA5aSn5aCGIOi/mOaYr+acgOWwj+WghlxuICBsZXQgdHlwZSA9IGFyclswXSA+IGFyclsxXSA/IFwiTWF4SGVhcFwiIDogXCJNaW5IZWFwXCI7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBhd2FpdEZvckNvbXBhcmUgPSBbYXJyW2ldXTtcbiAgICBbMiAqIChpICsgMSkgLSAxLCAyICogKGkgKyAxKSAtIDEgKyAxXS5mb3JFYWNoKChpbmRleCkgPT4ge1xuICAgICAgaWYgKGluZGV4IDwgYXJyLmxlbmd0aCkge1xuICAgICAgICBhd2FpdEZvckNvbXBhcmUucHVzaChhcnJbaW5kZXhdKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAodHlwZSA9PT0gXCJNYXhIZWFwXCIpIHtcbiAgICAgIGlmIChNYXRoLm1heCguLi5hd2FpdEZvckNvbXBhcmUpICE9PSBhcnJbaV0pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoTWF0aC5taW4oLi4uYXdhaXRGb3JDb21wYXJlKSAhPT0gYXJyW2ldKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuaW1wb3J0IGFzc2VydCBmcm9tIFwiYXNzZXJ0XCI7XG5pbXBvcnQgXyBmcm9tIFwibG9kYXNoXCI7XG5cbmFzc2VydC5vayh2YWxpZEhlYXAoWzEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwXSkpO1xuYXNzZXJ0Lm9rKHZhbGlkSGVhcChbMTAsIDksIDgsIDcsIDYsIDUsIDQsIDMsIDIsIDFdKSk7XG5hc3NlcnQub2sodmFsaWRIZWFwKFsxMCwgNywgMiwgNSwgMV0pKTtcbmFzc2VydC5vayh2YWxpZEhlYXAoWzEsIDUsIDIsIDcsIDEwXSkpO1xuYXNzZXJ0LnN0cmljdEVxdWFsKHZhbGlkSGVhcChbMSwgNSwgMiwgNywgMTAsIDFdKSwgZmFsc2UpO1xuXG5hc3NlcnQub2soXG4gIHZhbGlkSGVhcChcbiAgICBoZWFwaWZ5V2l0aFNpZnRVcChcbiAgICAgIF8uc2h1ZmZsZShbXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDEsXG4gICAgICAgIDQsXG4gICAgICAgIDUsXG4gICAgICAgIDYsXG4gICAgICAgIDcsXG4gICAgICAgIDgsXG4gICAgICAgIDksXG4gICAgICAgIDAsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICBdKVxuICAgIClcbiAgKVxuKTtcblxuYXNzZXJ0Lm9rKFxuICB2YWxpZEhlYXAoXG4gICAgaGVhcGlmeVdpdGhTaWZ0RG93bihcbiAgICAgIF8uc2h1ZmZsZShbXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDEsXG4gICAgICAgIDQsXG4gICAgICAgIDUsXG4gICAgICAgIDYsXG4gICAgICAgIDcsXG4gICAgICAgIDgsXG4gICAgICAgIDksXG4gICAgICAgIDAsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICAgIDEsXG4gICAgICAgIDIsXG4gICAgICAgIDIsXG4gICAgICBdKVxuICAgIClcbiAgKVxuKTtcblxuLypcblxuaW1wb3J0IEJlbmNobWFyayBmcm9tIFwiYmVuY2htYXJrXCI7XG5cbmNvbnN0IHN1aXRlID0gbmV3IEJlbmNobWFyay5TdWl0ZTtcbnN1aXRlXG4gICAgLmFkZCgnaGVhcGlmeVdpdGhTaWZ0VXAnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGhlYXBpZnlXaXRoU2lmdFVwKFsyLCAyLCAxLCAxLCA0LCA1LCA2LCA3LCA4LCA5LCAwLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyXSk7XG4gICAgfSlcbiAgICAuYWRkKCdoZWFwaWZ5V2l0aFNpZnREb3duJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBoZWFwaWZ5V2l0aFNpZnREb3duKFsyLCAyLCAxLCAxLCA0LCA1LCA2LCA3LCA4LCA5LCAwLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyLCAxLCAyLCAyXSk7XG4gICAgfSlcbiAgICAub24oJ2N5Y2xlJywgZnVuY3Rpb24gKGV2ZW50OiBCZW5jaG1hcmsuRXZlbnQpIHtcbiAgICAgICAgY29uc29sZS5sb2coU3RyaW5nKGV2ZW50LnRhcmdldCkpO1xuICAgIH0pXG4gICAgLm9uKCdjb21wbGV0ZScsIGZ1bmN0aW9uICh0aGlzOiBhbnkpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0Zhc3Rlc3QgaXMgJyArIHRoaXMuZmlsdGVyKCdmYXN0ZXN0JykubWFwKCduYW1lJykpO1xuICAgIH0pXG4gICAgLy8gcnVuIGFzeW5jXG4gICAgLnJ1bih7J2FzeW5jJzogZmFsc2V9KTtcblxuKi9cbiJdfQ==