"use strict";
/*
堆（英语：heap)是计算机科学中一类特殊的数据结构的统称。堆通常是一个可以被看做一棵树的数组对象。
堆总是满足下列性质：
    堆中某个节点的值总是不大于或不小于其父节点的值；
    堆总是一棵完全二叉树。
    将根节点最大的堆叫做最大堆或大根堆，根节点最小的堆叫做最小堆或小根堆。常见的堆有二叉堆、斐波那契堆等。
    堆是非线性数据结构，相当于一维数组，有两个直接后继。
    堆的定义如下：n个元素的序列{k1,k2,ki,…,kn}当且仅当满足下关系时，称之为堆。
    (ki <= k2i,ki <= k2i+1)或者(ki >= k2i,ki >= k2i+1), (i = 1,2,3,4...n/2)

    若将和此次序列对应的一维数组（即以一维数组作此序列的存储结构）看成是一个完全二叉树，
    则堆的含义表明，完全二叉树中所有非终端结点的值均不大于（或不小于）其左、右孩子结点的值。
    由此，若序列{k1,k2,…,kn}是堆，则堆顶元素（或完全二叉树的根）必为序列中n个元素的最小值（或最大值）。

堆的用途 :
 1. 堆排序
 2. 大顶堆(最大堆) : 可以轻松获取 第 n 大的数 ;小顶堆(最小堆) : 可以轻松获取 第 n 小的数
* */
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * 将无序数组堆化
 * 有两种算法
 * 1. SiftUp 算法  O(nlogn)
 * 2. SiftDown 算法   O(n)
 * */
function heapifyWithSiftUp(A) {
    for (let i = 0; i < A.length; i++) {
        siftUp(A, i);
    }
    return A;
}
exports.heapifyWithSiftUp = heapifyWithSiftUp;
function siftUp(A, k) {
    // 此处是 最小堆
    while (k != 0) {
        // 找到父节点
        const father = Math.floor((k - 1) / 2);
        // 如果父节点 > 新加入的节点 符合 堆 结束 该轮
        if (A[k] > A[father]) {
            break;
        }
        // 反之 那么 交换两个节点
        [A[k], A[father]] = [A[father], A[k]];
        // 现在 现在新加入的节点 现在在 原来的父节点上
        k = father;
    }
}
exports.siftUp = siftUp;
function heapifyWithSiftDown(A) {
    // 初始选择最接近叶子的一个父结点
    for (let i = Math.floor((A.length - 1) / 2); i >= 0; i--) {
        siftDown(A, i);
    }
    return A;
}
exports.heapifyWithSiftDown = heapifyWithSiftDown;
function siftDown(A, k) {
    // 此处是 最小堆
    while (k * 2 + 1 < A.length) {
        let son = k * 2 + 1;
        // 与其两个儿子中较小的一个比较
        if (k * 2 + 2 < A.length && A[son] > A[k * 2 + 2]) {
            son = k * 2 + 2;
        }
        // 若大于儿子，则与儿子交换。
        if (A[son] > A[k]) {
            break;
        }
        [A[son], A[k]] = [A[k], A[son]];
        // 交换后再与新的儿子比较并交换，直至没有儿子。
        k = son;
    }
}
exports.siftDown = siftDown;
/**
 * 用于验证数组 是不是一个堆
 * */
function validHeap(arr) {
    if (arr.length <= 2)
        return true;
    // 也就是符合 (ki <= k2i,ki <= k2i+1)或者(ki >= k2i,ki >= k2i+1), (i = 1,2,3,4...n/2) i 是 从1 开始的
    // 直接通过 第一 和 第二个 元素 判断是 最大堆 还是最小堆
    let type = arr[0] > arr[1] ? 'MaxHeap' : 'MinHeap';
    for (let i = 0; i < arr.length; i++) {
        const awaitForCompare = [arr[i]];
        [2 * (i + 1) - 1, 2 * (i + 1) - 1 + 1].forEach(index => {
            if (index < arr.length) {
                awaitForCompare.push(arr[index]);
            }
        });
        if (type === "MaxHeap") {
            if (Math.max(...awaitForCompare) !== arr[i]) {
                return false;
            }
        }
        else {
            if (Math.min(...awaitForCompare) !== arr[i]) {
                return false;
            }
        }
    }
    return true;
}
exports.validHeap = validHeap;
const assert_1 = __importDefault(require("assert"));
const lodash_1 = __importDefault(require("lodash"));
assert_1.default.ok(validHeap([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]));
assert_1.default.ok(validHeap([10, 9, 8, 7, 6, 5, 4, 3, 2, 1]));
assert_1.default.ok(validHeap([10, 7, 2, 5, 1]));
assert_1.default.ok(validHeap([1, 5, 2, 7, 10]));
assert_1.default.strictEqual(validHeap([1, 5, 2, 7, 10, 1]), false);
assert_1.default.ok(validHeap(heapifyWithSiftUp(lodash_1.default.shuffle([2, 2, 1, 1, 4, 5, 6, 7, 8, 9, 0, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2]))));
assert_1.default.ok(validHeap(heapifyWithSiftDown(lodash_1.default.shuffle([2, 2, 1, 1, 4, 5, 6, 7, 8, 9, 0, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2]))));
/*

import Benchmark from "benchmark";

const suite = new Benchmark.Suite;
suite
    .add('heapifyWithSiftUp', function () {
        heapifyWithSiftUp([2, 2, 1, 1, 4, 5, 6, 7, 8, 9, 0, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2]);
    })
    .add('heapifyWithSiftDown', function () {
        heapifyWithSiftDown([2, 2, 1, 1, 4, 5, 6, 7, 8, 9, 0, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2, 1, 2, 2]);
    })
    .on('cycle', function (event: Benchmark.Event) {
        console.log(String(event.target));
    })
    .on('complete', function (this: any) {
        console.log('Fastest is ' + this.filter('fastest').map('name'));
    })
    // run async
    .run({'async': false});

*/
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoi5aCG5YyWLmpzIiwic291cmNlUm9vdCI6Ii4vIiwic291cmNlcyI6WyLmlbDmja7nu5PmnoQv5aCG5YyWLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFpQkk7Ozs7O0FBR0o7Ozs7O0tBS0s7QUFDTCxTQUFnQixpQkFBaUIsQ0FBQyxDQUFXO0lBQ3pDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQy9CLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7S0FDaEI7SUFDRCxPQUFPLENBQUMsQ0FBQztBQUNiLENBQUM7QUFMRCw4Q0FLQztBQUVELFNBQWdCLE1BQU0sQ0FBQyxDQUFXLEVBQUUsQ0FBUztJQUN6QyxVQUFVO0lBQ1YsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ1gsUUFBUTtRQUNSLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdkMsNEJBQTRCO1FBQzVCLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUNsQixNQUFNO1NBQ1Q7UUFDRCxlQUFlO1FBQ2YsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFdEMsMEJBQTBCO1FBQzFCLENBQUMsR0FBRyxNQUFNLENBQUM7S0FDZDtBQUNMLENBQUM7QUFmRCx3QkFlQztBQUVELFNBQWdCLG1CQUFtQixDQUFDLENBQVc7SUFDM0Msa0JBQWtCO0lBQ2xCLEtBQUssSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FB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QUFFLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3RELGdCQUFNLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN0RCxnQkFBTSxDQUFDLEVBQUUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3ZDLGdCQUFNLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdkMsZ0JBQU0sQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBRTFELGdCQUFNLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FDZixpQkFBaUIsQ0FDYixnQkFBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUNwSyxDQUNKLENBQUMsQ0FBQztBQUVILGdCQUFNLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FDZixtQkFBbUIsQ0FDZixnQkFBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUNwSyxDQUNKLENBQUMsQ0FBQztBQUVIOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUFxQkUiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG7loIbvvIjoi7Hor63vvJpoZWFwKeaYr+iuoeeul+acuuenkeWtpuS4reS4gOexu+eJueauiueahOaVsOaNrue7k+aehOeahOe7n+ensOOAguWghumAmuW4uOaYr+S4gOS4quWPr+S7peiiq+eci+WBmuS4gOajteagkeeahOaVsOe7hOWvueixoeOAglxyXG7loIbmgLvmmK/mu6HotrPkuIvliJfmgKfotKjvvJpcclxuICAgIOWghuS4reafkOS4quiKgueCueeahOWAvOaAu+aYr+S4jeWkp+S6juaIluS4jeWwj+S6juWFtueItuiKgueCueeahOWAvO+8m1xyXG4gICAg5aCG5oC75piv5LiA5qO15a6M5YWo5LqM5Y+J5qCR44CCXHJcbiAgICDlsIbmoLnoioLngrnmnIDlpKfnmoTloIblj6vlgZrmnIDlpKfloIbmiJblpKfmoLnloIbvvIzmoLnoioLngrnmnIDlsI/nmoTloIblj6vlgZrmnIDlsI/loIbmiJblsI/moLnloIbjgILluLjop4HnmoTloIbmnInkuozlj4nloIbjgIHmlpDms6LpgqPlpZHloIbnrYnjgIJcclxuICAgIOWghuaYr+mdnue6v+aAp+aVsOaNrue7k+aehO+8jOebuOW9k+S6juS4gOe7tOaVsOe7hO+8jOacieS4pOS4quebtOaOpeWQjue7p+OAglxyXG4gICAg5aCG55qE5a6a5LmJ5aaC5LiL77yabuS4quWFg+e0oOeahOW6j+WIl3trMSxrMixraSzigKYsa2595b2T5LiU5LuF5b2T5ruh6Laz5LiL5YWz57O75pe277yM56ew5LmL5Li65aCG44CCXHJcbiAgICAoa2kgPD0gazJpLGtpIDw9IGsyaSsxKeaIluiAhShraSA+PSBrMmksa2kgPj0gazJpKzEpLCAoaSA9IDEsMiwzLDQuLi5uLzIpXHJcblxyXG4gICAg6Iul5bCG5ZKM5q2k5qyh5bqP5YiX5a+55bqU55qE5LiA57u05pWw57uE77yI5Y2z5Lul5LiA57u05pWw57uE5L2c5q2k5bqP5YiX55qE5a2Y5YKo57uT5p6E77yJ55yL5oiQ5piv5LiA5Liq5a6M5YWo5LqM5Y+J5qCR77yMXHJcbiAgICDliJnloIbnmoTlkKvkuYnooajmmI7vvIzlrozlhajkuozlj4nmoJHkuK3miYDmnInpnZ7nu4jnq6/nu5PngrnnmoTlgLzlnYfkuI3lpKfkuo7vvIjmiJbkuI3lsI/kuo7vvInlhbblt6bjgIHlj7PlranlrZDnu5PngrnnmoTlgLzjgIJcclxuICAgIOeUseatpO+8jOiLpeW6j+WIl3trMSxrMizigKYsa2595piv5aCG77yM5YiZ5aCG6aG25YWD57Sg77yI5oiW5a6M5YWo5LqM5Y+J5qCR55qE5qC577yJ5b+F5Li65bqP5YiX5LitbuS4quWFg+e0oOeahOacgOWwj+WAvO+8iOaIluacgOWkp+WAvO+8ieOAglxyXG5cclxu5aCG55qE55So6YCUIDpcclxuIDEuIOWghuaOkuW6j1xyXG4gMi4g5aSn6aG25aCGKOacgOWkp+WghikgOiDlj6/ku6Xovbvmnb7ojrflj5Yg56ysIG4g5aSn55qE5pWwIDvlsI/pobbloIYo5pyA5bCP5aCGKSA6IOWPr+S7pei9u+advuiOt+WPliDnrKwgbiDlsI/nmoTmlbBcclxuKiAqL1xyXG5cclxuXHJcbi8qKlxyXG4gKiDlsIbml6Dluo/mlbDnu4TloIbljJZcclxuICog5pyJ5Lik56eN566X5rOVXHJcbiAqIDEuIFNpZnRVcCDnrpfms5UgIE8obmxvZ24pXHJcbiAqIDIuIFNpZnREb3duIOeul+azlSAgIE8obilcclxuICogKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGhlYXBpZnlXaXRoU2lmdFVwKEE6IG51bWJlcltdKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IEEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBzaWZ0VXAoQSwgaSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gQTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNpZnRVcChBOiBudW1iZXJbXSwgazogbnVtYmVyKSB7XHJcbiAgICAvLyDmraTlpITmmK8g5pyA5bCP5aCGXHJcbiAgICB3aGlsZSAoayAhPSAwKSB7XHJcbiAgICAgICAgLy8g5om+5Yiw54i26IqC54K5XHJcbiAgICAgICAgY29uc3QgZmF0aGVyID0gTWF0aC5mbG9vcigoayAtIDEpIC8gMik7XHJcbiAgICAgICAgLy8g5aaC5p6c54i26IqC54K5ID4g5paw5Yqg5YWl55qE6IqC54K5IOespuWQiCDloIYg57uT5p2fIOivpei9rlxyXG4gICAgICAgIGlmIChBW2tdID4gQVtmYXRoZXJdKSB7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDlj43kuYsg6YKj5LmIIOS6pOaNouS4pOS4quiKgueCuVxyXG4gICAgICAgIFtBW2tdLCBBW2ZhdGhlcl1dID0gW0FbZmF0aGVyXSwgQVtrXV07XHJcblxyXG4gICAgICAgIC8vIOeOsOWcqCDnjrDlnKjmlrDliqDlhaXnmoToioLngrkg546w5Zyo5ZyoIOWOn+adpeeahOeItuiKgueCueS4ilxyXG4gICAgICAgIGsgPSBmYXRoZXI7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoZWFwaWZ5V2l0aFNpZnREb3duKEE6IG51bWJlcltdKSB7XHJcbiAgICAvLyDliJ3lp4vpgInmi6nmnIDmjqXov5Hlj7blrZDnmoTkuIDkuKrniLbnu5PngrlcclxuICAgIGZvciAobGV0IGkgPSBNYXRoLmZsb29yKChBLmxlbmd0aCAtIDEpIC8gMik7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgc2lmdERvd24oQSwgaSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIEE7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzaWZ0RG93bihBOiBudW1iZXJbXSwgazogbnVtYmVyKSB7XHJcbiAgICAvLyDmraTlpITmmK8g5pyA5bCP5aCGXHJcbiAgICB3aGlsZSAoayAqIDIgKyAxIDwgQS5sZW5ndGgpIHtcclxuICAgICAgICBsZXQgc29uID0gayAqIDIgKyAxO1xyXG4gICAgICAgIC8vIOS4juWFtuS4pOS4quWEv+WtkOS4rei+g+Wwj+eahOS4gOS4quavlOi+g1xyXG4gICAgICAgIGlmIChrICogMiArIDIgPCBBLmxlbmd0aCAmJiBBW3Nvbl0gPiBBW2sgKiAyICsgMl0pIHtcclxuICAgICAgICAgICAgc29uID0gayAqIDIgKyAyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g6Iul5aSn5LqO5YS/5a2Q77yM5YiZ5LiO5YS/5a2Q5Lqk5o2i44CCXHJcbiAgICAgICAgaWYgKEFbc29uXSA+IEFba10pIHtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFtBW3Nvbl0sIEFba11dID0gW0Fba10sIEFbc29uXV07XHJcbiAgICAgICAgLy8g5Lqk5o2i5ZCO5YaN5LiO5paw55qE5YS/5a2Q5q+U6L6D5bm25Lqk5o2i77yM55u06Iez5rKh5pyJ5YS/5a2Q44CCXHJcbiAgICAgICAgayA9IHNvbjtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIOeUqOS6jumqjOivgeaVsOe7hCDmmK/kuI3mmK/kuIDkuKrloIZcclxuICogKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkSGVhcChhcnI6IG51bWJlcltdKSB7XHJcbiAgICBpZiAoYXJyLmxlbmd0aCA8PSAyKSByZXR1cm4gdHJ1ZTtcclxuICAgIC8vIOS5n+WwseaYr+espuWQiCAoa2kgPD0gazJpLGtpIDw9IGsyaSsxKeaIluiAhShraSA+PSBrMmksa2kgPj0gazJpKzEpLCAoaSA9IDEsMiwzLDQuLi5uLzIpIGkg5pivIOS7jjEg5byA5aeL55qEXHJcbiAgICAvLyDnm7TmjqXpgJrov4cg56ys5LiAIOWSjCDnrKzkuozkuKog5YWD57SgIOWIpOaWreaYryDmnIDlpKfloIYg6L+Y5piv5pyA5bCP5aCGXHJcbiAgICBsZXQgdHlwZSA9IGFyclswXSA+IGFyclsxXSA/ICdNYXhIZWFwJyA6ICdNaW5IZWFwJztcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGF3YWl0Rm9yQ29tcGFyZSA9IFthcnJbaV1dO1xyXG4gICAgICAgIFsyICogKGkgKyAxKSAtIDEsIDIgKiAoaSArIDEpIC0gMSArIDFdLmZvckVhY2goaW5kZXggPT4ge1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPCBhcnIubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdEZvckNvbXBhcmUucHVzaChhcnJbaW5kZXhdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICh0eXBlID09PSBcIk1heEhlYXBcIikge1xyXG4gICAgICAgICAgICBpZiAoTWF0aC5tYXgoLi4uYXdhaXRGb3JDb21wYXJlKSAhPT0gYXJyW2ldKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoTWF0aC5taW4oLi4uYXdhaXRGb3JDb21wYXJlKSAhPT0gYXJyW2ldKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbmltcG9ydCBhc3NlcnQgZnJvbSAnYXNzZXJ0JztcclxuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcclxuXHJcblxyXG5hc3NlcnQub2sodmFsaWRIZWFwKFsxLCAyLCAzLCA0LCA1LCA2LCA3LCA4LCA5LCAxMF0pKTtcclxuYXNzZXJ0Lm9rKHZhbGlkSGVhcChbMTAsIDksIDgsIDcsIDYsIDUsIDQsIDMsIDIsIDFdKSk7XHJcbmFzc2VydC5vayh2YWxpZEhlYXAoWzEwLCA3LCAyLCA1LCAxXSkpO1xyXG5hc3NlcnQub2sodmFsaWRIZWFwKFsxLCA1LCAyLCA3LCAxMF0pKTtcclxuYXNzZXJ0LnN0cmljdEVxdWFsKHZhbGlkSGVhcChbMSwgNSwgMiwgNywgMTAsIDFdKSwgZmFsc2UpO1xyXG5cclxuYXNzZXJ0Lm9rKHZhbGlkSGVhcChcclxuICAgIGhlYXBpZnlXaXRoU2lmdFVwKFxyXG4gICAgICAgIF8uc2h1ZmZsZShbMiwgMiwgMSwgMSwgNCwgNSwgNiwgNywgOCwgOSwgMCwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMiwgMSwgMiwgMl0pLFxyXG4gICAgKSxcclxuKSk7XHJcblxyXG5hc3NlcnQub2sodmFsaWRIZWFwKFxyXG4gICAgaGVhcGlmeVdpdGhTaWZ0RG93bihcclxuICAgICAgICBfLnNodWZmbGUoWzIsIDIsIDEsIDEsIDQsIDUsIDYsIDcsIDgsIDksIDAsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDJdKSxcclxuICAgICksXHJcbikpO1xyXG5cclxuLypcclxuXHJcbmltcG9ydCBCZW5jaG1hcmsgZnJvbSBcImJlbmNobWFya1wiO1xyXG5cclxuY29uc3Qgc3VpdGUgPSBuZXcgQmVuY2htYXJrLlN1aXRlO1xyXG5zdWl0ZVxyXG4gICAgLmFkZCgnaGVhcGlmeVdpdGhTaWZ0VXAnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaGVhcGlmeVdpdGhTaWZ0VXAoWzIsIDIsIDEsIDEsIDQsIDUsIDYsIDcsIDgsIDksIDAsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDJdKTtcclxuICAgIH0pXHJcbiAgICAuYWRkKCdoZWFwaWZ5V2l0aFNpZnREb3duJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGhlYXBpZnlXaXRoU2lmdERvd24oWzIsIDIsIDEsIDEsIDQsIDUsIDYsIDcsIDgsIDksIDAsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDIsIDEsIDIsIDJdKTtcclxuICAgIH0pXHJcbiAgICAub24oJ2N5Y2xlJywgZnVuY3Rpb24gKGV2ZW50OiBCZW5jaG1hcmsuRXZlbnQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhTdHJpbmcoZXZlbnQudGFyZ2V0KSk7XHJcbiAgICB9KVxyXG4gICAgLm9uKCdjb21wbGV0ZScsIGZ1bmN0aW9uICh0aGlzOiBhbnkpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnRmFzdGVzdCBpcyAnICsgdGhpcy5maWx0ZXIoJ2Zhc3Rlc3QnKS5tYXAoJ25hbWUnKSk7XHJcbiAgICB9KVxyXG4gICAgLy8gcnVuIGFzeW5jXHJcbiAgICAucnVuKHsnYXN5bmMnOiBmYWxzZX0pO1xyXG5cclxuKi9cclxuIl19