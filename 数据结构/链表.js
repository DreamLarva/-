"use strict";
/**
 * 当数组很长时
 * 每当要数组删除或者增加中的元素,则之后素有的元素下表都要+1,导致的了性能的下降
 * 这个时候需要链表,删除添加只改变前节点的属性
 * es6中对应的数据格式是 set(但是没有头尾节点 虽然本来就没啥用)
 **/
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * node类
 * 链表中的每个节点的基础类型
 * */
class Node {
    constructor(element) {
        this.next = null;
        this.element = element;
    }
}
/**
 * LinkedList 类
 * head 头结点
 * find 查找节点
 * insert 插入节点
 * remove  删除节点
 * display 输出所有节点
 **/
class LList {
    constructor(arr) {
        if (!(Array.isArray(arr) || arr == null))
            throw new Error("param must be an Array or none");
        this.head = this.end = new Node(null);
        if (arr != null) {
            for (let i = 0, length = arr.length; i < length; i++) {
                this.insert(arr[i], this.end);
            }
        }
    }
    /**
     * 插入新的节点
     * @param newElement 插入的内容
     * @param prevElement 插入的位置的前一个节点
     * 返回值是 新建的节点
     * */
    insert(newElement, prevElement = this.end) {
        const newNode = new Node(newElement); // new 新节点
        let current;
        if (prevElement instanceof Node) {
            current = prevElement; // 直接使用节点
        }
        else if (prevElement == null) {
            current = this.head;
        }
        else {
            current = this.find(prevElement); // 找到目标节点
            if (current == null)
                return null; // 没有找到 ts 又立功了
        }
        /*
        if (this.find(newElement)) { // 性能最大的消耗如果 每次都检索是不是已经有该值的节点
            throw new Error(newElement + "has already existed!"); // 如果已经有该值的节点就报错
        } else if (prevElement instanceof Node) {
            current = prevElement; // 直接使用节点
        } else {
            current = this.find(prevElement); // 找到目标节点
        }
        */
        newNode.next = current.next; // 新节点的next为 前一个节点的next
        current.next = newNode; // 前一个节点的next 为新节点
        if (current == this.end) {
            this.end = newNode;
        }
        return newNode; // 返回新的节点 按次序插入很多节点时直接确认第二个参数
    }
    ;
    /**
     * 查找节点
     * @element 节点element中的内容
     * @fromNode 从哪个节点后开始查找 默认值是从head开始
     * 返回值 找到的节点  || null
     **/
    find(element, fromNode = this.head) {
        let currNode = fromNode;
        while (currNode) {
            if (currNode.element === element)
                return currNode;
            currNode = currNode.next;
        }
        return null;
    }
    ;
    insertArr(arr, prevElement = this.end) {
        let current;
        if (prevElement instanceof Node) {
            current = prevElement; // 直接使用节点
        }
        else if (prevElement == null) {
            current = this.head;
        }
        else {
            current = this.find(prevElement); // 找到目标节点
            if (current == null)
                return null; // 没有找到 ts 又立功了
        }
        for (let i = 0; i < arr.length; i++) {
            current = this.insert(arr[i], current);
        }
    }
    ;
    display() {
        let currNode = this.head;
        while (!(currNode.next == null)) {
            console.log(currNode.next.element);
            currNode = currNode.next;
        }
    }
    ;
    remove(element) {
        const prevNode = this.findPrevious(element);
        if (!(prevNode.next == null)) {
            prevNode.next = prevNode.next.next; // 将前一个节点的值next 指向 下下个元素
        }
    }
    ;
    findPrevious(element) {
        let currNode = this.head;
        while (!(currNode.next == null) && (currNode.next.element != element)) {
            currNode = currNode.next;
        }
        return currNode;
    }
    ;
}
const cities = new LList(["Conway", "Russellville", "Alma"]);
cities.insert("afterHead", null);
cities.insert("afterHead2", "afterHead");
cities.display();
// 测试性能
console.time("createArr");
const testArr = [null];
for (let i = 0; i < 999999; i++) {
    testArr.push(i);
}
console.timeEnd("createArr");
testArr.shift();
console.time("createLList");
const testLList = new LList(testArr);
console.timeEnd("createLList");
// 新建 数组比链表块 4-10倍
// set 数据结构
console.time("createSet");
console.timeEnd("createSet");
// 比原生的set快 差距应该就在检查 去重上面
console.time("arrAdd");
testArr.splice(1, 0, "first");
testArr.splice(2, 0, "second", "third");
console.timeEnd("arrAdd");
console.time("LListAdd");
testLList.insert("first", null);
testLList.insertArr(["second", "third"], "first");
console.timeEnd("LListAdd");
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoi6ZO+6KGoLmpzIiwic291cmNlUm9vdCI6Ii4vIiwic291cmNlcyI6WyLmlbDmja7nu5PmnoQv6ZO+6KGoLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7SUFLSTs7QUFFSjs7O0tBR0s7QUFDTCxNQUFNLElBQUk7SUFJTixZQUFZLE9BQVU7UUFGdEIsU0FBSSxHQUFtQixJQUFJLENBQUM7UUFHeEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7SUFDM0IsQ0FBQztDQUNKO0FBRUQ7Ozs7Ozs7SUFPSTtBQUNKLE1BQU0sS0FBSztJQUlQLFlBQVksR0FBUTtRQUNoQixJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUM7WUFBRSxNQUFNLElBQUksS0FBSyxDQUFDLGdDQUFnQyxDQUFDLENBQUM7UUFDNUYsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3RDLElBQUksR0FBRyxJQUFJLElBQUksRUFBRTtZQUNiLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLE1BQU0sR0FBRyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7Z0JBQ2xELElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQzthQUNqQztTQUNKO0lBQ0wsQ0FBQztJQUVEOzs7OztTQUtLO0lBQ0wsTUFBTSxDQUFDLFVBQW9CLEVBQUUsY0FBeUMsSUFBSSxDQUFDLEdBQUc7UUFDMUUsTUFBTSxPQUFPLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxVQUFVO1FBQ2hELElBQUksT0FBTyxDQUFDO1FBQ1osSUFBSSxXQUFXLFlBQVksSUFBSSxFQUFFO1lBQzdCLE9BQU8s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LENBQUM7QUFDN0IseUJBQXlCO0FBR3pCLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDdkIsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQzlCLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDeEMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUUxQixPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ3pCLFNBQVMsQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ2hDLFNBQVMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDbEQsT0FBTyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDlvZPmlbDnu4Tlvojplb/ml7ZcclxuICog5q+P5b2T6KaB5pWw57uE5Yig6Zmk5oiW6ICF5aKe5Yqg5Lit55qE5YWD57SgLOWImeS5i+WQjue0oOacieeahOWFg+e0oOS4i+ihqOmDveimgSsxLOWvvOiHtOeahOS6huaAp+iDveeahOS4i+mZjVxyXG4gKiDov5nkuKrml7blgJnpnIDopoHpk77ooags5Yig6Zmk5re75Yqg5Y+q5pS55Y+Y5YmN6IqC54K555qE5bGe5oCnXHJcbiAqIGVzNuS4reWvueW6lOeahOaVsOaNruagvOW8j+aYryBzZXQo5L2G5piv5rKh5pyJ5aS05bC+6IqC54K5IOiZveeEtuacrOadpeWwseayoeWVpeeUqClcclxuICoqL1xyXG5cclxuLyoqXHJcbiAqIG5vZGXnsbtcclxuICog6ZO+6KGo5Lit55qE5q+P5Liq6IqC54K555qE5Z+656GA57G75Z6LXHJcbiAqICovXHJcbmNsYXNzIE5vZGU8VD4ge1xyXG4gICAgZWxlbWVudDogVCB8IG51bGw7XHJcbiAgICBuZXh0OiBOb2RlPFQ+IHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZWxlbWVudDogVCkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMaW5rZWRMaXN0IOexu1xyXG4gKiBoZWFkIOWktOe7k+eCuVxyXG4gKiBmaW5kIOafpeaJvuiKgueCuVxyXG4gKiBpbnNlcnQg5o+S5YWl6IqC54K5XHJcbiAqIHJlbW92ZSAg5Yig6Zmk6IqC54K5XHJcbiAqIGRpc3BsYXkg6L6T5Ye65omA5pyJ6IqC54K5XHJcbiAqKi9cclxuY2xhc3MgTExpc3Q8VD4ge1xyXG4gICAgaGVhZDogTm9kZTxUIHwgbnVsbD47XHJcbiAgICBlbmQ6IE5vZGU8VCB8IG51bGw+O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFycjogVFtdKSB7XHJcbiAgICAgICAgaWYgKCEoQXJyYXkuaXNBcnJheShhcnIpIHx8IGFyciA9PSBudWxsKSkgdGhyb3cgbmV3IEVycm9yKFwicGFyYW0gbXVzdCBiZSBhbiBBcnJheSBvciBub25lXCIpO1xyXG4gICAgICAgIHRoaXMuaGVhZCA9IHRoaXMuZW5kID0gbmV3IE5vZGUobnVsbCk7XHJcbiAgICAgICAgaWYgKGFyciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSBhcnIubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5zZXJ0KGFycltpXSwgdGhpcy5lbmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5o+S5YWl5paw55qE6IqC54K5XHJcbiAgICAgKiBAcGFyYW0gbmV3RWxlbWVudCDmj5LlhaXnmoTlhoXlrrlcclxuICAgICAqIEBwYXJhbSBwcmV2RWxlbWVudCDmj5LlhaXnmoTkvY3nva7nmoTliY3kuIDkuKroioLngrlcclxuICAgICAqIOi/lOWbnuWAvOaYryDmlrDlu7rnmoToioLngrlcclxuICAgICAqICovXHJcbiAgICBpbnNlcnQobmV3RWxlbWVudDogVCB8IG51bGwsIHByZXZFbGVtZW50OiBOb2RlPFQgfCBudWxsPiB8IFQgfCBudWxsID0gdGhpcy5lbmQpIHtcclxuICAgICAgICBjb25zdCBuZXdOb2RlID0gbmV3IE5vZGUobmV3RWxlbWVudCk7IC8vIG5ldyDmlrDoioLngrlcclxuICAgICAgICBsZXQgY3VycmVudDtcclxuICAgICAgICBpZiAocHJldkVsZW1lbnQgaW5zdGFuY2VvZiBOb2RlKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSBwcmV2RWxlbWVudDsgLy8g55u05o6l5L2/55So6IqC54K5XHJcbiAgICAgICAgfSBlbHNlIGlmIChwcmV2RWxlbWVudCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSB0aGlzLmhlYWQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY3VycmVudCA9IHRoaXMuZmluZChwcmV2RWxlbWVudCk7IC8vIOaJvuWIsOebruagh+iKgueCuVxyXG4gICAgICAgICAgICBpZiAoY3VycmVudCA9PSBudWxsKSByZXR1cm4gbnVsbDsgLy8g5rKh5pyJ5om+5YiwIHRzIOWPiOeri+WKn+S6hlxyXG4gICAgICAgIH1cclxuICAgICAgICAvKlxyXG4gICAgICAgIGlmICh0aGlzLmZpbmQobmV3RWxlbWVudCkpIHsgLy8g5oCn6IO95pyA5aSn55qE5raI6ICX5aaC5p6cIOavj+asoemDveajgOe0ouaYr+S4jeaYr+W3sue7j+acieivpeWAvOeahOiKgueCuVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IobmV3RWxlbWVudCArIFwiaGFzIGFscmVhZHkgZXhpc3RlZCFcIik7IC8vIOWmguaenOW3sue7j+acieivpeWAvOeahOiKgueCueWwseaKpemUmVxyXG4gICAgICAgIH0gZWxzZSBpZiAocHJldkVsZW1lbnQgaW5zdGFuY2VvZiBOb2RlKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSBwcmV2RWxlbWVudDsgLy8g55u05o6l5L2/55So6IqC54K5XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY3VycmVudCA9IHRoaXMuZmluZChwcmV2RWxlbWVudCk7IC8vIOaJvuWIsOebruagh+iKgueCuVxyXG4gICAgICAgIH1cclxuICAgICAgICAqL1xyXG4gICAgICAgIG5ld05vZGUubmV4dCA9IGN1cnJlbnQubmV4dDsgLy8g5paw6IqC54K555qEbmV4dOS4uiDliY3kuIDkuKroioLngrnnmoRuZXh0XHJcbiAgICAgICAgY3VycmVudC5uZXh0ID0gbmV3Tm9kZTsgLy8g5YmN5LiA5Liq6IqC54K555qEbmV4dCDkuLrmlrDoioLngrlcclxuICAgICAgICBpZiAoY3VycmVudCA9PSB0aGlzLmVuZCkge1xyXG4gICAgICAgICAgICB0aGlzLmVuZCA9IG5ld05vZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXdOb2RlOyAvLyDov5Tlm57mlrDnmoToioLngrkg5oyJ5qyh5bqP5o+S5YWl5b6I5aSa6IqC54K55pe255u05o6l56Gu6K6k56ys5LqM5Liq5Y+C5pWwXHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5p+l5om+6IqC54K5XHJcbiAgICAgKiBAZWxlbWVudCDoioLngrllbGVtZW505Lit55qE5YaF5a65XHJcbiAgICAgKiBAZnJvbU5vZGUg5LuO5ZOq5Liq6IqC54K55ZCO5byA5aeL5p+l5om+IOm7mOiupOWAvOaYr+S7jmhlYWTlvIDlp4tcclxuICAgICAqIOi/lOWbnuWAvCDmib7liLDnmoToioLngrkgIHx8IG51bGxcclxuICAgICAqKi9cclxuICAgIGZpbmQoZWxlbWVudDogVCwgZnJvbU5vZGUgPSB0aGlzLmhlYWQpIHtcclxuICAgICAgICBsZXQgY3Vyck5vZGUgPSBmcm9tTm9kZTtcclxuICAgICAgICB3aGlsZSAoY3Vyck5vZGUpIHtcclxuICAgICAgICAgICAgaWYgKGN1cnJOb2RlLmVsZW1lbnQgPT09IGVsZW1lbnQpIHJldHVybiBjdXJyTm9kZTtcclxuICAgICAgICAgICAgY3Vyck5vZGUgPSBjdXJyTm9kZS5uZXh0ITtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG5cclxuICAgIGluc2VydEFycihhcnI6IFRbXSwgcHJldkVsZW1lbnQ6IE5vZGU8VCB8IG51bGw+IHwgVCB8IG51bGwgPSB0aGlzLmVuZCkge1xyXG4gICAgICAgIGxldCBjdXJyZW50O1xyXG4gICAgICAgIGlmIChwcmV2RWxlbWVudCBpbnN0YW5jZW9mIE5vZGUpIHtcclxuICAgICAgICAgICAgY3VycmVudCA9IHByZXZFbGVtZW50OyAvLyDnm7TmjqXkvb/nlKjoioLngrlcclxuICAgICAgICB9IGVsc2UgaWYgKHByZXZFbGVtZW50ID09IG51bGwpIHtcclxuICAgICAgICAgICAgY3VycmVudCA9IHRoaXMuaGVhZDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjdXJyZW50ID0gdGhpcy5maW5kKHByZXZFbGVtZW50KTsgLy8g5om+5Yiw55uu5qCH6IqC54K5XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50ID09IG51bGwpIHJldHVybiBudWxsOyAvLyDmsqHmnInmib7liLAgdHMg5Y+I56uL5Yqf5LqGXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnQgPSB0aGlzLmluc2VydChhcnJbaV0sIGN1cnJlbnQhKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGRpc3BsYXkoKSB7XHJcbiAgICAgICAgbGV0IGN1cnJOb2RlID0gdGhpcy5oZWFkO1xyXG4gICAgICAgIHdoaWxlICghKGN1cnJOb2RlLm5leHQgPT0gbnVsbCkpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coY3Vyck5vZGUubmV4dC5lbGVtZW50KTtcclxuICAgICAgICAgICAgY3Vyck5vZGUgPSBjdXJyTm9kZS5uZXh0O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmVtb3ZlKGVsZW1lbnQ6IFQpIHtcclxuICAgICAgICBjb25zdCBwcmV2Tm9kZSA9IHRoaXMuZmluZFByZXZpb3VzKGVsZW1lbnQpO1xyXG4gICAgICAgIGlmICghKHByZXZOb2RlLm5leHQgPT0gbnVsbCkpIHtcclxuICAgICAgICAgICAgcHJldk5vZGUubmV4dCA9IHByZXZOb2RlLm5leHQubmV4dDsgLy8g5bCG5YmN5LiA5Liq6IqC54K555qE5YC8bmV4dCDmjIflkJEg5LiL5LiL5Liq5YWD57SgXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBmaW5kUHJldmlvdXMoZWxlbWVudDogVCkge1xyXG4gICAgICAgIGxldCBjdXJyTm9kZSA9IHRoaXMuaGVhZDtcclxuICAgICAgICB3aGlsZSAoIShjdXJyTm9kZS5uZXh0ID09IG51bGwpICYmIChjdXJyTm9kZS5uZXh0LmVsZW1lbnQgIT0gZWxlbWVudCkpIHtcclxuICAgICAgICAgICAgY3Vyck5vZGUgPSBjdXJyTm9kZS5uZXh0O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY3Vyck5vZGU7XHJcbiAgICB9O1xyXG5cclxufVxyXG5cclxuXHJcbmNvbnN0IGNpdGllcyA9IG5ldyBMTGlzdChbXCJDb253YXlcIiwgXCJSdXNzZWxsdmlsbGVcIiwgXCJBbG1hXCJdKTtcclxuY2l0aWVzLmluc2VydChcImFmdGVySGVhZFwiLCBudWxsKTtcclxuY2l0aWVzLmluc2VydChcImFmdGVySGVhZDJcIiwgXCJhZnRlckhlYWRcIik7XHJcblxyXG5cclxuY2l0aWVzLmRpc3BsYXkoKTtcclxuXHJcbi8vIOa1i+ivleaAp+iDvVxyXG5jb25zb2xlLnRpbWUoXCJjcmVhdGVBcnJcIik7XHJcbmNvbnN0IHRlc3RBcnI6IGFueVtdID0gW251bGxdO1xyXG5mb3IgKGxldCBpID0gMDsgaSA8IDk5OTk5OTsgaSsrKSB7XHJcbiAgICB0ZXN0QXJyLnB1c2goaSk7XHJcbn1cclxuY29uc29sZS50aW1lRW5kKFwiY3JlYXRlQXJyXCIpO1xyXG5cclxudGVzdEFyci5zaGlmdCgpO1xyXG5cclxuY29uc29sZS50aW1lKFwiY3JlYXRlTExpc3RcIik7XHJcbmNvbnN0IHRlc3RMTGlzdCA9IG5ldyBMTGlzdCh0ZXN0QXJyKTtcclxuY29uc29sZS50aW1lRW5kKFwiY3JlYXRlTExpc3RcIik7XHJcblxyXG4vLyDmlrDlu7og5pWw57uE5q+U6ZO+6KGo5Z2XIDQtMTDlgI1cclxuXHJcblxyXG4vLyBzZXQg5pWw5o2u57uT5p6EXHJcbmNvbnNvbGUudGltZShcImNyZWF0ZVNldFwiKTtcclxuY29uc29sZS50aW1lRW5kKFwiY3JlYXRlU2V0XCIpO1xyXG4vLyDmr5Tljp/nlJ/nmoRzZXTlv6sg5beu6Led5bqU6K+l5bCx5Zyo5qOA5p+lIOWOu+mHjeS4iumdolxyXG5cclxuXHJcbmNvbnNvbGUudGltZShcImFyckFkZFwiKTtcclxudGVzdEFyci5zcGxpY2UoMSwgMCwgXCJmaXJzdFwiKTtcclxudGVzdEFyci5zcGxpY2UoMiwgMCwgXCJzZWNvbmRcIiwgXCJ0aGlyZFwiKTtcclxuY29uc29sZS50aW1lRW5kKFwiYXJyQWRkXCIpO1xyXG5cclxuY29uc29sZS50aW1lKFwiTExpc3RBZGRcIik7XHJcbnRlc3RMTGlzdC5pbnNlcnQoXCJmaXJzdFwiLCBudWxsKTtcclxudGVzdExMaXN0Lmluc2VydEFycihbXCJzZWNvbmRcIiwgXCJ0aGlyZFwiXSwgXCJmaXJzdFwiKTtcclxuY29uc29sZS50aW1lRW5kKFwiTExpc3RBZGRcIik7XHJcblxyXG4vLyDlnKjlpLTpg6jmj5LlgLwg6ZO+6KGo5q+U5pWw57uE5b+rMzDlgI3lt6blj7NcclxuXHJcbmV4cG9ydCB7fTtcclxuIl19