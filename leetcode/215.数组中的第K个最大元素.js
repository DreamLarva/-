"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
/*
在未排序的数组中找到第 k 个最大的元素。请注意，你需要找的是数组排序后的第 k 个最大的元素，而不是第 k 个不同的元素。

示例 1:

输入: [3,2,1,5,6,4] 和 k = 2
输出: 5
示例 2:

输入: [3,2,3,1,2,4,5,5,6] 和 k = 4
输出: 4
说明:

你可以假设 k 总是有效的，且 1 ≤ k ≤ 数组的长度。

来源：力扣（LeetCode）
链接：https://leetcode-cn.com/problems/kth-largest-element-in-an-array
著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。
* */
const lodash_1 = __importDefault(require("lodash"));
/**
 * @param {number[]} nums
 * @param {number} k
 * @return {number}
 */
var findKthLargest = function (nums, k) {
    /**
     * 方法一 不断的堆化(求第k大的值 用**最小堆**) 并且保持 一定的长度(k)
     * 慢的一b
     * */
    const minHeap = [];
    for (let i = 0; i < nums.length; i++) {
        minHeap.push(nums[i]);
        heapifyWithSiftDown(minHeap);
        if (minHeap.length > k) {
            minHeap.shift();
        }
    }
    // 还必须再堆化一次 使最小值 在第一个
    heapifyWithSiftDown(minHeap);
    return minHeap[0];
    function heapifyWithSiftDown(A) {
        // 初始选择最接近叶子的一个父结点
        for (let i = Math.floor((A.length - 1) / 2); i >= 0; i--) {
            siftDown(A, i);
        }
        return A;
    }
    function siftDown(A, k) {
        // 此处是 最小堆
        while (k * 2 + 1 < A.length) {
            let son = k * 2 + 1;
            // 与其两个儿子中较小的一个比较
            if (k * 2 + 2 < A.length && A[son] > A[k * 2 + 2]) {
                son = k * 2 + 2;
            }
            // 若大于儿子，则与儿子交换。
            if (A[son] > A[k]) {
                break;
            }
            [A[son], A[k]] = [A[k], A[son]];
            // 交换后再与新的儿子比较并交换，直至没有儿子。
            k = son;
        }
    }
};
var findKthLargest_1 = function (nums, k) {
    /**
     * 方法二 快速选择法(Hoare 选择法)
     * */
    const size = nums.length;
    return quickSelect(0, size - 1, size - k);
    function partition(left, right, pivot_index) {
        let pivot = nums[pivot_index];
        // 现将 枢轴 换到末尾 方便 操作
        [nums[pivot_index], nums[right]] = [nums[right], nums[pivot_index]];
        // 存储 枢轴新的位置
        let store_index = left;
        // 枢轴的值 放到左边
        for (let i = left; i <= right; i++) {
            if (nums[i] < pivot) {
                [nums[store_index], nums[i]] = [nums[i], nums[store_index]];
                store_index++;
            }
        }
        // 将在最末尾的枢轴的值 放到新的位置
        [nums[store_index], nums[right]] = [nums[right], nums[store_index]];
        return store_index;
    }
    function quickSelect(left, right, k_smallest) {
        // 如果 左右为 同一个值 那么说明 只有一个值 不需要再选择了
        if (left === right) {
            return nums[left];
        }
        // 随机 用一个值作为 index 作为枢轴 并且返回 枢轴的 index
        let pivot_index = partition(left, right, lodash_1.default.random(left, right - 1)); // lodash 的 random 是含头 含尾的
        if (k_smallest === pivot_index)
            return nums[k_smallest];
        // 如果 枢轴的 index 小于 k_smallest 说明 值 还在有枢轴的右侧
        else if (k_smallest < pivot_index)
            return quickSelect(left, pivot_index - 1, k_smallest);
        // 如果 枢轴的 index 大于 k_smallest 说明 值 还在有枢轴的左侧
        return quickSelect(pivot_index + 1, right, k_smallest);
    }
};
const assert_1 = __importDefault(require("assert"));
assert_1.default.strictEqual(findKthLargest([3, 2, 1, 5, 6, 4], 2), 5);
assert_1.default.strictEqual(findKthLargest([3, 2, 3, 1, 2, 4, 5, 5, 6], 4), 4);
assert_1.default.strictEqual(findKthLargest_1([3, 2, 1, 5, 6, 4], 2), 5);
assert_1.default.strictEqual(findKthLargest_1([3, 2, 3, 1, 2, 4, 5, 5, 6], 4), 4);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjE1LuaVsOe7hOS4reeahOesrEvkuKrmnIDlpKflhYPntKAuanMiLCJzb3VyY2VSb290IjoiLi8iLCJzb3VyY2VzIjpbImxlZXRjb2RlLzIxNS7mlbDnu4TkuK3nmoTnrKxL5Liq5pyA5aSn5YWD57SgLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQWtCSTtBQUNKLG9EQUF1QjtBQUV2Qjs7OztHQUlHO0FBQ0gsSUFBSSxjQUFjLEdBQUcsVUFBVSxJQUFjLEVBQUUsQ0FBUztJQUNwRDs7O1NBR0s7SUFDTCxNQUFNLE9BQU8sR0FBRyxFQUFFLENBQUM7SUFDbkIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDbEMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QixtQkFBbUIsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUM3QixJQUFJLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1lBQ3BCLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQztTQUNuQjtLQUNKO0lBQ0QscUJBQXFCO0lBQ3JCLG1CQUFtQixDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQzdCLE9BQU8sT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRWxCLFNBQVMsbUJBQW1CLENBQUMsQ0FBVztRQUNwQyxrQkFBa0I7UUFDbEIsS0FBSyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3RELFFBQVEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDbEI7UUFFRCxPQUFPLENBQUMsQ0FBQztJQUNiLENBQUM7SUFFRCxT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Y2VzQ29udGVudCI6WyIvKlxyXG7lnKjmnKrmjpLluo/nmoTmlbDnu4TkuK3mib7liLDnrKwgayDkuKrmnIDlpKfnmoTlhYPntKDjgILor7fms6jmhI/vvIzkvaDpnIDopoHmib7nmoTmmK/mlbDnu4TmjpLluo/lkI7nmoTnrKwgayDkuKrmnIDlpKfnmoTlhYPntKDvvIzogIzkuI3mmK/nrKwgayDkuKrkuI3lkIznmoTlhYPntKDjgIJcclxuXHJcbuekuuS+iyAxOlxyXG5cclxu6L6T5YWlOiBbMywyLDEsNSw2LDRdIOWSjCBrID0gMlxyXG7ovpPlh7o6IDVcclxu56S65L6LwqAyOlxyXG5cclxu6L6T5YWlOiBbMywyLDMsMSwyLDQsNSw1LDZdIOWSjCBrID0gNFxyXG7ovpPlh7o6IDRcclxu6K+05piOOlxyXG5cclxu5L2g5Y+v5Lul5YGH6K6+IGsg5oC75piv5pyJ5pWI55qE77yM5LiUIDEg4omkIGsg4omkIOaVsOe7hOeahOmVv+W6puOAglxyXG5cclxu5p2l5rqQ77ya5Yqb5omj77yITGVldENvZGXvvIlcclxu6ZO+5o6l77yaaHR0cHM6Ly9sZWV0Y29kZS1jbi5jb20vcHJvYmxlbXMva3RoLWxhcmdlc3QtZWxlbWVudC1pbi1hbi1hcnJheVxyXG7okZfkvZzmnYPlvZLpoobmiaPnvZHnu5zmiYDmnInjgILllYbkuJrovazovb3or7fogZTns7vlrpjmlrnmjojmnYPvvIzpnZ7llYbkuJrovazovb3or7fms6jmmI7lh7rlpITjgIJcclxuKiAqL1xyXG5pbXBvcnQgXyBmcm9tIFwibG9kYXNoXCI7XHJcblxyXG4vKipcclxuICogQHBhcmFtIHtudW1iZXJbXX0gbnVtc1xyXG4gKiBAcGFyYW0ge251bWJlcn0ga1xyXG4gKiBAcmV0dXJuIHtudW1iZXJ9XHJcbiAqL1xyXG52YXIgZmluZEt0aExhcmdlc3QgPSBmdW5jdGlvbiAobnVtczogbnVtYmVyW10sIGs6IG51bWJlcikge1xyXG4gICAgLyoqXHJcbiAgICAgKiDmlrnms5XkuIAg5LiN5pat55qE5aCG5YyWKOaxguesrGvlpKfnmoTlgLwg55SoKirmnIDlsI/loIYqKikg5bm25LiU5L+d5oyBIOS4gOWumueahOmVv+W6pihrKVxyXG4gICAgICog5oWi55qE5LiAYlxyXG4gICAgICogKi9cclxuICAgIGNvbnN0IG1pbkhlYXAgPSBbXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIG1pbkhlYXAucHVzaChudW1zW2ldKTtcclxuICAgICAgICBoZWFwaWZ5V2l0aFNpZnREb3duKG1pbkhlYXApO1xyXG4gICAgICAgIGlmIChtaW5IZWFwLmxlbmd0aCA+IGspIHtcclxuICAgICAgICAgICAgbWluSGVhcC5zaGlmdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIOi/mOW/hemhu+WGjeWghuWMluS4gOasoSDkvb/mnIDlsI/lgLwg5Zyo56ys5LiA5LiqXHJcbiAgICBoZWFwaWZ5V2l0aFNpZnREb3duKG1pbkhlYXApO1xyXG4gICAgcmV0dXJuIG1pbkhlYXBbMF07XHJcblxyXG4gICAgZnVuY3Rpb24gaGVhcGlmeVdpdGhTaWZ0RG93bihBOiBudW1iZXJbXSkge1xyXG4gICAgICAgIC8vIOWIneWni+mAieaLqeacgOaOpei/keWPtuWtkOeahOS4gOS4queItue7k+eCuVxyXG4gICAgICAgIGZvciAobGV0IGkgPSBNYXRoLmZsb29yKChBLmxlbmd0aCAtIDEpIC8gMik7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIHNpZnREb3duKEEsIGkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIEE7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2lmdERvd24oQTogbnVtYmVyW10sIGs6IG51bWJlcikge1xyXG4gICAgICAgIC8vIOatpOWkhOaYryDmnIDlsI/loIZcclxuICAgICAgICB3aGlsZSAoayAqIDIgKyAxIDwgQS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbGV0IHNvbiA9IGsgKiAyICsgMTtcclxuICAgICAgICAgICAgLy8g5LiO5YW25Lik5Liq5YS/5a2Q5Lit6L6D5bCP55qE5LiA5Liq5q+U6L6DXHJcbiAgICAgICAgICAgIGlmIChrICogMiArIDIgPCBBLmxlbmd0aCAmJiBBW3Nvbl0gPiBBW2sgKiAyICsgMl0pIHtcclxuICAgICAgICAgICAgICAgIHNvbiA9IGsgKiAyICsgMjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8g6Iul5aSn5LqO5YS/5a2Q77yM5YiZ5LiO5YS/5a2Q5Lqk5o2i44CCXHJcbiAgICAgICAgICAgIGlmIChBW3Nvbl0gPiBBW2tdKSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBbQVtzb25dLCBBW2tdXSA9IFtBW2tdLCBBW3Nvbl1dO1xyXG4gICAgICAgICAgICAvLyDkuqTmjaLlkI7lho3kuI7mlrDnmoTlhL/lrZDmr5TovoPlubbkuqTmjaLvvIznm7Toh7PmsqHmnInlhL/lrZDjgIJcclxuICAgICAgICAgICAgayA9IHNvbjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxufTtcclxuXHJcbnZhciBmaW5kS3RoTGFyZ2VzdF8xID0gZnVuY3Rpb24gKG51bXM6IG51bWJlcltdLCBrOiBudW1iZXIpIHtcclxuICAgIC8qKlxyXG4gICAgICog5pa55rOV5LqMIOW/q+mAn+mAieaLqeazlShIb2FyZSDpgInmi6nms5UpXHJcbiAgICAgKiAqL1xyXG4gICAgY29uc3Qgc2l6ZSA9IG51bXMubGVuZ3RoO1xyXG4gICAgcmV0dXJuIHF1aWNrU2VsZWN0KDAsIHNpemUgLSAxLCBzaXplIC0gayk7XHJcblxyXG4gICAgZnVuY3Rpb24gcGFydGl0aW9uKGxlZnQ6IG51bWJlciwgcmlnaHQ6IG51bWJlciwgcGl2b3RfaW5kZXg6IG51bWJlcikge1xyXG4gICAgICAgIGxldCBwaXZvdCA9IG51bXNbcGl2b3RfaW5kZXhdO1xyXG4gICAgICAgIC8vIOeOsOWwhiDmnqLovbQg5o2i5Yiw5pyr5bC+IOaWueS+vyDmk43kvZxcclxuICAgICAgICBbbnVtc1twaXZvdF9pbmRleF0sIG51bXNbcmlnaHRdXSA9IFtudW1zW3JpZ2h0XSwgbnVtc1twaXZvdF9pbmRleF1dO1xyXG4gICAgICAgIC8vIOWtmOWCqCDmnqLovbTmlrDnmoTkvY3nva5cclxuICAgICAgICBsZXQgc3RvcmVfaW5kZXggPSBsZWZ0O1xyXG5cclxuICAgICAgICAvLyDmnqLovbTnmoTlgLwg5pS+5Yiw5bem6L65XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IGxlZnQ7IGkgPD0gcmlnaHQ7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAobnVtc1tpXSA8IHBpdm90KSB7XHJcbiAgICAgICAgICAgICAgICBbbnVtc1tzdG9yZV9pbmRleF0sIG51bXNbaV1dID0gW251bXNbaV0sIG51bXNbc3RvcmVfaW5kZXhdXTtcclxuICAgICAgICAgICAgICAgIHN0b3JlX2luZGV4Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5bCG5Zyo5pyA5pyr5bC+55qE5p6i6L2055qE5YC8IOaUvuWIsOaWsOeahOS9jee9rlxyXG4gICAgICAgIFtudW1zW3N0b3JlX2luZGV4XSwgbnVtc1tyaWdodF1dID0gW251bXNbcmlnaHRdLCBudW1zW3N0b3JlX2luZGV4XV07XHJcbiAgICAgICAgcmV0dXJuIHN0b3JlX2luZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHF1aWNrU2VsZWN0KGxlZnQ6IG51bWJlciwgcmlnaHQ6IG51bWJlciwga19zbWFsbGVzdDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICAvLyDlpoLmnpwg5bem5Y+z5Li6IOWQjOS4gOS4quWAvCDpgqPkuYjor7TmmI4g5Y+q5pyJ5LiA5Liq5YC8IOS4jemcgOimgeWGjemAieaLqeS6hlxyXG4gICAgICAgIGlmIChsZWZ0ID09PSByaWdodCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVtc1tsZWZ0XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g6ZqP5py6IOeUqOS4gOS4quWAvOS9nOS4uiBpbmRleCDkvZzkuLrmnqLovbQg5bm25LiU6L+U5ZueIOaeoui9tOeahCBpbmRleFxyXG4gICAgICAgIGxldCBwaXZvdF9pbmRleCA9IHBhcnRpdGlvbihsZWZ0LCByaWdodCwgXy5yYW5kb20obGVmdCwgcmlnaHQgLSAxKSk7IC8vIGxvZGFzaCDnmoQgcmFuZG9tIOaYr+WQq+WktCDlkKvlsL7nmoRcclxuXHJcbiAgICAgICAgaWYgKGtfc21hbGxlc3QgPT09IHBpdm90X2luZGV4KSByZXR1cm4gbnVtc1trX3NtYWxsZXN0XTtcclxuICAgICAgICAvLyDlpoLmnpwg5p6i6L2055qEIGluZGV4IOWwj+S6jiBrX3NtYWxsZXN0IOivtOaYjiDlgLwg6L+Y5Zyo5pyJ5p6i6L2055qE5Y+z5L6nXHJcbiAgICAgICAgZWxzZSBpZiAoa19zbWFsbGVzdCA8IHBpdm90X2luZGV4KSByZXR1cm4gcXVpY2tTZWxlY3QobGVmdCwgcGl2b3RfaW5kZXggLSAxLCBrX3NtYWxsZXN0KTtcclxuICAgICAgICAvLyDlpoLmnpwg5p6i6L2055qEIGluZGV4IOWkp+S6jiBrX3NtYWxsZXN0IOivtOaYjiDlgLwg6L+Y5Zyo5pyJ5p6i6L2055qE5bem5L6nXHJcbiAgICAgICAgcmV0dXJuIHF1aWNrU2VsZWN0KHBpdm90X2luZGV4ICsgMSwgcmlnaHQsIGtfc21hbGxlc3QpO1xyXG5cclxuICAgIH1cclxuXHJcblxyXG59O1xyXG5cclxuaW1wb3J0IGFzc2VydCBmcm9tICdhc3NlcnQnO1xyXG5cclxuYXNzZXJ0LnN0cmljdEVxdWFsKFxyXG4gICAgZmluZEt0aExhcmdlc3QoWzMsIDIsIDEsIDUsIDYsIDRdLCAyKSxcclxuICAgIDUsXHJcbik7XHJcbmFzc2VydC5zdHJpY3RFcXVhbChcclxuICAgIGZpbmRLdGhMYXJnZXN0KFszLCAyLCAzLCAxLCAyLCA0LCA1LCA1LCA2XSwgNCksXHJcbiAgICA0LFxyXG4pO1xyXG5hc3NlcnQuc3RyaWN0RXF1YWwoXHJcbiAgICBmaW5kS3RoTGFyZ2VzdF8xKFszLCAyLCAxLCA1LCA2LCA0XSwgMiksXHJcbiAgICA1LFxyXG4pO1xyXG5hc3NlcnQuc3RyaWN0RXF1YWwoXHJcbiAgICBmaW5kS3RoTGFyZ2VzdF8xKFszLCAyLCAzLCAxLCAyLCA0LCA1LCA1LCA2XSwgNCksXHJcbiAgICA0LFxyXG4pO1xyXG4iXX0=