"use strict";
var __importDefault =
  (this && this.__importDefault) ||
  function (mod) {
    return mod && mod.__esModule ? mod : { default: mod };
  };
Object.defineProperty(exports, "__esModule", { value: true });
/*
设计一个支持在平均 时间复杂度 O(1) 下，执行以下操作的数据结构。

insert(val)：当元素 val 不存在时，向集合中插入该项。
remove(val)：元素 val 存在时，从集合中移除该项。
getRandom：随机返回现有集合中的一项。每个元素应该有相同的概率被返回。
示例 :

// 初始化一个空的集合。
RandomizedSet randomSet = new RandomizedSet();

// 向集合中插入 1 。返回 true 表示 1 被成功地插入。
randomSet.insert(1);

// 返回 false ，表示集合中不存在 2 。
randomSet.remove(2);

// 向集合中插入 2 。返回 true 。集合现在包含 [1,2] 。
randomSet.insert(2);

// getRandom 应随机返回 1 或 2 。
randomSet.getRandom();

// 从集合中移除 1 ，返回 true 。集合现在包含 [2] 。
randomSet.remove(1);

// 2 已在集合中，所以返回 false 。
randomSet.insert(2);

// 由于 2 是集合中唯一的数字，getRandom 总是返回 2 。
randomSet.getRandom();

来源：力扣（LeetCode）
链接：https://leetcode-cn.com/problems/insert-delete-getrandom-o1
著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。
* */
const lodash_1 = __importDefault(require("lodash"));
/**
 * Initialize your data structure here.
 */
class RandomizedSet {
  constructor() {
    /**
     * 使用一个数组 和 一个哈希表
     * */
    this.map = {};
    this.cache = [];
  }
  contains(val) {
    return this.map[val] != null;
  }
  /**
   * Inserts a value to the set. Returns true if the set did not already contain the specified element.
   * @param {number} val
   * @return {boolean}
   */
  insert(val) {
    if (this.contains(val)) return false;
    this.cache.push(val);
    this.map[val] = this.cache.length - 1;
    return true;
  }
  /**
   * Removes a value from the set. Returns true if the set contained the specified element.
   * @param {number} val
   * @return {boolean}
   */
  remove(val) {
    /**
     * 删除的时候 把最后一个数据 放到 已经删除了数据额位置 就不用出现循环的情况
     * 妙啊
     * */
    if (!this.contains(val)) return false;
    const deleteIndex = this.map[val];
    // 上一次插入的数据的 index 就是 cache 的length
    const latestData = lodash_1.default.last(this.cache);
    this.map[latestData] = deleteIndex;
    this.cache.splice(deleteIndex, 1, latestData);
    this.cache.pop();
    delete this.map[val];
    return true;
  }
  /**
   * Get a random element from the set.
   * @return {number}
   */
  getRandom() {
    return lodash_1.default.sample(this.cache);
  }
}
/**
 * Your RandomizedSet object will be instantiated and called as such:
 * var obj = new RandomizedSet()
 * var param_1 = obj.insert(val)
 * var param_2 = obj.remove(val)
 * var param_3 = obj.getRandom()
 */
const assert_1 = __importDefault(require("assert"));
// 初始化一个空的集合。
const randomSet = new RandomizedSet();
// 向集合中插入 1 。返回 true 表示 1 被成功地插入。
assert_1.default.strictEqual(randomSet.insert(1), true);
// 返回 false ，表示集合中不存在 2 。
assert_1.default.strictEqual(randomSet.remove(2), false);
// 向集合中插入 2 。返回 true 。集合现在包含 [1,2] 。
assert_1.default.strictEqual(randomSet.insert(2), true);
// getRandom 应随机返回 1 或 2 。
assert_1.default(randomSet.getRandom() === 1 || 2);
// 从集合中移除 1 ，返回 true 。集合现在包含 [2] 。
assert_1.default.strictEqual(randomSet.remove(1), true);
// 2 已在集合中，所以返回 false 。
assert_1.default.strictEqual(randomSet.insert(2), false);
// 由于 2 是集合中唯一的数字，getRandom 总是返回 2 。
assert_1.default.strictEqual(randomSet.getRandom(), 2);
assert_1.default.strictEqual(randomSet.remove(2), true);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzgwLuW4uOaVsOaXtumXtOaPkuWFpeOAgeWIoOmZpOWSjOiOt+WPlumaj+acuuWFg+e0oC5qcyIsInNvdXJjZVJvb3QiOiIuLyIsInNvdXJjZXMiOlsibGVldGNvZGUvMzgwLuW4uOaVsOaXtumXtOaPkuWFpeOAgeWIoOmZpOWSjOiOt+WPlumaj+acuuWFg+e0oC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQW1DSTtBQUNKLG9EQUF1QjtBQUV2Qjs7R0FFRztBQUNILE1BQU0sYUFBYTtJQU9mO1FBTkE7O2FBRUs7UUFDTCxRQUFHLEdBQThCLEVBQUUsQ0FBQztRQUNwQyxVQUFLLEdBQWEsRUFBRSxDQUFDO0lBR3JCLENBQUM7SUFFRCxRQUFRLENBQUMsR0FBVztRQUNoQixPQUFPLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDO0lBQ2pDLENBQUM7SUFFRDs7OztPQUlHO0lBQ0gsTUFBTSxDQUFDLEdBQVc7UUFDZCxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDO1lBQUUsT0FBTyxLQUFLLENBQUM7UUFDckMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDckIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7UUFDdEMsT0FBTyxJQUFJLENBQUE7SUFDZixDQUFDO0lBQUEsQ0FBQztJQUVGOzs7O09BSUc7SUFDSCxNQUFNLENBQUMsR0FBVztRQUNkOzs7YUFHSztRQUNMLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQztZQUFFLE9BQU8sS0FBSyxDQUFDO1FBQ3RDLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDbEMsbUNBQW1DO1FBQ25DLE1BQU0sVUFBVSxHQUFHLGdCQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUUsQ0FBQztRQUN2QyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxHQUFHLFdBQVcsQ0FBQztRQUNuQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxXQUFXLEVBQUUsQ0FBQyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQzlDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDakIsT0FBTyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3JCLE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFBQSxDQUFDO0lBRUY7OztPQUdHO0lBQ0gsU0FBUztRQUNMLE9BQU8sZ0JBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFBQSxDQUFDO0NBRUw7QUFFRDs7Ozs7O0dBTUc7QUFHSCxvREFBNEI7QUFDNUIsYUFBYTtBQUNiLE1BQU0sU0FBUyxHQUFHLElBQUksYUFBYSxFQUFFLENBQUM7QUFFdEMsaUNBQWlDO0FBQ2pDLGdCQUFNLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFFOUMseUJBQXlCO0FBQ3pCLGdCQUFNLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFFL0Msb0NBQW9DO0FBQ3BDLGdCQUFNLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFFOUMsMEJBQTBCO0FBQzFCLGdCQUFNLENBQUMsU0FBUyxDQUFDLFNBQVMsRUFBRSxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUV6QyxrQ0FBa0M7QUFDbEMsZ0JBQU0sQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUU5Qyx1QkFBdUI7QUFDdkIsZ0JBQU0sQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUUvQyxvQ0FBb0M7QUFDcEMsZ0JBQU0sQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLFNBQVMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBRTdDLGdCQUFNLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxu6K6+6K6h5LiA5Liq5pSv5oyB5Zyo5bmz5Z2HwqDml7bpl7TlpI3mnYLluqYgTygxKcKg5LiL77yM5omn6KGM5Lul5LiL5pON5L2c55qE5pWw5o2u57uT5p6E44CCXG5cbmluc2VydCh2YWwp77ya5b2T5YWD57SgIHZhbCDkuI3lrZjlnKjml7bvvIzlkJHpm4blkIjkuK3mj5LlhaXor6XpobnjgIJcbnJlbW92ZSh2YWwp77ya5YWD57SgIHZhbCDlrZjlnKjml7bvvIzku47pm4blkIjkuK3np7vpmaTor6XpobnjgIJcbmdldFJhbmRvbe+8mumaj+acuui/lOWbnueOsOaciembhuWQiOS4reeahOS4gOmhueOAguavj+S4quWFg+e0oOW6lOivpeacieebuOWQjOeahOamgueOh+iiq+i/lOWbnuOAglxu56S65L6LIDpcblxuLy8g5Yid5aeL5YyW5LiA5Liq56m655qE6ZuG5ZCI44CCXG5SYW5kb21pemVkU2V0IHJhbmRvbVNldCA9IG5ldyBSYW5kb21pemVkU2V0KCk7XG5cbi8vIOWQkembhuWQiOS4reaPkuWFpSAxIOOAgui/lOWbniB0cnVlIOihqOekuiAxIOiiq+aIkOWKn+WcsOaPkuWFpeOAglxucmFuZG9tU2V0Lmluc2VydCgxKTtcblxuLy8g6L+U5ZueIGZhbHNlIO+8jOihqOekuumbhuWQiOS4reS4jeWtmOWcqCAyIOOAglxucmFuZG9tU2V0LnJlbW92ZSgyKTtcblxuLy8g5ZCR6ZuG5ZCI5Lit5o+S5YWlIDIg44CC6L+U5ZueIHRydWUg44CC6ZuG5ZCI546w5Zyo5YyF5ZCrIFsxLDJdIOOAglxucmFuZG9tU2V0Lmluc2VydCgyKTtcblxuLy8gZ2V0UmFuZG9tIOW6lOmaj+acuui/lOWbniAxIOaIliAyIOOAglxucmFuZG9tU2V0LmdldFJhbmRvbSgpO1xuXG4vLyDku47pm4blkIjkuK3np7vpmaQgMSDvvIzov5Tlm54gdHJ1ZSDjgILpm4blkIjnjrDlnKjljIXlkKsgWzJdIOOAglxucmFuZG9tU2V0LnJlbW92ZSgxKTtcblxuLy8gMiDlt7LlnKjpm4blkIjkuK3vvIzmiYDku6Xov5Tlm54gZmFsc2Ug44CCXG5yYW5kb21TZXQuaW5zZXJ0KDIpO1xuXG4vLyDnlLHkuo4gMiDmmK/pm4blkIjkuK3llK/kuIDnmoTmlbDlrZfvvIxnZXRSYW5kb20g5oC75piv6L+U5ZueIDIg44CCXG5yYW5kb21TZXQuZ2V0UmFuZG9tKCk7XG5cbuadpea6kO+8muWKm+aJo++8iExlZXRDb2Rl77yJXG7pk77mjqXvvJpodHRwczovL2xlZXRjb2RlLWNuLmNvbS9wcm9ibGVtcy9pbnNlcnQtZGVsZXRlLWdldHJhbmRvbS1vMVxu6JGX5L2c5p2D5b2S6aKG5omj572R57uc5omA5pyJ44CC5ZWG5Lia6L2s6L296K+36IGU57O75a6Y5pa55o6I5p2D77yM6Z2e5ZWG5Lia6L2s6L296K+35rOo5piO5Ye65aSE44CCXG4qICovXG5pbXBvcnQgXyBmcm9tIFwibG9kYXNoXCI7XG5cbi8qKlxuICogSW5pdGlhbGl6ZSB5b3VyIGRhdGEgc3RydWN0dXJlIGhlcmUuXG4gKi9cbmNsYXNzIFJhbmRvbWl6ZWRTZXQge1xuICAgIC8qKlxuICAgICAqIOS9v+eUqOS4gOS4quaVsOe7hCDlkowg5LiA5Liq5ZOI5biM6KGoXG4gICAgICogKi9cbiAgICBtYXA6IHsgW2tleTogbnVtYmVyXTogbnVtYmVyIH0gPSB7fTtcbiAgICBjYWNoZTogbnVtYmVyW10gPSBbXTtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgIH1cblxuICAgIGNvbnRhaW5zKHZhbDogbnVtYmVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcFt2YWxdICE9IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5zZXJ0cyBhIHZhbHVlIHRvIHRoZSBzZXQuIFJldHVybnMgdHJ1ZSBpZiB0aGUgc2V0IGRpZCBub3QgYWxyZWFkeSBjb250YWluIHRoZSBzcGVjaWZpZWQgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBpbnNlcnQodmFsOiBudW1iZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuY29udGFpbnModmFsKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICB0aGlzLmNhY2hlLnB1c2godmFsKTtcbiAgICAgICAgdGhpcy5tYXBbdmFsXSA9IHRoaXMuY2FjaGUubGVuZ3RoIC0gMTtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIHZhbHVlIGZyb20gdGhlIHNldC4gUmV0dXJucyB0cnVlIGlmIHRoZSBzZXQgY29udGFpbmVkIHRoZSBzcGVjaWZpZWQgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICByZW1vdmUodmFsOiBudW1iZXIpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIOWIoOmZpOeahOaXtuWAmSDmiormnIDlkI7kuIDkuKrmlbDmja4g5pS+5YiwIOW3sue7j+WIoOmZpOS6huaVsOaNrumineS9jee9riDlsLHkuI3nlKjlh7rnjrDlvqrnjq/nmoTmg4XlhrVcbiAgICAgICAgICog5aaZ5ZWKXG4gICAgICAgICAqICovXG4gICAgICAgIGlmICghdGhpcy5jb250YWlucyh2YWwpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGNvbnN0IGRlbGV0ZUluZGV4ID0gdGhpcy5tYXBbdmFsXTtcbiAgICAgICAgLy8g5LiK5LiA5qyh5o+S5YWl55qE5pWw5o2u55qEIGluZGV4IOWwseaYryBjYWNoZSDnmoRsZW5ndGhcbiAgICAgICAgY29uc3QgbGF0ZXN0RGF0YSA9IF8ubGFzdCh0aGlzLmNhY2hlKSE7XG4gICAgICAgIHRoaXMubWFwW2xhdGVzdERhdGFdID0gZGVsZXRlSW5kZXg7XG4gICAgICAgIHRoaXMuY2FjaGUuc3BsaWNlKGRlbGV0ZUluZGV4LCAxLCBsYXRlc3REYXRhKTtcbiAgICAgICAgdGhpcy5jYWNoZS5wb3AoKTtcbiAgICAgICAgZGVsZXRlIHRoaXMubWFwW3ZhbF07XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYSByYW5kb20gZWxlbWVudCBmcm9tIHRoZSBzZXQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldFJhbmRvbSgpIHtcbiAgICAgICAgcmV0dXJuIF8uc2FtcGxlKHRoaXMuY2FjaGUpO1xuICAgIH07XG5cbn1cblxuLyoqXG4gKiBZb3VyIFJhbmRvbWl6ZWRTZXQgb2JqZWN0IHdpbGwgYmUgaW5zdGFudGlhdGVkIGFuZCBjYWxsZWQgYXMgc3VjaDpcbiAqIHZhciBvYmogPSBuZXcgUmFuZG9taXplZFNldCgpXG4gKiB2YXIgcGFyYW1fMSA9IG9iai5pbnNlcnQodmFsKVxuICogdmFyIHBhcmFtXzIgPSBvYmoucmVtb3ZlKHZhbClcbiAqIHZhciBwYXJhbV8zID0gb2JqLmdldFJhbmRvbSgpXG4gKi9cblxuXG5pbXBvcnQgYXNzZXJ0IGZyb20gXCJhc3NlcnRcIjtcbi8vIOWIneWni+WMluS4gOS4quepuueahOmbhuWQiOOAglxuY29uc3QgcmFuZG9tU2V0ID0gbmV3IFJhbmRvbWl6ZWRTZXQoKTtcblxuLy8g5ZCR6ZuG5ZCI5Lit5o+S5YWlIDEg44CC6L+U5ZueIHRydWUg6KGo56S6IDEg6KKr5oiQ5Yqf5Zyw5o+S5YWl44CCXG5hc3NlcnQuc3RyaWN0RXF1YWwocmFuZG9tU2V0Lmluc2VydCgxKSwgdHJ1ZSk7XG5cbi8vIOi/lOWbniBmYWxzZSDvvIzooajnpLrpm4blkIjkuK3kuI3lrZjlnKggMiDjgIJcbmFzc2VydC5zdHJpY3RFcXVhbChyYW5kb21TZXQucmVtb3ZlKDIpLCBmYWxzZSk7XG5cbi8vIOWQkembhuWQiOS4reaPkuWFpSAyIOOAgui/lOWbniB0cnVlIOOAgumbhuWQiOeOsOWcqOWMheWQqyBbMSwyXSDjgIJcbmFzc2VydC5zdHJpY3RFcXVhbChyYW5kb21TZXQuaW5zZXJ0KDIpLCB0cnVlKTtcblxuLy8gZ2V0UmFuZG9tIOW6lOmaj+acuui/lOWbniAxIOaIliAyIOOAglxuYXNzZXJ0KHJhbmRvbVNldC5nZXRSYW5kb20oKSA9PT0gMSB8fCAyKTtcblxuLy8g5LuO6ZuG5ZCI5Lit56e76ZmkIDEg77yM6L+U5ZueIHRydWUg44CC6ZuG5ZCI546w5Zyo5YyF5ZCrIFsyXSDjgIJcbmFzc2VydC5zdHJpY3RFcXVhbChyYW5kb21TZXQucmVtb3ZlKDEpLCB0cnVlKTtcblxuLy8gMiDlt7LlnKjpm4blkIjkuK3vvIzmiYDku6Xov5Tlm54gZmFsc2Ug44CCXG5hc3NlcnQuc3RyaWN0RXF1YWwocmFuZG9tU2V0Lmluc2VydCgyKSwgZmFsc2UpO1xuXG4vLyDnlLHkuo4gMiDmmK/pm4blkIjkuK3llK/kuIDnmoTmlbDlrZfvvIxnZXRSYW5kb20g5oC75piv6L+U5ZueIDIg44CCXG5hc3NlcnQuc3RyaWN0RXF1YWwocmFuZG9tU2V0LmdldFJhbmRvbSgpLCAyKTtcblxuYXNzZXJ0LnN0cmljdEVxdWFsKHJhbmRvbVNldC5yZW1vdmUoMiksIHRydWUpO1xuXG5cbiJdfQ==
