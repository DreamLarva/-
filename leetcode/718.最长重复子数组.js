"use strict";
var __importDefault =
  (this && this.__importDefault) ||
  function (mod) {
    return mod && mod.__esModule ? mod : { default: mod };
  };
Object.defineProperty(exports, "__esModule", { value: true });
/*
718. 最长重复子数组
给两个整数数组 A 和 B ，返回两个数组中公共的、长度最长的子数组的长度。

示例 1:

输入:
A: [1,2,3,2,1]
B: [3,2,1,4,7]
输出: 3
解释:
长度最长的公共子数组是 [3, 2, 1]。
说明:

1 <= len(A), len(B) <= 1000
0 <= A[i], B[i] < 100
* */
/**
 * 官方的解法 从后往前 动态规划
 * */
function findLength1(A, B) {
  let result = 0;
  const cache = Array.from({ length: A.length + 1 }).map(() =>
    new Array(B.length + 1).fill(0)
  );
  for (let i = A.length - 1; i >= 0; i--) {
    for (let j = B.length - 1; j >= 0; j--) {
      cache[i][j] = A[i] == B[j] ? cache[i + 1][j + 1] + 1 : 0;
      result = Math.max(result, cache[i][j]);
    }
  }
  return result;
}
/**
 * 动态规划 从前往后
 * 只是 当[-1][-1] 直接当0 处理
 * */
function findLength2(A, B) {
  let result = 0;
  const cache = Array.from({ length: A.length }).map(() =>
    new Array(B.length).fill(0)
  );
  for (let i = 0; i < A.length; i++) {
    for (let j = 0; j < B.length; j++) {
      cache[i][j] = A[i] == B[j] ? (cache[i - 1]?.[j - 1] || 0) + 1 : 0;
      result = Math.max(result, cache[i][j]);
    }
  }
  return result;
}
/**
 * 滑动窗口
 * 看时间复杂度 似乎还比不上动态规划(但是速度快?)
 * https://leetcode-cn.com/problems/maximum-length-of-repeated-subarray/solution/zui-chang-zhong-fu-zi-shu-zu-by-leetcode-solution/
 * */
function findLength3(A, B) {
  let result = 0;
  // 裁剪A 匹配B
  for (let i = 0; i < A.length; i++) {
    result = Math.max(
      result,
      maxLength(A, B, i, 0, Math.min(A.length, B.length - i))
    );
  }
  // 裁剪B 匹配A
  for (let i = 0; i < B.length; i++) {
    result = Math.max(
      result,
      maxLength(A, B, 0, i, Math.min(A.length - i, B.length))
    );
  }
  return result;
}
function maxLength(A, B, addA, addB, len) {
  let ret = 0;
  let k = 0;
  for (let i = 0; i < len; i++) {
    if (A[addA + i] == B[addB + i]) {
      k++;
    } else {
      k = 0;
    }
    ret = Math.max(ret, k);
  }
  return ret;
}
const assert_1 = __importDefault(require("assert"));
assert_1.default.deepStrictEqual(
  findLength1([1, 2, 3, 2, 1], [3, 2, 1, 4, 7]),
  3
);
assert_1.default.deepStrictEqual(
  findLength2([1, 2, 3, 2, 1], [3, 2, 1, 4, 7]),
  3
);
assert_1.default.deepStrictEqual(
  findLength3([1, 2, 3, 2, 1], [3, 2, 1, 4, 7]),
  3
);
const benchmark_1 = __importDefault(require("benchmark"));
const suite = new benchmark_1.default.Suite();
const sample1 = Array.from({ length: 1000 }).map(() =>
  Math.floor(Math.random() * 10)
);
const sample2 = Array.from({ length: 1000 }).map(() =>
  Math.floor(Math.random() * 10)
);
suite
  .add("动态规划 从尾开时", function () {
    findLength1(sample1, sample2);
  })
  .add("动态规划 从头开始", function () {
    findLength2(sample1, sample2);
  })
  .add("滑动窗口", function () {
    findLength3(sample1, sample2);
  })
  .on("cycle", function (event) {
    console.log(String(event.target));
  })
  .on("complete", function () {
    console.log("Fastest is " + this.filter("fastest").map("name"));
  })
  // run async
  .run({ async: false });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzE4LuacgOmVv+mHjeWkjeWtkOaVsOe7hC5qcyIsInNvdXJjZVJvb3QiOiIuLyIsInNvdXJjZXMiOlsibGVldGNvZGUvNzE4LuacgOmVv+mHjeWkjeWtkOaVsOe7hC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7O0lBZ0JJO0FBQ0o7O0tBRUs7QUFDTCxTQUFTLFdBQVcsQ0FBQyxDQUFXLEVBQUUsQ0FBVztJQUMzQyxJQUFJLE1BQU0sR0FBVyxDQUFDLENBQUM7SUFDdkIsTUFBTSxLQUFLLEdBQWUsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUN0RSxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FDaEMsQ0FBQztJQUNGLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUN0QyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDdEMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3pELE1BQU0sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENB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QUFDLENBQy9CLENBQUM7QUFDRixNQUFNLE9BQU8sR0FBYSxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUM5RCxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FDL0IsQ0FBQztBQUNGLEtBQUs7S0FDRixHQUFHLENBQUMsV0FBVyxFQUFFO0lBQ2hCLFdBQVcsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDaEMsQ0FBQyxDQUFDO0tBQ0QsR0FBRyxDQUFDLFdBQVcsRUFBRTtJQUNoQixXQUFXLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ2hDLENBQUMsQ0FBQztLQUNELEdBQUcsQ0FBQyxNQUFNLEVBQUU7SUFDWCxXQUFXLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ2hDLENBQUMsQ0FBQztLQUNELEVBQUUsQ0FBQyxPQUFPLEVBQUUsVUFBVSxLQUFzQjtJQUMzQyxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUNwQyxDQUFDLENBQUM7S0FDRCxFQUFFLENBQUMsVUFBVSxFQUFFO0lBQ2QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUNsRSxDQUFDLENBQUM7SUFDRixZQUFZO0tBQ1gsR0FBRyxDQUFDLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuNzE4LiDmnIDplb/ph43lpI3lrZDmlbDnu4Rcbue7meS4pOS4quaVtOaVsOaVsOe7hCBBIOWSjCBCIO+8jOi/lOWbnuS4pOS4quaVsOe7hOS4reWFrOWFseeahOOAgemVv+W6puacgOmVv+eahOWtkOaVsOe7hOeahOmVv+W6puOAglxuXG7npLrkvosgMTpcblxu6L6T5YWlOlxuQTogWzEsMiwzLDIsMV1cbkI6IFszLDIsMSw0LDddXG7ovpPlh7o6IDNcbuino+mHijpcbumVv+W6puacgOmVv+eahOWFrOWFseWtkOaVsOe7hOaYryBbMywgMiwgMV3jgIJcbuivtOaYjjpcblxuMSA8PSBsZW4oQSksIGxlbihCKSA8PSAxMDAwXG4wIDw9IEFbaV0sIEJbaV0gPCAxMDBcbiogKi9cbi8qKlxuICog5a6Y5pa555qE6Kej5rOVIOS7juWQjuW+gOWJjSDliqjmgIHop4TliJJcbiAqICovXG5mdW5jdGlvbiBmaW5kTGVuZ3RoMShBOiBudW1iZXJbXSwgQjogbnVtYmVyW10pOiBudW1iZXIge1xuICBsZXQgcmVzdWx0OiBudW1iZXIgPSAwO1xuICBjb25zdCBjYWNoZTogbnVtYmVyW11bXSA9IEFycmF5LmZyb20oeyBsZW5ndGg6IEEubGVuZ3RoICsgMSB9KS5tYXAoKCkgPT5cbiAgICBuZXcgQXJyYXkoQi5sZW5ndGggKyAxKS5maWxsKDApXG4gICk7XG4gIGZvciAobGV0IGkgPSBBLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgZm9yIChsZXQgaiA9IEIubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgIGNhY2hlW2ldW2pdID0gQVtpXSA9PSBCW2pdID8gY2FjaGVbaSArIDFdW2ogKyAxXSArIDEgOiAwO1xuICAgICAgcmVzdWx0ID0gTWF0aC5tYXgocmVzdWx0LCBjYWNoZVtpXVtqXSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiDliqjmgIHop4TliJIg5LuO5YmN5b6A5ZCOXG4gKiDlj6rmmK8g5b2TWy0xXVstMV0g55u05o6l5b2TMCDlpITnkIZcbiAqICovXG5mdW5jdGlvbiBmaW5kTGVuZ3RoMihBOiBudW1iZXJbXSwgQjogbnVtYmVyW10pOiBudW1iZXIge1xuICBsZXQgcmVzdWx0OiBudW1iZXIgPSAwO1xuICBjb25zdCBjYWNoZTogbnVtYmVyW11bXSA9IEFycmF5LmZyb20oeyBsZW5ndGg6IEEubGVuZ3RoIH0pLm1hcCgoKSA9PlxuICAgIG5ldyBBcnJheShCLmxlbmd0aCkuZmlsbCgwKVxuICApO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IEEubGVuZ3RoOyBpKyspIHtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IEIubGVuZ3RoOyBqKyspIHtcbiAgICAgIGNhY2hlW2ldW2pdID0gQVtpXSA9PSBCW2pdID8gKGNhY2hlW2kgLSAxXT8uW2ogLSAxXSB8fCAwKSArIDEgOiAwO1xuICAgICAgcmVzdWx0ID0gTWF0aC5tYXgocmVzdWx0LCBjYWNoZVtpXVtqXSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiDmu5Hliqjnqpflj6NcbiAqIOeci+aXtumXtOWkjeadguW6piDkvLzkuY7ov5jmr5TkuI3kuIrliqjmgIHop4TliJIo5L2G5piv6YCf5bqm5b+rPylcbiAqIGh0dHBzOi8vbGVldGNvZGUtY24uY29tL3Byb2JsZW1zL21heGltdW0tbGVuZ3RoLW9mLXJlcGVhdGVkLXN1YmFycmF5L3NvbHV0aW9uL3p1aS1jaGFuZy16aG9uZy1mdS16aS1zaHUtenUtYnktbGVldGNvZGUtc29sdXRpb24vXG4gKiAqL1xuZnVuY3Rpb24gZmluZExlbmd0aDMoQTogbnVtYmVyW10sIEI6IG51bWJlcltdKTogbnVtYmVyIHtcbiAgbGV0IHJlc3VsdCA9IDA7XG5cbiAgLy8g6KOB5YmqQSDljLnphY1CXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgQS5sZW5ndGg7IGkrKykge1xuICAgIHJlc3VsdCA9IE1hdGgubWF4KFxuICAgICAgcmVzdWx0LFxuICAgICAgbWF4TGVuZ3RoKEEsIEIsIGksIDAsIE1hdGgubWluKEEubGVuZ3RoLCBCLmxlbmd0aCAtIGkpKVxuICAgICk7XG4gIH1cbiAgLy8g6KOB5YmqQiDljLnphY1BXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgQi5sZW5ndGg7IGkrKykge1xuICAgIHJlc3VsdCA9IE1hdGgubWF4KFxuICAgICAgcmVzdWx0LFxuICAgICAgbWF4TGVuZ3RoKEEsIEIsIDAsIGksIE1hdGgubWluKEEubGVuZ3RoIC0gaSwgQi5sZW5ndGgpKVxuICAgICk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIG1heExlbmd0aChcbiAgQTogbnVtYmVyW10sXG4gIEI6IG51bWJlcltdLFxuICBhZGRBOiBudW1iZXIsXG4gIGFkZEI6IG51bWJlcixcbiAgbGVuOiBudW1iZXJcbikge1xuICBsZXQgcmV0ID0gMDtcbiAgbGV0IGsgPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgaWYgKEFbYWRkQSArIGldID09IEJbYWRkQiArIGldKSB7XG4gICAgICBrKys7XG4gICAgfSBlbHNlIHtcbiAgICAgIGsgPSAwO1xuICAgIH1cbiAgICByZXQgPSBNYXRoLm1heChyZXQsIGspO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbmltcG9ydCBhc3NlcnQgZnJvbSBcImFzc2VydFwiO1xuYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmaW5kTGVuZ3RoMShbMSwgMiwgMywgMiwgMV0sIFszLCAyLCAxLCA0LCA3XSksIDMpO1xuYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmaW5kTGVuZ3RoMihbMSwgMiwgMywgMiwgMV0sIFszLCAyLCAxLCA0LCA3XSksIDMpO1xuYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChmaW5kTGVuZ3RoMyhbMSwgMiwgMywgMiwgMV0sIFszLCAyLCAxLCA0LCA3XSksIDMpO1xuXG5cbmltcG9ydCBCZW5jaG1hcmsgZnJvbSBcImJlbmNobWFya1wiO1xuXG5jb25zdCBzdWl0ZSA9IG5ldyBCZW5jaG1hcmsuU3VpdGUoKTtcbmNvbnN0IHNhbXBsZTE6IG51bWJlcltdID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMTAwMCB9KS5tYXAoKCkgPT5cbiAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApXG4pO1xuY29uc3Qgc2FtcGxlMjogbnVtYmVyW10gPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMDAwIH0pLm1hcCgoKSA9PlxuICBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMClcbik7XG5zdWl0ZVxuICAuYWRkKFwi5Yqo5oCB6KeE5YiSIOS7juWwvuW8gOaXtlwiLCBmdW5jdGlvbiAoKSB7XG4gICAgZmluZExlbmd0aDEoc2FtcGxlMSwgc2FtcGxlMik7XG4gIH0pXG4gIC5hZGQoXCLliqjmgIHop4TliJIg5LuO5aS05byA5aeLXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBmaW5kTGVuZ3RoMihzYW1wbGUxLCBzYW1wbGUyKTtcbiAgfSlcbiAgLmFkZChcIua7keWKqOeql+WPo1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgZmluZExlbmd0aDMoc2FtcGxlMSwgc2FtcGxlMik7XG4gIH0pXG4gIC5vbihcImN5Y2xlXCIsIGZ1bmN0aW9uIChldmVudDogQmVuY2htYXJrLkV2ZW50KSB7XG4gICAgY29uc29sZS5sb2coU3RyaW5nKGV2ZW50LnRhcmdldCkpO1xuICB9KVxuICAub24oXCJjb21wbGV0ZVwiLCBmdW5jdGlvbiAodGhpczogYW55KSB7XG4gICAgY29uc29sZS5sb2coXCJGYXN0ZXN0IGlzIFwiICsgdGhpcy5maWx0ZXIoXCJmYXN0ZXN0XCIpLm1hcChcIm5hbWVcIikpO1xuICB9KVxuICAvLyBydW4gYXN5bmNcbiAgLnJ1bih7IGFzeW5jOiBmYWxzZSB9KTtcbiJdfQ==
