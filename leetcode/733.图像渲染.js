"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
/*
有一幅以二维整数数组表示的图画，每一个整数表示该图画的像素值大小，数值在 0 到 65535 之间。

给你一个坐标 (sr, sc) 表示图像渲染开始的像素值（行 ，列）和一个新的颜色值 newColor，让你重新上色这幅图像。

为了完成上色工作，从初始坐标开始，记录初始坐标的上下左右四个方向上像素值与初始坐标相同的相连像素点，
接着再记录这四个方向上符合条件的像素点与他们对应四个方向上像素值与初始坐标相同的相连像素点，……，
重复该过程。将所有有记录的像素点的颜色值改为新的颜色值。

最后返回经过上色渲染后的图像。

示例 1:

输入:
image = [
    [1,1,1],
    [1,1,0],
    [1,0,1]
]
sr = 1, sc = 1, newColor = 2
输出: [[2,2,2],[2,2,0],[2,0,1]]
解析:
在图像的正中间，(坐标(sr,sc)=(1,1)),
在路径上所有符合条件的像素点的颜色都被更改成2。
注意，右下角的像素没有更改为2，
因为它不是在上下左右四个方向上与初始点相连的像素点。
注意:

1.image 和 image[0] 的长度在范围 [1, 50] 内。
2.给出的初始点将满足 0 <= sr < image.length 和 0 <= sc < image[0].length。
3.image[i][j] 和 newColor 表示的颜色值在范围 [0, 65535]内。
* */
/**
 * @param {number[][]} image
 * @param {number} sr
 * @param {number} sc
 * @param {number} newColor
 * @return {number[][]}
 */
var floodFill = function (image, sr, sc, newColor) {
    // bfs
    const old_color = image[sr][sc];
    if (old_color === newColor)
        return image;
    const list = [];
    list.push([sc, sr]);
    while (list.length) {
        const [x, y] = list.shift();
        if (x < 0 || y < 0 || y >= image.length || x >= image[y].length)
            continue;
        if (image[y][x] === old_color) {
            image[y][x] = newColor;
            // 上
            list.push([x, y - 1]);
            // 右
            list.push([x + 1, y]);
            // 下
            list.push([x, y + 1]);
            // 左
            list.push([x - 1, y]);
        }
    }
    return image;
};
/**
 * 使用回溯法
 * 速度更快 因为 不需要 使用一个多余的队列
 * */
var floodFill_1 = function (image, sr, sc, newColor) {
    fill(image, sr, sc, image[sr][sc], newColor);
    return image;
    function fill(image, x, y, origColor, newColor) {
        // 出界：超出数组边界
        if (!inArea(image, x, y))
            return;
        // 碰壁：遇到其他颜色，超出 origColor 区域
        if (image[x][y] != origColor)
            return;
        // 已探索过的 origColor 区域
        if (image[x][y] == -1)
            return;
        // 打标记，以免重复
        image[x][y] = -1;
        fill(image, x, y + 1, origColor, newColor);
        fill(image, x, y - 1, origColor, newColor);
        fill(image, x - 1, y, origColor, newColor);
        fill(image, x + 1, y, origColor, newColor);
        // 将标记替换为 newColor
        image[x][y] = newColor;
    }
    function inArea(image, x, y) {
        return x >= 0 && x < image.length && y >= 0 && y < image[0].length;
    }
};
const assert_1 = __importDefault(require("assert"));
assert_1.default.deepStrictEqual(floodFill([
    [1, 1, 1],
    [1, 1, 0],
    [1, 0, 1],
], 1, 1, 2), [
    [2, 2, 2],
    [2, 2, 0],
    [2, 0, 1],
]);
assert_1.default.deepStrictEqual(floodFill([
    [0, 0, 0],
    [0, 1, 1],
], 1, 1, 1), [
    [0, 0, 0],
    [0, 1, 1],
]);
assert_1.default.deepStrictEqual(floodFill([
    [0, 0, 0],
    [1, 0, 0],
], 1, 0, 2), [
    [0, 0, 0],
    [2, 0, 0],
]);
assert_1.default.deepStrictEqual(floodFill_1([
    [1, 1, 1],
    [1, 1, 0],
    [1, 0, 1],
], 1, 1, 2), [
    [2, 2, 2],
    [2, 2, 0],
    [2, 0, 1],
]);
assert_1.default.deepStrictEqual(floodFill_1([
    [0, 0, 0],
    [0, 1, 1],
], 1, 1, 1), [
    [0, 0, 0],
    [0, 1, 1],
]);
assert_1.default.deepStrictEqual(floodFill_1([
    [0, 0, 0],
    [1, 0, 0],
], 1, 0, 2), [
    [0, 0, 0],
    [2, 0, 0],
]);
const benchmark_1 = __importDefault(require("benchmark"));
const suite = new benchmark_1.default.Suite();
suite
    .add("bfs", function () {
    floodFill([
        [1, 1, 1],
        [1, 1, 0],
        [1, 0, 1],
    ], 1, 1, 2);
})
    .add("backtracking algorithm", function () {
    floodFill_1([
        [1, 1, 1],
        [1, 1, 0],
        [1, 0, 1],
    ], 1, 1, 2);
})
    .on("cycle", function (event) {
    console.log(String(event.target));
})
    .on("complete", function () {
    // console.log('Fastest is ' + this.filter('fastest').map( 'name'));
})
    // run async
    .run({ async: false });
/**
 * 结论 backtracking >>  bfs > dfs
 * */
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzMzLuWbvuWDj+a4suafky5qcyIsInNvdXJjZVJvb3QiOiIuLyIsInNvdXJjZXMiOlsibGVldGNvZGUvNzMzLuWbvuWDj+a4suafky50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBK0JJO0FBQ0o7Ozs7OztHQU1HO0FBQ0gsSUFBSSxTQUFTLEdBQUcsVUFDZCxLQUFpQixFQUNqQixFQUFVLEVBQ1YsRUFBVSxFQUNWLFFBQWdCO0lBRWhCLE1BQU07SUFDTixNQUFNLFNBQVMsR0FBRyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDaEMsSUFBSSxTQUFTLEtBQUssUUFBUTtRQUFFLE9BQU8sS0FBSyxDQUFDO0lBQ3pDLE1BQU0sSUFBSSxHQUF1QixFQUFFLENBQUM7SUFDcEMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3BCLE9BQU8sSUFBSSxDQUFDLE1BQU0sRUFBRTtRQUNsQixNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLEVBQUcsQ0FBQztRQUM3QixJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksS0FBSyxDQUFDLE1BQU0sSUFBSSxDQUFDLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU07WUFBRSxTQUFTO1FBQzFFLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLFNBQVMsRUFBRTtZQUM3QixLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDO1lBQ3ZCLElBQUk7WUFDSixJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3RCLElBQUk7WUFD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Q0FBQztBQUVGLGdCQUFNLENBQUMsZUFBZSxDQUNwQixTQUFTLENBQ1A7SUFDRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ1QsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztDQUNWLEVBQ0QsQ0FBQyxFQUNELENBQUMsRUFDRCxDQUFDLENBQ0YsRUFDRDtJQUNFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDVCxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0NBQ1YsQ0FDRixDQUFDO0FBQ0YsZ0JBQU0sQ0FBQyxlQUFlLENBQ3BCLFNBQVMsQ0FDUDtJQUNFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDVCxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0NBQ1YsRUFDRCxDQUFDLEVBQ0QsQ0FBQyxFQUNELENBQUMsQ0FDRixFQUNEO0lBQ0UsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNULENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7Q0FDVixDQUNGLENBQUM7QUFDRixnQkFBTSxDQUFDLGVBQWUsQ0FDcEIsV0FBVyxDQUNUO0lBQ0UsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNULENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDVCxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0NBQ1YsRUFDRCxDQUFDLEVBQ0QsQ0FBQyxFQUNELENBQUMsQ0FDRixFQUNEO0lBQ0UsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNULENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDVCxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0NBQ1YsQ0FDRixDQUFDO0FBRUYsZ0JBQU0sQ0FBQyxlQUFlLENBQ3BCLFdBQVcsQ0FDVDtJQUNFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDVCxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0NBQ1YsRUFDRCxDQUFDLEVBQ0QsQ0FBQyxFQUNELENBQUMsQ0FDRixFQUNEO0lBQ0UsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNULENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7Q0FDVixDQUNGLENBQUM7QUFDRixnQkFBTSxDQUFDLGVBQWUsQ0FDcEIsV0FBVyxDQUNUO0lBQ0UsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNULENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7Q0FDVixFQUNELENBQUMsRUFDRCxDQUFDLEVBQ0QsQ0FBQyxDQUNGLEVBQ0Q7SUFDRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ1QsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztDQUNWLENBQ0YsQ0FBQztBQUVGLDBEQUFrQztBQUVsQyxNQUFNLEtBQUssR0FBRyxJQUFJLG1CQUFTLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDcEMsS0FBSztLQUNGLEdBQUcsQ0FBQyxLQUFLLEVBQUU7SUFDVixTQUFTLENBQ1A7UUFDRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ1QsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNULENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7S0FDVixFQUNELENBQUMsRUFDRCxDQUFDLEVBQ0QsQ0FBQyxDQUNGLENBQUM7QUFDSixDQUFDLENBQUM7S0FDRCxHQUFHLENBQUMsd0JBQXdCLEVBQUU7SUFDN0IsV0FBVyxDQUNUO1FBQ0UsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNULENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDVCxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0tBQ1YsRUFDRCxDQUFDLEVBQ0QsQ0FBQyxFQUNELENBQUMsQ0FDRixDQUFDO0FBQ0osQ0FBQyxDQUFDO0tBQ0QsRUFBRSxDQUFDLE9BQU8sRUFBRSxVQUFVLEtBQXNCO0lBQzNDLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0FBQ3BDLENBQUMsQ0FBQztLQUNELEVBQUUsQ0FBQyxVQUFVLEVBQUU7SUFDZCxvRUFBb0U7QUFDdEUsQ0FBQyxDQUFDO0lBQ0YsWUFBWTtLQUNYLEdBQUcsQ0FBQyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO0FBRXpCOztLQUVLIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxu5pyJ5LiA5bmF5Lul5LqM57u05pW05pWw5pWw57uE6KGo56S655qE5Zu+55S777yM5q+P5LiA5Liq5pW05pWw6KGo56S66K+l5Zu+55S755qE5YOP57Sg5YC85aSn5bCP77yM5pWw5YC85ZyoIDAg5YiwIDY1NTM1IOS5i+mXtOOAglxyXG5cclxu57uZ5L2g5LiA5Liq5Z2Q5qCHIChzciwgc2MpIOihqOekuuWbvuWDj+a4suafk+W8gOWni+eahOWDj+e0oOWAvO+8iOihjCDvvIzliJfvvInlkozkuIDkuKrmlrDnmoTpopzoibLlgLwgbmV3Q29sb3LvvIzorqnkvaDph43mlrDkuIroibLov5nluYXlm77lg4/jgIJcclxuXHJcbuS4uuS6huWujOaIkOS4iuiJsuW3peS9nO+8jOS7juWIneWni+WdkOagh+W8gOWni++8jOiusOW9leWIneWni+WdkOagh+eahOS4iuS4i+W3puWPs+Wbm+S4quaWueWQkeS4iuWDj+e0oOWAvOS4juWIneWni+WdkOagh+ebuOWQjOeahOebuOi/nuWDj+e0oOeCue+8jFxyXG7mjqXnnYDlho3orrDlvZXov5nlm5vkuKrmlrnlkJHkuIrnrKblkIjmnaHku7bnmoTlg4/ntKDngrnkuI7ku5bku6zlr7nlupTlm5vkuKrmlrnlkJHkuIrlg4/ntKDlgLzkuI7liJ3lp4vlnZDmoIfnm7jlkIznmoTnm7jov57lg4/ntKDngrnvvIzigKbigKbvvIxcclxu6YeN5aSN6K+l6L+H56iL44CC5bCG5omA5pyJ5pyJ6K6w5b2V55qE5YOP57Sg54K555qE6aKc6Imy5YC85pS55Li65paw55qE6aKc6Imy5YC844CCXHJcblxyXG7mnIDlkI7ov5Tlm57nu4/ov4fkuIroibLmuLLmn5PlkI7nmoTlm77lg4/jgIJcclxuXHJcbuekuuS+iyAxOlxyXG5cclxu6L6T5YWlOlxyXG5pbWFnZSA9IFtcclxuICAgIFsxLDEsMV0sXHJcbiAgICBbMSwxLDBdLFxyXG4gICAgWzEsMCwxXVxyXG5dXHJcbnNyID0gMSwgc2MgPSAxLCBuZXdDb2xvciA9IDJcclxu6L6T5Ye6OiBbWzIsMiwyXSxbMiwyLDBdLFsyLDAsMV1dXHJcbuino+aekDpcclxu5Zyo5Zu+5YOP55qE5q2j5Lit6Ze077yMKOWdkOaghyhzcixzYyk9KDEsMSkpLFxyXG7lnKjot6/lvoTkuIrmiYDmnInnrKblkIjmnaHku7bnmoTlg4/ntKDngrnnmoTpopzoibLpg73ooqvmm7TmlLnmiJAy44CCXHJcbuazqOaEj++8jOWPs+S4i+inkueahOWDj+e0oOayoeacieabtOaUueS4ujLvvIxcclxu5Zug5Li65a6D5LiN5piv5Zyo5LiK5LiL5bem5Y+z5Zub5Liq5pa55ZCR5LiK5LiO5Yid5aeL54K555u46L+e55qE5YOP57Sg54K544CCXHJcbuazqOaEjzpcclxuXHJcbjEuaW1hZ2Ug5ZKMIGltYWdlWzBdIOeahOmVv+W6puWcqOiMg+WbtCBbMSwgNTBdIOWGheOAglxyXG4yLue7meWHuueahOWIneWni+eCueWwhua7oei2syAwIDw9IHNyIDwgaW1hZ2UubGVuZ3RoIOWSjCAwIDw9IHNjIDwgaW1hZ2VbMF0ubGVuZ3Ro44CCXHJcbjMuaW1hZ2VbaV1bal0g5ZKMIG5ld0NvbG9yIOihqOekuueahOminOiJsuWAvOWcqOiMg+WbtCBbMCwgNjU1MzVd5YaF44CCXHJcbiogKi9cclxuLyoqXHJcbiAqIEBwYXJhbSB7bnVtYmVyW11bXX0gaW1hZ2VcclxuICogQHBhcmFtIHtudW1iZXJ9IHNyXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBzY1xyXG4gKiBAcGFyYW0ge251bWJlcn0gbmV3Q29sb3JcclxuICogQHJldHVybiB7bnVtYmVyW11bXX1cclxuICovXHJcbnZhciBmbG9vZEZpbGwgPSBmdW5jdGlvbiAoXHJcbiAgaW1hZ2U6IG51bWJlcltdW10sXHJcbiAgc3I6IG51bWJlcixcclxuICBzYzogbnVtYmVyLFxyXG4gIG5ld0NvbG9yOiBudW1iZXJcclxuKSB7XHJcbiAgLy8gYmZzXHJcbiAgY29uc3Qgb2xkX2NvbG9yID0gaW1hZ2Vbc3JdW3NjXTtcclxuICBpZiAob2xkX2NvbG9yID09PSBuZXdDb2xvcikgcmV0dXJuIGltYWdlO1xyXG4gIGNvbnN0IGxpc3Q6IFtudW1iZXIsIG51bWJlcl1bXSA9IFtdO1xyXG4gIGxpc3QucHVzaChbc2MsIHNyXSk7XHJcbiAgd2hpbGUgKGxpc3QubGVuZ3RoKSB7XHJcbiAgICBjb25zdCBbeCwgeV0gPSBsaXN0LnNoaWZ0KCkhO1xyXG4gICAgaWYgKHggPCAwIHx8IHkgPCAwIHx8IHkgPj0gaW1hZ2UubGVuZ3RoIHx8IHggPj0gaW1hZ2VbeV0ubGVuZ3RoKSBjb250aW51ZTtcclxuICAgIGlmIChpbWFnZVt5XVt4XSA9PT0gb2xkX2NvbG9yKSB7XHJcbiAgICAgIGltYWdlW3ldW3hdID0gbmV3Q29sb3I7XHJcbiAgICAgIC8vIOS4ilxyXG4gICAgICBsaXN0LnB1c2goW3gsIHkgLSAxXSk7XHJcbiAgICAgIC8vIOWPs1xyXG4gICAgICBsaXN0LnB1c2goW3ggKyAxLCB5XSk7XHJcbiAgICAgIC8vIOS4i1xyXG4gICAgICBsaXN0LnB1c2goW3gsIHkgKyAxXSk7XHJcbiAgICAgIC8vIOW3plxyXG4gICAgICBsaXN0LnB1c2goW3ggLSAxLCB5XSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gaW1hZ2U7XHJcbn07XHJcblxyXG4vKipcclxuICog5L2/55So5Zue5rqv5rOVXHJcbiAqIOmAn+W6puabtOW/qyDlm6DkuLog5LiN6ZyA6KaBIOS9v+eUqOS4gOS4quWkmuS9meeahOmYn+WIl1xyXG4gKiAqL1xyXG52YXIgZmxvb2RGaWxsXzEgPSBmdW5jdGlvbiAoXHJcbiAgaW1hZ2U6IG51bWJlcltdW10sXHJcbiAgc3I6IG51bWJlcixcclxuICBzYzogbnVtYmVyLFxyXG4gIG5ld0NvbG9yOiBudW1iZXJcclxuKSB7XHJcbiAgZmlsbChpbWFnZSwgc3IsIHNjLCBpbWFnZVtzcl1bc2NdLCBuZXdDb2xvcik7XHJcbiAgcmV0dXJuIGltYWdlO1xyXG5cclxuICBmdW5jdGlvbiBmaWxsKFxyXG4gICAgaW1hZ2U6IG51bWJlcltdW10sXHJcbiAgICB4OiBudW1iZXIsXHJcbiAgICB5OiBudW1iZXIsXHJcbiAgICBvcmlnQ29sb3I6IG51bWJlcixcclxuICAgIG5ld0NvbG9yOiBudW1iZXJcclxuICApIHtcclxuICAgIC8vIOWHuueVjO+8mui2heWHuuaVsOe7hOi+ueeVjFxyXG4gICAgaWYgKCFpbkFyZWEoaW1hZ2UsIHgsIHkpKSByZXR1cm47XHJcbiAgICAvLyDnorDlo4HvvJrpgYfliLDlhbbku5bpopzoibLvvIzotoXlh7ogb3JpZ0NvbG9yIOWMuuWfn1xyXG4gICAgaWYgKGltYWdlW3hdW3ldICE9IG9yaWdDb2xvcikgcmV0dXJuO1xyXG4gICAgLy8g5bey5o6i57Si6L+H55qEIG9yaWdDb2xvciDljLrln59cclxuICAgIGlmIChpbWFnZVt4XVt5XSA9PSAtMSkgcmV0dXJuO1xyXG5cclxuICAgIC8vIOaJk+agh+iusO+8jOS7peWFjemHjeWkjVxyXG4gICAgaW1hZ2VbeF1beV0gPSAtMTtcclxuICAgIGZpbGwoaW1hZ2UsIHgsIHkgKyAxLCBvcmlnQ29sb3IsIG5ld0NvbG9yKTtcclxuICAgIGZpbGwoaW1hZ2UsIHgsIHkgLSAxLCBvcmlnQ29sb3IsIG5ld0NvbG9yKTtcclxuICAgIGZpbGwoaW1hZ2UsIHggLSAxLCB5LCBvcmlnQ29sb3IsIG5ld0NvbG9yKTtcclxuICAgIGZpbGwoaW1hZ2UsIHggKyAxLCB5LCBvcmlnQ29sb3IsIG5ld0NvbG9yKTtcclxuICAgIC8vIOWwhuagh+iusOabv+aNouS4uiBuZXdDb2xvclxyXG4gICAgaW1hZ2VbeF1beV0gPSBuZXdDb2xvcjtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGluQXJlYShpbWFnZTogbnVtYmVyW11bXSwgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcclxuICAgIHJldHVybiB4ID49IDAgJiYgeCA8IGltYWdlLmxlbmd0aCAmJiB5ID49IDAgJiYgeSA8IGltYWdlWzBdLmxlbmd0aDtcclxuICB9XHJcbn07XHJcblxyXG5pbXBvcnQgYXNzZXJ0IGZyb20gXCJhc3NlcnRcIjtcclxuXHJcbmFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXHJcbiAgZmxvb2RGaWxsKFxyXG4gICAgW1xyXG4gICAgICBbMSwgMSwgMV0sXHJcbiAgICAgIFsxLCAxLCAwXSxcclxuICAgICAgWzEsIDAsIDFdLFxyXG4gICAgXSxcclxuICAgIDEsXHJcbiAgICAxLFxyXG4gICAgMlxyXG4gICksXHJcbiAgW1xyXG4gICAgWzIsIDIsIDJdLFxyXG4gICAgWzIsIDIsIDBdLFxyXG4gICAgWzIsIDAsIDFdLFxyXG4gIF1cclxuKTtcclxuXHJcbmFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXHJcbiAgZmxvb2RGaWxsKFxyXG4gICAgW1xyXG4gICAgICBbMCwgMCwgMF0sXHJcbiAgICAgIFswLCAxLCAxXSxcclxuICAgIF0sXHJcbiAgICAxLFxyXG4gICAgMSxcclxuICAgIDFcclxuICApLFxyXG4gIFtcclxuICAgIFswLCAwLCAwXSxcclxuICAgIFswLCAxLCAxXSxcclxuICBdXHJcbik7XHJcbmFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXHJcbiAgZmxvb2RGaWxsKFxyXG4gICAgW1xyXG4gICAgICBbMCwgMCwgMF0sXHJcbiAgICAgIFsxLCAwLCAwXSxcclxuICAgIF0sXHJcbiAgICAxLFxyXG4gICAgMCxcclxuICAgIDJcclxuICApLFxyXG4gIFtcclxuICAgIFswLCAwLCAwXSxcclxuICAgIFsyLCAwLCAwXSxcclxuICBdXHJcbik7XHJcbmFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXHJcbiAgZmxvb2RGaWxsXzEoXHJcbiAgICBbXHJcbiAgICAgIFsxLCAxLCAxXSxcclxuICAgICAgWzEsIDEsIDBdLFxyXG4gICAgICBbMSwgMCwgMV0sXHJcbiAgICBdLFxyXG4gICAgMSxcclxuICAgIDEsXHJcbiAgICAyXHJcbiAgKSxcclxuICBbXHJcbiAgICBbMiwgMiwgMl0sXHJcbiAgICBbMiwgMiwgMF0sXHJcbiAgICBbMiwgMCwgMV0sXHJcbiAgXVxyXG4pO1xyXG5cclxuYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcclxuICBmbG9vZEZpbGxfMShcclxuICAgIFtcclxuICAgICAgWzAsIDAsIDBdLFxyXG4gICAgICBbMCwgMSwgMV0sXHJcbiAgICBdLFxyXG4gICAgMSxcclxuICAgIDEsXHJcbiAgICAxXHJcbiAgKSxcclxuICBbXHJcbiAgICBbMCwgMCwgMF0sXHJcbiAgICBbMCwgMSwgMV0sXHJcbiAgXVxyXG4pO1xyXG5hc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxyXG4gIGZsb29kRmlsbF8xKFxyXG4gICAgW1xyXG4gICAgICBbMCwgMCwgMF0sXHJcbiAgICAgIFsxLCAwLCAwXSxcclxuICAgIF0sXHJcbiAgICAxLFxyXG4gICAgMCxcclxuICAgIDJcclxuICApLFxyXG4gIFtcclxuICAgIFswLCAwLCAwXSxcclxuICAgIFsyLCAwLCAwXSxcclxuICBdXHJcbik7XHJcblxyXG5pbXBvcnQgQmVuY2htYXJrIGZyb20gXCJiZW5jaG1hcmtcIjtcclxuXHJcbmNvbnN0IHN1aXRlID0gbmV3IEJlbmNobWFyay5TdWl0ZSgpO1xyXG5zdWl0ZVxyXG4gIC5hZGQoXCJiZnNcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgZmxvb2RGaWxsKFxyXG4gICAgICBbXHJcbiAgICAgICAgWzEsIDEsIDFdLFxyXG4gICAgICAgIFsxLCAxLCAwXSxcclxuICAgICAgICBbMSwgMCwgMV0sXHJcbiAgICAgIF0sXHJcbiAgICAgIDEsXHJcbiAgICAgIDEsXHJcbiAgICAgIDJcclxuICAgICk7XHJcbiAgfSlcclxuICAuYWRkKFwiYmFja3RyYWNraW5nIGFsZ29yaXRobVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBmbG9vZEZpbGxfMShcclxuICAgICAgW1xyXG4gICAgICAgIFsxLCAxLCAxXSxcclxuICAgICAgICBbMSwgMSwgMF0sXHJcbiAgICAgICAgWzEsIDAsIDFdLFxyXG4gICAgICBdLFxyXG4gICAgICAxLFxyXG4gICAgICAxLFxyXG4gICAgICAyXHJcbiAgICApO1xyXG4gIH0pXHJcbiAgLm9uKFwiY3ljbGVcIiwgZnVuY3Rpb24gKGV2ZW50OiBCZW5jaG1hcmsuRXZlbnQpIHtcclxuICAgIGNvbnNvbGUubG9nKFN0cmluZyhldmVudC50YXJnZXQpKTtcclxuICB9KVxyXG4gIC5vbihcImNvbXBsZXRlXCIsIGZ1bmN0aW9uICh0aGlzOiBCZW5jaG1hcmsuU3VpdGUpIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKCdGYXN0ZXN0IGlzICcgKyB0aGlzLmZpbHRlcignZmFzdGVzdCcpLm1hcCggJ25hbWUnKSk7XHJcbiAgfSlcclxuICAvLyBydW4gYXN5bmNcclxuICAucnVuKHsgYXN5bmM6IGZhbHNlIH0pO1xyXG5cclxuLyoqXHJcbiAqIOe7k+iuuiBiYWNrdHJhY2tpbmcgPj4gIGJmcyA+IGRmc1xyXG4gKiAqL1xyXG4iXX0=