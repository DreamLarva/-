"use strict";
var __importDefault =
  (this && this.__importDefault) ||
  function (mod) {
    return mod && mod.__esModule ? mod : { default: mod };
  };
Object.defineProperty(exports, "__esModule", { value: true });
/*
有一幅以二维整数数组表示的图画，每一个整数表示该图画的像素值大小，数值在 0 到 65535 之间。

给你一个坐标 (sr, sc) 表示图像渲染开始的像素值（行 ，列）和一个新的颜色值 newColor，让你重新上色这幅图像。

为了完成上色工作，从初始坐标开始，记录初始坐标的上下左右四个方向上像素值与初始坐标相同的相连像素点，
接着再记录这四个方向上符合条件的像素点与他们对应四个方向上像素值与初始坐标相同的相连像素点，……，
重复该过程。将所有有记录的像素点的颜色值改为新的颜色值。

最后返回经过上色渲染后的图像。

示例 1:

输入:
image = [
    [1,1,1],
    [1,1,0],
    [1,0,1]
]
sr = 1, sc = 1, newColor = 2
输出: [[2,2,2],[2,2,0],[2,0,1]]
解析:
在图像的正中间，(坐标(sr,sc)=(1,1)),
在路径上所有符合条件的像素点的颜色都被更改成2。
注意，右下角的像素没有更改为2，
因为它不是在上下左右四个方向上与初始点相连的像素点。
注意:

1.image 和 image[0] 的长度在范围 [1, 50] 内。
2.给出的初始点将满足 0 <= sr < image.length 和 0 <= sc < image[0].length。
3.image[i][j] 和 newColor 表示的颜色值在范围 [0, 65535]内。
* */
/**
 * @param {number[][]} image
 * @param {number} sr
 * @param {number} sc
 * @param {number} newColor
 * @return {number[][]}
 */
var floodFill = function (image, sr, sc, newColor) {
  // bfs
  const old_color = image[sr][sc];
  if (old_color === newColor) return image;
  const list = [];
  list.push([sc, sr]);
  while (list.length) {
    const [x, y] = list.shift();
    if (x < 0 || y < 0 || y >= image.length || x >= image[y].length) continue;
    if (image[y][x] === old_color) {
      image[y][x] = newColor;
      // 上
      list.push([x, y - 1]);
      // 右
      list.push([x + 1, y]);
      // 下
      list.push([x, y + 1]);
      // 左
      list.push([x - 1, y]);
    }
  }
  return image;
};
/**
 * 使用回溯法
 * 速度更快 因为 不需要 使用一个多余的队列
 * */
var floodFill_1 = function (image, sr, sc, newColor) {
  fill(image, sr, sc, image[sr][sc], newColor);
  return image;
  function fill(image, x, y, origColor, newColor) {
    // 出界：超出数组边界
    if (!inArea(image, x, y)) return;
    // 碰壁：遇到其他颜色，超出 origColor 区域
    if (image[x][y] != origColor) return;
    // 已探索过的 origColor 区域
    if (image[x][y] == -1) return;
    // 打标记，以免重复
    image[x][y] = -1;
    fill(image, x, y + 1, origColor, newColor);
    fill(image, x, y - 1, origColor, newColor);
    fill(image, x - 1, y, origColor, newColor);
    fill(image, x + 1, y, origColor, newColor);
    // 将标记替换为 newColor
    image[x][y] = newColor;
  }
  function inArea(image, x, y) {
    return x >= 0 && x < image.length && y >= 0 && y < image[0].length;
  }
};
const assert_1 = __importDefault(require("assert"));
assert_1.default.deepStrictEqual(
  floodFill(
    [
      [1, 1, 1],
      [1, 1, 0],
      [1, 0, 1],
    ],
    1,
    1,
    2
  ),
  [
    [2, 2, 2],
    [2, 2, 0],
    [2, 0, 1],
  ]
);
assert_1.default.deepStrictEqual(
  floodFill(
    [
      [0, 0, 0],
      [0, 1, 1],
    ],
    1,
    1,
    1
  ),
  [
    [0, 0, 0],
    [0, 1, 1],
  ]
);
assert_1.default.deepStrictEqual(
  floodFill(
    [
      [0, 0, 0],
      [1, 0, 0],
    ],
    1,
    0,
    2
  ),
  [
    [0, 0, 0],
    [2, 0, 0],
  ]
);
assert_1.default.deepStrictEqual(
  floodFill_1(
    [
      [1, 1, 1],
      [1, 1, 0],
      [1, 0, 1],
    ],
    1,
    1,
    2
  ),
  [
    [2, 2, 2],
    [2, 2, 0],
    [2, 0, 1],
  ]
);
assert_1.default.deepStrictEqual(
  floodFill_1(
    [
      [0, 0, 0],
      [0, 1, 1],
    ],
    1,
    1,
    1
  ),
  [
    [0, 0, 0],
    [0, 1, 1],
  ]
);
assert_1.default.deepStrictEqual(
  floodFill_1(
    [
      [0, 0, 0],
      [1, 0, 0],
    ],
    1,
    0,
    2
  ),
  [
    [0, 0, 0],
    [2, 0, 0],
  ]
);
const benchmark_1 = __importDefault(require("benchmark"));
const suite = new benchmark_1.default.Suite();
suite
  .add("bfs", function () {
    floodFill(
      [
        [1, 1, 1],
        [1, 1, 0],
        [1, 0, 1],
      ],
      1,
      1,
      2
    );
  })
  .add("backtracking algorithm", function () {
    floodFill_1(
      [
        [1, 1, 1],
        [1, 1, 0],
        [1, 0, 1],
      ],
      1,
      1,
      2
    );
  })
  .on("cycle", function (event) {
    console.log(String(event.target));
  })
  .on("complete", function () {
    // console.log('Fastest is ' + this.filter('fastest').map( 'name'));
  })
  // run async
  .run({ async: false });
/**
 * 结论 backtracking >>  bfs > dfs
 * */
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzMzLuWbvuWDj+a4suafky5qcyIsInNvdXJjZVJvb3QiOiIuLyIsInNvdXJjZXMiOlsibGVldGNvZGUvNzMzLuWbvuWDj+a4suafky50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBK0JJO0FBQ0o7Ozs7OztHQU1HO0FBQ0gsSUFBSSxTQUFTLEdBQUcsVUFBVSxLQUFpQixFQUFFLEVBQVUsRUFBRSxFQUFVLEVBQUUsUUFBZ0I7SUFDakYsTUFBTTtJQUNOLE1BQU0sU0FBUyxHQUFHLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNoQyxJQUFJLFNBQVMsS0FBSyxRQUFRO1FBQUUsT0FBTyxLQUFLLENBQUM7SUFDekMsTUFBTSxJQUFJLEdBQXVCLEVBQUUsQ0FBQztJQUNwQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDcEIsT0FBTyxJQUFJLENBQUMsTUFBTSxFQUFFO1FBQ2hCLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFBRyxDQUFDO1FBQzdCLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxLQUFLLENBQUMsTUFBTSxJQUFJLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTTtZQUFFLFNBQVM7UUFDMUUsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssU0FBUyxFQUFFO1lBQzNCLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUM7WUFDdkIsSUFBSTtZQUNKLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdEIsSUFBSTtZQUNKLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdEIsSUFBSTtZQUNKLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdEIsSUFBSTtZQUNKLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDekI7S0FDSjtJQUVELE9BQU8sS0FBSyxDQUFDO0FBQ2pCLENBQUMsQ0FBQztBQUVGOzs7S0FHSztBQUNMLElBQUksV0FBVyxHQUFHLFVBQVUsS0FBaUIsRUFBRSxFQUFVLEVBQUUsRUFBVSxFQUFFLFFBQWdCO0lBRW5GLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDN0MsT0FBTyxLQUFLLENBQUM7SUFFYixTQUFTLElBQUksQ0FBQyxLQUFpQixFQUFFLENBQVMsRUFBRSxDQUFTLEVBQUUsU0FBaUIsRUFBRSxRQUFnQjtRQUN0RixZQUFZO1FBQ1osSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUFFLE9BQU87UUFDakMsNEJBQTRCO1FBQzVCLElBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLFNBQVM7WUFBRSxPQUFPO1FBQ3JDLHFCQUFxQjtRQUNyQixJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7WUFBRSxPQUFPO1FBRTlCLFdBQVc7UUFDWCxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDakIsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxTQUFTLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDM0MsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxTQUFTLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDM0MsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDM0MsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDM0Msa0JBQWtCO1FBQ2xCLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUM7SUFDM0IsQ0FBQztJQUdELFNBQVMsTUFBTSxDQUFDLEtBQWlCLEVBQUUsQ0FBUyxFQUFFLENBQVM7UUFDbkQsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTTtlQUMxQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO0lBQ3pDLENBQUM7QUFDTCxDQUFDLENBQUM7QUFFRixvREFBNEI7QUFFNUIsZ0JBQU0sQ0FBQyxlQUFlLENBQ2xCLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFDckQsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUNwQyxDQUFDO0FBRUYsZ0JBQU0sQ0FBQyxlQUFlLENBQ2xCLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUMxQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FDekIsQ0FBQztBQUNGLGdCQUFNLENBQUMsZUFBZSxDQUNsQixTQUFTLENBQ0wsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFDcEMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQ3pCLENBQUM7QUFDRixnQkFBTSxDQUFDLGVBQWUsQ0FDbEIsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUN2RCxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQ3BDLENBQUM7QUFFRixnQkFBTSxDQUFDLGVBQWUsQ0FDbEIsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQzVDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUN6QixDQUFDO0FBQ0YsZ0JBQU0sQ0FBQyxlQUFlLENBQ2xCLFdBQVcsQ0FDUCxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUNwQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FDekIsQ0FBQztBQUdGLDBEQUFrQztBQUVsQyxNQUFNLEtBQUssR0FBRyxJQUFJLG1CQUFTLENBQUMsS0FBSyxDQUFDO0FBQ2xDLEtBQUs7S0FDQSxHQUFHLENBQUMsS0FBSyxFQUFFO0lBQ1IsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQzFELENBQUMsQ0FBQztLQUNELEdBQUcsQ0FBQyx3QkFBd0IsRUFBRTtJQUMzQixXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDNUQsQ0FBQyxDQUFDO0tBQ0QsRUFBRSxDQUFDLE9BQU8sRUFBRSxVQUFVLEtBQXNCO0lBQ3pDLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0FBQ3RDLENBQUMsQ0FBQztLQUNELEVBQUUsQ0FBQyxVQUFVLEVBQUU7SUFDWixvRUFBb0U7QUFDeEUsQ0FBQyxDQUFDO0lBQ0YsWUFBWTtLQUNYLEdBQUcsQ0FBQyxFQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUMsQ0FBQyxDQUFDO0FBRTNCOztLQUVLIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxu5pyJ5LiA5bmF5Lul5LqM57u05pW05pWw5pWw57uE6KGo56S655qE5Zu+55S777yM5q+P5LiA5Liq5pW05pWw6KGo56S66K+l5Zu+55S755qE5YOP57Sg5YC85aSn5bCP77yM5pWw5YC85ZyoIDAg5YiwIDY1NTM1IOS5i+mXtOOAglxyXG5cclxu57uZ5L2g5LiA5Liq5Z2Q5qCHIChzciwgc2MpIOihqOekuuWbvuWDj+a4suafk+W8gOWni+eahOWDj+e0oOWAvO+8iOihjCDvvIzliJfvvInlkozkuIDkuKrmlrDnmoTpopzoibLlgLwgbmV3Q29sb3LvvIzorqnkvaDph43mlrDkuIroibLov5nluYXlm77lg4/jgIJcclxuXHJcbuS4uuS6huWujOaIkOS4iuiJsuW3peS9nO+8jOS7juWIneWni+WdkOagh+W8gOWni++8jOiusOW9leWIneWni+WdkOagh+eahOS4iuS4i+W3puWPs+Wbm+S4quaWueWQkeS4iuWDj+e0oOWAvOS4juWIneWni+WdkOagh+ebuOWQjOeahOebuOi/nuWDj+e0oOeCue+8jFxyXG7mjqXnnYDlho3orrDlvZXov5nlm5vkuKrmlrnlkJHkuIrnrKblkIjmnaHku7bnmoTlg4/ntKDngrnkuI7ku5bku6zlr7nlupTlm5vkuKrmlrnlkJHkuIrlg4/ntKDlgLzkuI7liJ3lp4vlnZDmoIfnm7jlkIznmoTnm7jov57lg4/ntKDngrnvvIzigKbigKbvvIxcclxu6YeN5aSN6K+l6L+H56iL44CC5bCG5omA5pyJ5pyJ6K6w5b2V55qE5YOP57Sg54K555qE6aKc6Imy5YC85pS55Li65paw55qE6aKc6Imy5YC844CCXHJcblxyXG7mnIDlkI7ov5Tlm57nu4/ov4fkuIroibLmuLLmn5PlkI7nmoTlm77lg4/jgIJcclxuXHJcbuekuuS+iyAxOlxyXG5cclxu6L6T5YWlOlxyXG5pbWFnZSA9IFtcclxuICAgIFsxLDEsMV0sXHJcbiAgICBbMSwxLDBdLFxyXG4gICAgWzEsMCwxXVxyXG5dXHJcbnNyID0gMSwgc2MgPSAxLCBuZXdDb2xvciA9IDJcclxu6L6T5Ye6OiBbWzIsMiwyXSxbMiwyLDBdLFsyLDAsMV1dXHJcbuino+aekDpcclxu5Zyo5Zu+5YOP55qE5q2j5Lit6Ze077yMKOWdkOaghyhzcixzYyk9KDEsMSkpLFxyXG7lnKjot6/lvoTkuIrmiYDmnInnrKblkIjmnaHku7bnmoTlg4/ntKDngrnnmoTpopzoibLpg73ooqvmm7TmlLnmiJAy44CCXHJcbuazqOaEj++8jOWPs+S4i+inkueahOWDj+e0oOayoeacieabtOaUueS4ujLvvIxcclxu5Zug5Li65a6D5LiN5piv5Zyo5LiK5LiL5bem5Y+z5Zub5Liq5pa55ZCR5LiK5LiO5Yid5aeL54K555u46L+e55qE5YOP57Sg54K544CCXHJcbuazqOaEjzpcclxuXHJcbjEuaW1hZ2Ug5ZKMIGltYWdlWzBdIOeahOmVv+W6puWcqOiMg+WbtCBbMSwgNTBdIOWGheOAglxyXG4yLue7meWHuueahOWIneWni+eCueWwhua7oei2syAwIDw9IHNyIDwgaW1hZ2UubGVuZ3RoIOWSjCAwIDw9IHNjIDwgaW1hZ2VbMF0ubGVuZ3Ro44CCXHJcbjMuaW1hZ2VbaV1bal0g5ZKMIG5ld0NvbG9yIOihqOekuueahOminOiJsuWAvOWcqOiMg+WbtCBbMCwgNjU1MzVd5YaF44CCXHJcbiogKi9cclxuLyoqXHJcbiAqIEBwYXJhbSB7bnVtYmVyW11bXX0gaW1hZ2VcclxuICogQHBhcmFtIHtudW1iZXJ9IHNyXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBzY1xyXG4gKiBAcGFyYW0ge251bWJlcn0gbmV3Q29sb3JcclxuICogQHJldHVybiB7bnVtYmVyW11bXX1cclxuICovXHJcbnZhciBmbG9vZEZpbGwgPSBmdW5jdGlvbiAoaW1hZ2U6IG51bWJlcltdW10sIHNyOiBudW1iZXIsIHNjOiBudW1iZXIsIG5ld0NvbG9yOiBudW1iZXIpIHtcclxuICAgIC8vIGJmc1xyXG4gICAgY29uc3Qgb2xkX2NvbG9yID0gaW1hZ2Vbc3JdW3NjXTtcclxuICAgIGlmIChvbGRfY29sb3IgPT09IG5ld0NvbG9yKSByZXR1cm4gaW1hZ2U7XHJcbiAgICBjb25zdCBsaXN0OiBbbnVtYmVyLCBudW1iZXJdW10gPSBbXTtcclxuICAgIGxpc3QucHVzaChbc2MsIHNyXSk7XHJcbiAgICB3aGlsZSAobGlzdC5sZW5ndGgpIHtcclxuICAgICAgICBjb25zdCBbeCwgeV0gPSBsaXN0LnNoaWZ0KCkhO1xyXG4gICAgICAgIGlmICh4IDwgMCB8fCB5IDwgMCB8fCB5ID49IGltYWdlLmxlbmd0aCB8fCB4ID49IGltYWdlW3ldLmxlbmd0aCkgY29udGludWU7XHJcbiAgICAgICAgaWYgKGltYWdlW3ldW3hdID09PSBvbGRfY29sb3IpIHtcclxuICAgICAgICAgICAgaW1hZ2VbeV1beF0gPSBuZXdDb2xvcjtcclxuICAgICAgICAgICAgLy8g5LiKXHJcbiAgICAgICAgICAgIGxpc3QucHVzaChbeCwgeSAtIDFdKTtcclxuICAgICAgICAgICAgLy8g5Y+zXHJcbiAgICAgICAgICAgIGxpc3QucHVzaChbeCArIDEsIHldKTtcclxuICAgICAgICAgICAgLy8g5LiLXHJcbiAgICAgICAgICAgIGxpc3QucHVzaChbeCwgeSArIDFdKTtcclxuICAgICAgICAgICAgLy8g5bemXHJcbiAgICAgICAgICAgIGxpc3QucHVzaChbeCAtIDEsIHldKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGltYWdlO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIOS9v+eUqOWbnua6r+azlVxyXG4gKiDpgJ/luqbmm7Tlv6sg5Zug5Li6IOS4jemcgOimgSDkvb/nlKjkuIDkuKrlpJrkvZnnmoTpmJ/liJdcclxuICogKi9cclxudmFyIGZsb29kRmlsbF8xID0gZnVuY3Rpb24gKGltYWdlOiBudW1iZXJbXVtdLCBzcjogbnVtYmVyLCBzYzogbnVtYmVyLCBuZXdDb2xvcjogbnVtYmVyKSB7XHJcblxyXG4gICAgZmlsbChpbWFnZSwgc3IsIHNjLCBpbWFnZVtzcl1bc2NdLCBuZXdDb2xvcik7XHJcbiAgICByZXR1cm4gaW1hZ2U7XHJcblxyXG4gICAgZnVuY3Rpb24gZmlsbChpbWFnZTogbnVtYmVyW11bXSwgeDogbnVtYmVyLCB5OiBudW1iZXIsIG9yaWdDb2xvcjogbnVtYmVyLCBuZXdDb2xvcjogbnVtYmVyKSB7XHJcbiAgICAgICAgLy8g5Ye655WM77ya6LaF5Ye65pWw57uE6L6555WMXHJcbiAgICAgICAgaWYgKCFpbkFyZWEoaW1hZ2UsIHgsIHkpKSByZXR1cm47XHJcbiAgICAgICAgLy8g56Kw5aOB77ya6YGH5Yiw5YW25LuW6aKc6Imy77yM6LaF5Ye6IG9yaWdDb2xvciDljLrln59cclxuICAgICAgICBpZiAoaW1hZ2VbeF1beV0gIT0gb3JpZ0NvbG9yKSByZXR1cm47XHJcbiAgICAgICAgLy8g5bey5o6i57Si6L+H55qEIG9yaWdDb2xvciDljLrln59cclxuICAgICAgICBpZiAoaW1hZ2VbeF1beV0gPT0gLTEpIHJldHVybjtcclxuXHJcbiAgICAgICAgLy8g5omT5qCH6K6w77yM5Lul5YWN6YeN5aSNXHJcbiAgICAgICAgaW1hZ2VbeF1beV0gPSAtMTtcclxuICAgICAgICBmaWxsKGltYWdlLCB4LCB5ICsgMSwgb3JpZ0NvbG9yLCBuZXdDb2xvcik7XHJcbiAgICAgICAgZmlsbChpbWFnZSwgeCwgeSAtIDEsIG9yaWdDb2xvciwgbmV3Q29sb3IpO1xyXG4gICAgICAgIGZpbGwoaW1hZ2UsIHggLSAxLCB5LCBvcmlnQ29sb3IsIG5ld0NvbG9yKTtcclxuICAgICAgICBmaWxsKGltYWdlLCB4ICsgMSwgeSwgb3JpZ0NvbG9yLCBuZXdDb2xvcik7XHJcbiAgICAgICAgLy8g5bCG5qCH6K6w5pu/5o2i5Li6IG5ld0NvbG9yXHJcbiAgICAgICAgaW1hZ2VbeF1beV0gPSBuZXdDb2xvcjtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gaW5BcmVhKGltYWdlOiBudW1iZXJbXVtdLCB4OiBudW1iZXIsIHk6IG51bWJlcikge1xyXG4gICAgICAgIHJldHVybiB4ID49IDAgJiYgeCA8IGltYWdlLmxlbmd0aFxyXG4gICAgICAgICAgICAmJiB5ID49IDAgJiYgeSA8IGltYWdlWzBdLmxlbmd0aDtcclxuICAgIH1cclxufTtcclxuXHJcbmltcG9ydCBhc3NlcnQgZnJvbSBcImFzc2VydFwiO1xyXG5cclxuYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcclxuICAgIGZsb29kRmlsbChbWzEsIDEsIDFdLCBbMSwgMSwgMF0sIFsxLCAwLCAxXV0sIDEsIDEsIDIpLFxyXG4gICAgW1syLCAyLCAyXSwgWzIsIDIsIDBdLCBbMiwgMCwgMV1dLFxyXG4pO1xyXG5cclxuYXNzZXJ0LmRlZXBTdHJpY3RFcXVhbChcclxuICAgIGZsb29kRmlsbChbWzAsIDAsIDBdLCBbMCwgMSwgMV1dLCAxLCAxLCAxKSxcclxuICAgIFtbMCwgMCwgMF0sIFswLCAxLCAxXV0sXHJcbik7XHJcbmFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXHJcbiAgICBmbG9vZEZpbGwoXHJcbiAgICAgICAgW1swLCAwLCAwXSwgWzEsIDAsIDBdXSwgMSwgMCwgMiksXHJcbiAgICBbWzAsIDAsIDBdLCBbMiwgMCwgMF1dLFxyXG4pO1xyXG5hc3NlcnQuZGVlcFN0cmljdEVxdWFsKFxyXG4gICAgZmxvb2RGaWxsXzEoW1sxLCAxLCAxXSwgWzEsIDEsIDBdLCBbMSwgMCwgMV1dLCAxLCAxLCAyKSxcclxuICAgIFtbMiwgMiwgMl0sIFsyLCAyLCAwXSwgWzIsIDAsIDFdXSxcclxuKTtcclxuXHJcbmFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXHJcbiAgICBmbG9vZEZpbGxfMShbWzAsIDAsIDBdLCBbMCwgMSwgMV1dLCAxLCAxLCAxKSxcclxuICAgIFtbMCwgMCwgMF0sIFswLCAxLCAxXV0sXHJcbik7XHJcbmFzc2VydC5kZWVwU3RyaWN0RXF1YWwoXHJcbiAgICBmbG9vZEZpbGxfMShcclxuICAgICAgICBbWzAsIDAsIDBdLCBbMSwgMCwgMF1dLCAxLCAwLCAyKSxcclxuICAgIFtbMCwgMCwgMF0sIFsyLCAwLCAwXV0sXHJcbik7XHJcblxyXG5cclxuaW1wb3J0IEJlbmNobWFyayBmcm9tIFwiYmVuY2htYXJrXCI7XHJcblxyXG5jb25zdCBzdWl0ZSA9IG5ldyBCZW5jaG1hcmsuU3VpdGU7XHJcbnN1aXRlXHJcbiAgICAuYWRkKCdiZnMnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZmxvb2RGaWxsKFtbMSwgMSwgMV0sIFsxLCAxLCAwXSwgWzEsIDAsIDFdXSwgMSwgMSwgMik7XHJcbiAgICB9KVxyXG4gICAgLmFkZCgnYmFja3RyYWNraW5nIGFsZ29yaXRobScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmbG9vZEZpbGxfMShbWzEsIDEsIDFdLCBbMSwgMSwgMF0sIFsxLCAwLCAxXV0sIDEsIDEsIDIpO1xyXG4gICAgfSlcclxuICAgIC5vbignY3ljbGUnLCBmdW5jdGlvbiAoZXZlbnQ6IEJlbmNobWFyay5FdmVudCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFN0cmluZyhldmVudC50YXJnZXQpKTtcclxuICAgIH0pXHJcbiAgICAub24oJ2NvbXBsZXRlJywgZnVuY3Rpb24gKHRoaXM6IEJlbmNobWFyay5TdWl0ZSkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdGYXN0ZXN0IGlzICcgKyB0aGlzLmZpbHRlcignZmFzdGVzdCcpLm1hcCggJ25hbWUnKSk7XHJcbiAgICB9KVxyXG4gICAgLy8gcnVuIGFzeW5jXHJcbiAgICAucnVuKHsnYXN5bmMnOiBmYWxzZX0pO1xyXG5cclxuLyoqXHJcbiAqIOe7k+iuuiBiYWNrdHJhY2tpbmcgPj4gIGJmcyA+IGRmc1xyXG4gKiAqL1xyXG4iXX0=
